(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Xa(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const At={},gr=[],Ue=()=>{},vg=()=>!1,eo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Za=e=>e.startsWith("onUpdate:"),Ht=Object.assign,tl=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Eg=Object.prototype.hasOwnProperty,vt=(e,t)=>Eg.call(e,t),tt=Array.isArray,mr=e=>Os(e)==="[object Map]",no=e=>Os(e)==="[object Set]",Kc=e=>Os(e)==="[object Date]",lt=e=>typeof e=="function",Nt=e=>typeof e=="string",qe=e=>typeof e=="symbol",bt=e=>e!==null&&typeof e=="object",qh=e=>(bt(e)||lt(e))&&lt(e.then)&&lt(e.catch),Hh=Object.prototype.toString,Os=e=>Hh.call(e),Tg=e=>Os(e).slice(8,-1),zh=e=>Os(e)==="[object Object]",el=e=>Nt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,os=Xa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ro=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},wg=/-(\w)/g,In=ro(e=>e.replace(wg,(t,n)=>n?n.toUpperCase():"")),Ig=/\B([A-Z])/g,Zn=ro(e=>e.replace(Ig,"-$1").toLowerCase()),Kh=ro(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ho=ro(e=>e?`on${Kh(e)}`:""),_n=(e,t)=>!Object.is(e,t),_i=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Gh=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},ga=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Ag=e=>{const t=Nt(e)?Number(e):NaN;return isNaN(t)?e:t};let Gc;const so=()=>Gc||(Gc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function nl(e){if(tt(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Nt(r)?Sg(r):nl(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Nt(e)||bt(e))return e}const bg=/;(?![^(]*\))/g,Cg=/:([^]+)/,Rg=/\/\*[^]*?\*\//g;function Sg(e){const t={};return e.replace(Rg,"").split(bg).forEach(n=>{if(n){const r=n.split(Cg);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Ae(e){let t="";if(Nt(e))t=e;else if(tt(e))for(let n=0;n<e.length;n++){const r=Ae(e[n]);r&&(t+=r+" ")}else if(bt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Pg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",xg=Xa(Pg);function Wh(e){return!!e||e===""}function Vg(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=io(e[r],t[r]);return n}function io(e,t){if(e===t)return!0;let n=Kc(e),r=Kc(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=qe(e),r=qe(t),n||r)return e===t;if(n=tt(e),r=tt(t),n||r)return n&&r?Vg(e,t):!1;if(n=bt(e),r=bt(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const a in e){const l=e.hasOwnProperty(a),u=t.hasOwnProperty(a);if(l&&!u||!l&&u||!io(e[a],t[a]))return!1}}return String(e)===String(t)}function Qh(e,t){return e.findIndex(n=>io(n,t))}const Yh=e=>!!(e&&e.__v_isRef===!0),ye=e=>Nt(e)?e:e==null?"":tt(e)||bt(e)&&(e.toString===Hh||!lt(e.toString))?Yh(e)?ye(e.value):JSON.stringify(e,Jh,2):String(e),Jh=(e,t)=>Yh(t)?Jh(e,t.value):mr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[zo(r,i)+" =>"]=s,n),{})}:no(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>zo(n))}:qe(t)?zo(t):bt(t)&&!tt(t)&&!zh(t)?String(t):t,zo=(e,t="")=>{var n;return qe(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let pe;class Dg{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=pe,!t&&pe&&(this.index=(pe.scopes||(pe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=pe;try{return pe=this,t()}finally{pe=n}}}on(){++this._on===1&&(this.prevScope=pe,pe=this)}off(){this._on>0&&--this._on===0&&(pe=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function kg(){return pe}let Ct;const Ko=new WeakSet;class Xh{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,pe&&pe.active&&pe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ko.has(this)&&(Ko.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||tf(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Wc(this),ef(this);const t=Ct,n=Ve;Ct=this,Ve=!0;try{return this.fn()}finally{nf(this),Ct=t,Ve=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)il(t);this.deps=this.depsTail=void 0,Wc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ko.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ma(this)&&this.run()}get dirty(){return ma(this)}}let Zh=0,as,ls;function tf(e,t=!1){if(e.flags|=8,t){e.next=ls,ls=e;return}e.next=as,as=e}function rl(){Zh++}function sl(){if(--Zh>0)return;if(ls){let t=ls;for(ls=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;as;){let t=as;for(as=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function ef(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function nf(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),il(r),Ng(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function ma(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(rf(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function rf(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===ys)||(e.globalVersion=ys,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!ma(e))))return;e.flags|=2;const t=e.dep,n=Ct,r=Ve;Ct=e,Ve=!0;try{ef(e);const s=e.fn(e._value);(t.version===0||_n(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{Ct=n,Ve=r,nf(e),e.flags&=-3}}function il(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)il(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Ng(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Ve=!0;const sf=[];function tn(){sf.push(Ve),Ve=!1}function en(){const e=sf.pop();Ve=e===void 0?!0:e}function Wc(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Ct;Ct=void 0;try{t()}finally{Ct=n}}}let ys=0;class Og{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ol{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Ct||!Ve||Ct===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ct)n=this.activeLink=new Og(Ct,this),Ct.deps?(n.prevDep=Ct.depsTail,Ct.depsTail.nextDep=n,Ct.depsTail=n):Ct.deps=Ct.depsTail=n,of(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ct.depsTail,n.nextDep=void 0,Ct.depsTail.nextDep=n,Ct.depsTail=n,Ct.deps===n&&(Ct.deps=r)}return n}trigger(t){this.version++,ys++,this.notify(t)}notify(t){rl();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{sl()}}}function of(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)of(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const _a=new WeakMap,Qn=Symbol(""),ya=Symbol(""),vs=Symbol("");function se(e,t,n){if(Ve&&Ct){let r=_a.get(e);r||_a.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new ol),s.map=r,s.key=n),s.track()}}function Xe(e,t,n,r,s,i){const a=_a.get(e);if(!a){ys++;return}const l=u=>{u&&u.trigger()};if(rl(),t==="clear")a.forEach(l);else{const u=tt(e),f=u&&el(n);if(u&&n==="length"){const d=Number(r);a.forEach((p,y)=>{(y==="length"||y===vs||!qe(y)&&y>=d)&&l(p)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),f&&l(a.get(vs)),t){case"add":u?f&&l(a.get("length")):(l(a.get(Qn)),mr(e)&&l(a.get(ya)));break;case"delete":u||(l(a.get(Qn)),mr(e)&&l(a.get(ya)));break;case"set":mr(e)&&l(a.get(Qn));break}}sl()}function cr(e){const t=_t(e);return t===e?t:(se(t,"iterate",vs),Ce(e)?t:t.map(Qt))}function oo(e){return se(e=_t(e),"iterate",vs),e}const Mg={__proto__:null,[Symbol.iterator](){return Go(this,Symbol.iterator,Qt)},concat(...e){return cr(this).concat(...e.map(t=>tt(t)?cr(t):t))},entries(){return Go(this,"entries",e=>(e[1]=Qt(e[1]),e))},every(e,t){return Qe(this,"every",e,t,void 0,arguments)},filter(e,t){return Qe(this,"filter",e,t,n=>n.map(Qt),arguments)},find(e,t){return Qe(this,"find",e,t,Qt,arguments)},findIndex(e,t){return Qe(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Qe(this,"findLast",e,t,Qt,arguments)},findLastIndex(e,t){return Qe(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Qe(this,"forEach",e,t,void 0,arguments)},includes(...e){return Wo(this,"includes",e)},indexOf(...e){return Wo(this,"indexOf",e)},join(e){return cr(this).join(e)},lastIndexOf(...e){return Wo(this,"lastIndexOf",e)},map(e,t){return Qe(this,"map",e,t,void 0,arguments)},pop(){return Xr(this,"pop")},push(...e){return Xr(this,"push",e)},reduce(e,...t){return Qc(this,"reduce",e,t)},reduceRight(e,...t){return Qc(this,"reduceRight",e,t)},shift(){return Xr(this,"shift")},some(e,t){return Qe(this,"some",e,t,void 0,arguments)},splice(...e){return Xr(this,"splice",e)},toReversed(){return cr(this).toReversed()},toSorted(e){return cr(this).toSorted(e)},toSpliced(...e){return cr(this).toSpliced(...e)},unshift(...e){return Xr(this,"unshift",e)},values(){return Go(this,"values",Qt)}};function Go(e,t,n){const r=oo(e),s=r[t]();return r!==e&&!Ce(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const Lg=Array.prototype;function Qe(e,t,n,r,s,i){const a=oo(e),l=a!==e&&!Ce(e),u=a[t];if(u!==Lg[t]){const p=u.apply(e,i);return l?Qt(p):p}let f=n;a!==e&&(l?f=function(p,y){return n.call(this,Qt(p),y,e)}:n.length>2&&(f=function(p,y){return n.call(this,p,y,e)}));const d=u.call(a,f,r);return l&&s?s(d):d}function Qc(e,t,n,r){const s=oo(e);let i=n;return s!==e&&(Ce(e)?n.length>3&&(i=function(a,l,u){return n.call(this,a,l,u,e)}):i=function(a,l,u){return n.call(this,a,Qt(l),u,e)}),s[t](i,...r)}function Wo(e,t,n){const r=_t(e);se(r,"iterate",vs);const s=r[t](...n);return(s===-1||s===!1)&&ul(n[0])?(n[0]=_t(n[0]),r[t](...n)):s}function Xr(e,t,n=[]){tn(),rl();const r=_t(e)[t].apply(e,n);return sl(),en(),r}const Fg=Xa("__proto__,__v_isRef,__isVue"),af=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(qe));function Ug(e){qe(e)||(e=String(e));const t=_t(this);return se(t,"has",e),t.hasOwnProperty(e)}class lf{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Qg:ff:i?hf:uf).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=tt(t);if(!s){let u;if(a&&(u=Mg[n]))return u;if(n==="hasOwnProperty")return Ug}const l=Reflect.get(t,n,ae(t)?t:r);return(qe(n)?af.has(n):Fg(n))||(s||se(t,"get",n),i)?l:ae(l)?a&&el(n)?l:l.value:bt(l)?s?df(l):ll(l):l}}class cf extends lf{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const u=An(i);if(!Ce(r)&&!An(r)&&(i=_t(i),r=_t(r)),!tt(t)&&ae(i)&&!ae(r))return u?!1:(i.value=r,!0)}const a=tt(t)&&el(n)?Number(n)<t.length:vt(t,n),l=Reflect.set(t,n,r,ae(t)?t:s);return t===_t(s)&&(a?_n(r,i)&&Xe(t,"set",n,r):Xe(t,"add",n,r)),l}deleteProperty(t,n){const r=vt(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&Xe(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!qe(n)||!af.has(n))&&se(t,"has",n),r}ownKeys(t){return se(t,"iterate",tt(t)?"length":Qn),Reflect.ownKeys(t)}}class Bg extends lf{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const $g=new cf,jg=new Bg,qg=new cf(!0);const va=e=>e,ii=e=>Reflect.getPrototypeOf(e);function Hg(e,t,n){return function(...r){const s=this.__v_raw,i=_t(s),a=mr(i),l=e==="entries"||e===Symbol.iterator&&a,u=e==="keys"&&a,f=s[e](...r),d=n?va:t?xi:Qt;return!t&&se(i,"iterate",u?ya:Qn),{next(){const{value:p,done:y}=f.next();return y?{value:p,done:y}:{value:l?[d(p[0]),d(p[1])]:d(p),done:y}},[Symbol.iterator](){return this}}}}function oi(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function zg(e,t){const n={get(s){const i=this.__v_raw,a=_t(i),l=_t(s);e||(_n(s,l)&&se(a,"get",s),se(a,"get",l));const{has:u}=ii(a),f=t?va:e?xi:Qt;if(u.call(a,s))return f(i.get(s));if(u.call(a,l))return f(i.get(l));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!e&&se(_t(s),"iterate",Qn),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,a=_t(i),l=_t(s);return e||(_n(s,l)&&se(a,"has",s),se(a,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const a=this,l=a.__v_raw,u=_t(l),f=t?va:e?xi:Qt;return!e&&se(u,"iterate",Qn),l.forEach((d,p)=>s.call(i,f(d),f(p),a))}};return Ht(n,e?{add:oi("add"),set:oi("set"),delete:oi("delete"),clear:oi("clear")}:{add(s){!t&&!Ce(s)&&!An(s)&&(s=_t(s));const i=_t(this);return ii(i).has.call(i,s)||(i.add(s),Xe(i,"add",s,s)),this},set(s,i){!t&&!Ce(i)&&!An(i)&&(i=_t(i));const a=_t(this),{has:l,get:u}=ii(a);let f=l.call(a,s);f||(s=_t(s),f=l.call(a,s));const d=u.call(a,s);return a.set(s,i),f?_n(i,d)&&Xe(a,"set",s,i):Xe(a,"add",s,i),this},delete(s){const i=_t(this),{has:a,get:l}=ii(i);let u=a.call(i,s);u||(s=_t(s),u=a.call(i,s)),l&&l.call(i,s);const f=i.delete(s);return u&&Xe(i,"delete",s,void 0),f},clear(){const s=_t(this),i=s.size!==0,a=s.clear();return i&&Xe(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Hg(s,e,t)}),n}function al(e,t){const n=zg(e,t);return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(vt(n,s)&&s in r?n:r,s,i)}const Kg={get:al(!1,!1)},Gg={get:al(!1,!0)},Wg={get:al(!0,!1)};const uf=new WeakMap,hf=new WeakMap,ff=new WeakMap,Qg=new WeakMap;function Yg(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Jg(e){return e.__v_skip||!Object.isExtensible(e)?0:Yg(Tg(e))}function ll(e){return An(e)?e:cl(e,!1,$g,Kg,uf)}function Xg(e){return cl(e,!1,qg,Gg,hf)}function df(e){return cl(e,!0,jg,Wg,ff)}function cl(e,t,n,r,s){if(!bt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=Jg(e);if(i===0)return e;const a=s.get(e);if(a)return a;const l=new Proxy(e,i===2?r:n);return s.set(e,l),l}function _r(e){return An(e)?_r(e.__v_raw):!!(e&&e.__v_isReactive)}function An(e){return!!(e&&e.__v_isReadonly)}function Ce(e){return!!(e&&e.__v_isShallow)}function ul(e){return e?!!e.__v_raw:!1}function _t(e){const t=e&&e.__v_raw;return t?_t(t):e}function Zg(e){return!vt(e,"__v_skip")&&Object.isExtensible(e)&&Gh(e,"__v_skip",!0),e}const Qt=e=>bt(e)?ll(e):e,xi=e=>bt(e)?df(e):e;function ae(e){return e?e.__v_isRef===!0:!1}function gn(e){return tm(e,!1)}function tm(e,t){return ae(e)?e:new em(e,t)}class em{constructor(t,n){this.dep=new ol,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:_t(t),this._value=n?t:Qt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||Ce(t)||An(t);t=r?t:_t(t),_n(t,n)&&(this._rawValue=t,this._value=r?t:Qt(t),this.dep.trigger())}}function yt(e){return ae(e)?e.value:e}const nm={get:(e,t,n)=>t==="__v_raw"?e:yt(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return ae(s)&&!ae(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function pf(e){return _r(e)?e:new Proxy(e,nm)}class rm{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new ol(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ys-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ct!==this)return tf(this,!0),!0}get value(){const t=this.dep.track();return rf(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function sm(e,t,n=!1){let r,s;return lt(e)?r=e:(r=e.get,s=e.set),new rm(r,s,n)}const ai={},Vi=new WeakMap;let Hn;function im(e,t=!1,n=Hn){if(n){let r=Vi.get(n);r||Vi.set(n,r=[]),r.push(e)}}function om(e,t,n=At){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:l,call:u}=n,f=q=>s?q:Ce(q)||s===!1||s===0?Ze(q,1):Ze(q);let d,p,y,C,P=!1,V=!1;if(ae(e)?(p=()=>e.value,P=Ce(e)):_r(e)?(p=()=>f(e),P=!0):tt(e)?(V=!0,P=e.some(q=>_r(q)||Ce(q)),p=()=>e.map(q=>{if(ae(q))return q.value;if(_r(q))return f(q);if(lt(q))return u?u(q,2):q()})):lt(e)?t?p=u?()=>u(e,2):e:p=()=>{if(y){tn();try{y()}finally{en()}}const q=Hn;Hn=d;try{return u?u(e,3,[C]):e(C)}finally{Hn=q}}:p=Ue,t&&s){const q=p,at=s===!0?1/0:s;p=()=>Ze(q(),at)}const N=kg(),K=()=>{d.stop(),N&&N.active&&tl(N.effects,d)};if(i&&t){const q=t;t=(...at)=>{q(...at),K()}}let G=V?new Array(e.length).fill(ai):ai;const W=q=>{if(!(!(d.flags&1)||!d.dirty&&!q))if(t){const at=d.run();if(s||P||(V?at.some((st,A)=>_n(st,G[A])):_n(at,G))){y&&y();const st=Hn;Hn=d;try{const A=[at,G===ai?void 0:V&&G[0]===ai?[]:G,C];u?u(t,3,A):t(...A),G=at}finally{Hn=st}}}else d.run()};return l&&l(W),d=new Xh(p),d.scheduler=a?()=>a(W,!1):W,C=q=>im(q,!1,d),y=d.onStop=()=>{const q=Vi.get(d);if(q){if(u)u(q,4);else for(const at of q)at();Vi.delete(d)}},t?r?W(!0):G=d.run():a?a(W.bind(null,!0),!0):d.run(),K.pause=d.pause.bind(d),K.resume=d.resume.bind(d),K.stop=K,K}function Ze(e,t=1/0,n){if(t<=0||!bt(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,ae(e))Ze(e.value,t,n);else if(tt(e))for(let r=0;r<e.length;r++)Ze(e[r],t,n);else if(no(e)||mr(e))e.forEach(r=>{Ze(r,t,n)});else if(zh(e)){for(const r in e)Ze(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Ze(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ms(e,t,n,r){try{return r?e(...r):e()}catch(s){ao(s,t,n)}}function De(e,t,n,r){if(lt(e)){const s=Ms(e,t,n,r);return s&&qh(s)&&s.catch(i=>{ao(i,t,n)}),s}if(tt(e)){const s=[];for(let i=0;i<e.length;i++)s.push(De(e[i],t,n,r));return s}}function ao(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||At;if(t){let l=t.parent;const u=t.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](e,u,f)===!1)return}l=l.parent}if(i){tn(),Ms(i,null,10,[e,u,f]),en();return}}am(e,n,s,r,a)}function am(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const fe=[];let Me=-1;const yr=[];let fn=null,ur=0;const gf=Promise.resolve();let Di=null;function lm(e){const t=Di||gf;return e?t.then(this?e.bind(this):e):t}function cm(e){let t=Me+1,n=fe.length;for(;t<n;){const r=t+n>>>1,s=fe[r],i=Es(s);i<e||i===e&&s.flags&2?t=r+1:n=r}return t}function hl(e){if(!(e.flags&1)){const t=Es(e),n=fe[fe.length-1];!n||!(e.flags&2)&&t>=Es(n)?fe.push(e):fe.splice(cm(t),0,e),e.flags|=1,mf()}}function mf(){Di||(Di=gf.then(yf))}function um(e){tt(e)?yr.push(...e):fn&&e.id===-1?fn.splice(ur+1,0,e):e.flags&1||(yr.push(e),e.flags|=1),mf()}function Yc(e,t,n=Me+1){for(;n<fe.length;n++){const r=fe[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;fe.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function _f(e){if(yr.length){const t=[...new Set(yr)].sort((n,r)=>Es(n)-Es(r));if(yr.length=0,fn){fn.push(...t);return}for(fn=t,ur=0;ur<fn.length;ur++){const n=fn[ur];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}fn=null,ur=0}}const Es=e=>e.id==null?e.flags&2?-1:1/0:e.id;function yf(e){try{for(Me=0;Me<fe.length;Me++){const t=fe[Me];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ms(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Me<fe.length;Me++){const t=fe[Me];t&&(t.flags&=-2)}Me=-1,fe.length=0,_f(),Di=null,(fe.length||yr.length)&&yf()}}let ve=null,vf=null;function ki(e){const t=ve;return ve=e,vf=e&&e.type.__scopeId||null,t}function Ef(e,t=ve,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&cu(-1);const i=ki(t);let a;try{a=e(...s)}finally{ki(i),r._d&&cu(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function Qo(e,t){if(ve===null)return e;const n=fo(ve),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,a,l,u=At]=t[s];i&&(lt(i)&&(i={mounted:i,updated:i}),i.deep&&Ze(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:l,modifiers:u}))}return e}function Un(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let a=0;a<s.length;a++){const l=s[a];i&&(l.oldValue=i[a].value);let u=l.dir[r];u&&(tn(),De(u,n,8,[e.el,l,e,t]),en())}}const Tf=Symbol("_vte"),wf=e=>e.__isTeleport,cs=e=>e&&(e.disabled||e.disabled===""),Jc=e=>e&&(e.defer||e.defer===""),Xc=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Zc=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Ea=(e,t)=>{const n=e&&e.to;return Nt(n)?t?t(n):null:n},If={name:"Teleport",__isTeleport:!0,process(e,t,n,r,s,i,a,l,u,f){const{mc:d,pc:p,pbc:y,o:{insert:C,querySelector:P,createText:V,createComment:N}}=f,K=cs(t.props);let{shapeFlag:G,children:W,dynamicChildren:q}=t;if(e==null){const at=t.el=V(""),st=t.anchor=V("");C(at,n,r),C(st,n,r);const A=(m,_)=>{G&16&&(s&&s.isCE&&(s.ce._teleportTarget=m),d(W,m,_,s,i,a,l,u))},v=()=>{const m=t.target=Ea(t.props,P),_=Af(m,t,V,C);m&&(a!=="svg"&&Xc(m)?a="svg":a!=="mathml"&&Zc(m)&&(a="mathml"),K||(A(m,_),yi(t,!1)))};K&&(A(n,st),yi(t,!0)),Jc(t.props)?he(()=>{v(),t.el.__isMounted=!0},i):v()}else{if(Jc(t.props)&&!e.el.__isMounted){he(()=>{If.process(e,t,n,r,s,i,a,l,u,f),delete e.el.__isMounted},i);return}t.el=e.el,t.targetStart=e.targetStart;const at=t.anchor=e.anchor,st=t.target=e.target,A=t.targetAnchor=e.targetAnchor,v=cs(e.props),m=v?n:st,_=v?at:A;if(a==="svg"||Xc(st)?a="svg":(a==="mathml"||Zc(st))&&(a="mathml"),q?(y(e.dynamicChildren,q,m,s,i,a,l),ml(e,t,!0)):u||p(e,t,m,_,s,i,a,l,!1),K)v?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):li(t,n,at,f,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const w=t.target=Ea(t.props,P);w&&li(t,w,null,f,0)}else v&&li(t,st,A,f,1);yi(t,K)}},remove(e,t,n,{um:r,o:{remove:s}},i){const{shapeFlag:a,children:l,anchor:u,targetStart:f,targetAnchor:d,target:p,props:y}=e;if(p&&(s(f),s(d)),i&&s(u),a&16){const C=i||!cs(y);for(let P=0;P<l.length;P++){const V=l[P];r(V,t,n,C,!!V.dynamicChildren)}}},move:li,hydrate:hm};function li(e,t,n,{o:{insert:r},m:s},i=2){i===0&&r(e.targetAnchor,t,n);const{el:a,anchor:l,shapeFlag:u,children:f,props:d}=e,p=i===2;if(p&&r(a,t,n),(!p||cs(d))&&u&16)for(let y=0;y<f.length;y++)s(f[y],t,n,2);p&&r(l,t,n)}function hm(e,t,n,r,s,i,{o:{nextSibling:a,parentNode:l,querySelector:u,insert:f,createText:d}},p){const y=t.target=Ea(t.props,u);if(y){const C=cs(t.props),P=y._lpa||y.firstChild;if(t.shapeFlag&16)if(C)t.anchor=p(a(e),t,l(e),n,r,s,i),t.targetStart=P,t.targetAnchor=P&&a(P);else{t.anchor=a(e);let V=P;for(;V;){if(V&&V.nodeType===8){if(V.data==="teleport start anchor")t.targetStart=V;else if(V.data==="teleport anchor"){t.targetAnchor=V,y._lpa=t.targetAnchor&&a(t.targetAnchor);break}}V=a(V)}t.targetAnchor||Af(y,t,d,f),p(P&&a(P),t,y,n,r,s,i)}yi(t,C)}return t.anchor&&a(t.anchor)}const fm=If;function yi(e,t){const n=e.ctx;if(n&&n.ut){let r,s;for(t?(r=e.el,s=e.anchor):(r=e.targetStart,s=e.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function Af(e,t,n,r){const s=t.targetStart=n(""),i=t.targetAnchor=n("");return s[Tf]=i,e&&(r(s,e),r(i,e)),i}const dn=Symbol("_leaveCb"),ci=Symbol("_enterCb");function dm(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return fl(()=>{e.isMounted=!0}),kf(()=>{e.isUnmounting=!0}),e}const Ie=[Function,Array],bf={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ie,onEnter:Ie,onAfterEnter:Ie,onEnterCancelled:Ie,onBeforeLeave:Ie,onLeave:Ie,onAfterLeave:Ie,onLeaveCancelled:Ie,onBeforeAppear:Ie,onAppear:Ie,onAfterAppear:Ie,onAppearCancelled:Ie},Cf=e=>{const t=e.subTree;return t.component?Cf(t.component):t},pm={name:"BaseTransition",props:bf,setup(e,{slots:t}){const n=l_(),r=dm();return()=>{const s=t.default&&Pf(t.default(),!0);if(!s||!s.length)return;const i=Rf(s),a=_t(e),{mode:l}=a;if(r.isLeaving)return Yo(i);const u=tu(i);if(!u)return Yo(i);let f=Ta(u,a,r,n,p=>f=p);u.type!==de&&Ts(u,f);let d=n.subTree&&tu(n.subTree);if(d&&d.type!==de&&!Kn(u,d)&&Cf(n).type!==de){let p=Ta(d,a,r,n);if(Ts(d,p),l==="out-in"&&u.type!==de)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,d=void 0},Yo(i);l==="in-out"&&u.type!==de?p.delayLeave=(y,C,P)=>{const V=Sf(r,d);V[String(d.key)]=d,y[dn]=()=>{C(),y[dn]=void 0,delete f.delayedLeave,d=void 0},f.delayedLeave=()=>{P(),delete f.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return i}}};function Rf(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==de){t=n;break}}return t}const gm=pm;function Sf(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function Ta(e,t,n,r,s){const{appear:i,mode:a,persisted:l=!1,onBeforeEnter:u,onEnter:f,onAfterEnter:d,onEnterCancelled:p,onBeforeLeave:y,onLeave:C,onAfterLeave:P,onLeaveCancelled:V,onBeforeAppear:N,onAppear:K,onAfterAppear:G,onAppearCancelled:W}=t,q=String(e.key),at=Sf(n,e),st=(m,_)=>{m&&De(m,r,9,_)},A=(m,_)=>{const w=_[1];st(m,_),tt(m)?m.every(E=>E.length<=1)&&w():m.length<=1&&w()},v={mode:a,persisted:l,beforeEnter(m){let _=u;if(!n.isMounted)if(i)_=N||u;else return;m[dn]&&m[dn](!0);const w=at[q];w&&Kn(e,w)&&w.el[dn]&&w.el[dn](),st(_,[m])},enter(m){let _=f,w=d,E=p;if(!n.isMounted)if(i)_=K||f,w=G||d,E=W||p;else return;let T=!1;const Tt=m[ci]=le=>{T||(T=!0,le?st(E,[m]):st(w,[m]),v.delayedLeave&&v.delayedLeave(),m[ci]=void 0)};_?A(_,[m,Tt]):Tt()},leave(m,_){const w=String(e.key);if(m[ci]&&m[ci](!0),n.isUnmounting)return _();st(y,[m]);let E=!1;const T=m[dn]=Tt=>{E||(E=!0,_(),Tt?st(V,[m]):st(P,[m]),m[dn]=void 0,at[w]===e&&delete at[w])};at[w]=e,C?A(C,[m,T]):T()},clone(m){const _=Ta(m,t,n,r,s);return s&&s(_),_}};return v}function Yo(e){if(lo(e))return e=bn(e),e.children=null,e}function tu(e){if(!lo(e))return wf(e.type)&&e.children?Rf(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&lt(n.default))return n.default()}}function Ts(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Ts(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Pf(e,t=!1,n){let r=[],s=0;for(let i=0;i<e.length;i++){let a=e[i];const l=n==null?a.key:String(n)+String(a.key!=null?a.key:i);a.type===me?(a.patchFlag&128&&s++,r=r.concat(Pf(a.children,t,l))):(t||a.type!==de)&&r.push(l!=null?bn(a,{key:l}):a)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function xf(e,t){return lt(e)?Ht({name:e.name},t,{setup:e}):e}function Vf(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Ni(e,t,n,r,s=!1){if(tt(e)){e.forEach((P,V)=>Ni(P,t&&(tt(t)?t[V]:t),n,r,s));return}if(us(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Ni(e,t,n,r.component.subTree);return}const i=r.shapeFlag&4?fo(r.component):r.el,a=s?null:i,{i:l,r:u}=e,f=t&&t.r,d=l.refs===At?l.refs={}:l.refs,p=l.setupState,y=_t(p),C=p===At?()=>!1:P=>vt(y,P);if(f!=null&&f!==u&&(Nt(f)?(d[f]=null,C(f)&&(p[f]=null)):ae(f)&&(f.value=null)),lt(u))Ms(u,l,12,[a,d]);else{const P=Nt(u),V=ae(u);if(P||V){const N=()=>{if(e.f){const K=P?C(u)?p[u]:d[u]:u.value;s?tt(K)&&tl(K,i):tt(K)?K.includes(i)||K.push(i):P?(d[u]=[i],C(u)&&(p[u]=d[u])):(u.value=[i],e.k&&(d[e.k]=u.value))}else P?(d[u]=a,C(u)&&(p[u]=a)):V&&(u.value=a,e.k&&(d[e.k]=a))};a?(N.id=-1,he(N,n)):N()}}}so().requestIdleCallback;so().cancelIdleCallback;const us=e=>!!e.type.__asyncLoader,lo=e=>e.type.__isKeepAlive;function mm(e,t){Df(e,"a",t)}function _m(e,t){Df(e,"da",t)}function Df(e,t,n=oe){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(co(t,r,n),n){let s=n.parent;for(;s&&s.parent;)lo(s.parent.vnode)&&ym(r,t,n,s),s=s.parent}}function ym(e,t,n,r){const s=co(t,e,r,!0);dl(()=>{tl(r[t],s)},n)}function co(e,t,n=oe,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{tn();const l=Ls(n),u=De(t,n,e,a);return l(),en(),u});return r?s.unshift(i):s.push(i),i}}const on=e=>(t,n=oe)=>{(!Is||e==="sp")&&co(e,(...r)=>t(...r),n)},vm=on("bm"),fl=on("m"),Em=on("bu"),Tm=on("u"),kf=on("bum"),dl=on("um"),wm=on("sp"),Im=on("rtg"),Am=on("rtc");function Nf(e,t=oe){co("ec",e,t)}const bm=Symbol.for("v-ndc");function wa(e,t,n,r){let s;const i=n,a=tt(e);if(a||Nt(e)){const l=a&&_r(e);let u=!1,f=!1;l&&(u=!Ce(e),f=An(e),e=oo(e)),s=new Array(e.length);for(let d=0,p=e.length;d<p;d++)s[d]=t(u?f?xi(Qt(e[d])):Qt(e[d]):e[d],d,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let l=0;l<e;l++)s[l]=t(l+1,l,void 0,i)}else if(bt(e))if(e[Symbol.iterator])s=Array.from(e,(l,u)=>t(l,u,void 0,i));else{const l=Object.keys(e);s=new Array(l.length);for(let u=0,f=l.length;u<f;u++){const d=l[u];s[u]=t(e[d],d,u,i)}}else s=[];return s}const Ia=e=>e?td(e)?fo(e):Ia(e.parent):null,hs=Ht(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ia(e.parent),$root:e=>Ia(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Mf(e),$forceUpdate:e=>e.f||(e.f=()=>{hl(e.update)}),$nextTick:e=>e.n||(e.n=lm.bind(e.proxy)),$watch:e=>Gm.bind(e)}),Jo=(e,t)=>e!==At&&!e.__isScriptSetup&&vt(e,t),Cm={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:l,appContext:u}=e;let f;if(t[0]!=="$"){const C=a[t];if(C!==void 0)switch(C){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(Jo(r,t))return a[t]=1,r[t];if(s!==At&&vt(s,t))return a[t]=2,s[t];if((f=e.propsOptions[0])&&vt(f,t))return a[t]=3,i[t];if(n!==At&&vt(n,t))return a[t]=4,n[t];Aa&&(a[t]=0)}}const d=hs[t];let p,y;if(d)return t==="$attrs"&&se(e.attrs,"get",""),d(e);if((p=l.__cssModules)&&(p=p[t]))return p;if(n!==At&&vt(n,t))return a[t]=4,n[t];if(y=u.config.globalProperties,vt(y,t))return y[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Jo(s,t)?(s[t]=n,!0):r!==At&&vt(r,t)?(r[t]=n,!0):vt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},a){let l;return!!n[a]||e!==At&&vt(e,a)||Jo(t,a)||(l=i[0])&&vt(l,a)||vt(r,a)||vt(hs,a)||vt(s.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:vt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function eu(e){return tt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Aa=!0;function Rm(e){const t=Mf(e),n=e.proxy,r=e.ctx;Aa=!1,t.beforeCreate&&nu(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:l,provide:u,inject:f,created:d,beforeMount:p,mounted:y,beforeUpdate:C,updated:P,activated:V,deactivated:N,beforeDestroy:K,beforeUnmount:G,destroyed:W,unmounted:q,render:at,renderTracked:st,renderTriggered:A,errorCaptured:v,serverPrefetch:m,expose:_,inheritAttrs:w,components:E,directives:T,filters:Tt}=t;if(f&&Sm(f,r,null),a)for(const wt in a){const gt=a[wt];lt(gt)&&(r[wt]=gt.bind(n))}if(s){const wt=s.call(n,n);bt(wt)&&(e.data=ll(wt))}if(Aa=!0,i)for(const wt in i){const gt=i[wt],Se=lt(gt)?gt.bind(n,n):lt(gt.get)?gt.get.bind(n,n):Ue,Dn=!lt(gt)&&lt(gt.set)?gt.set.bind(n):Ue,ze=wi({get:Se,set:Dn});Object.defineProperty(r,wt,{enumerable:!0,configurable:!0,get:()=>ze.value,set:Ut=>ze.value=Ut})}if(l)for(const wt in l)Of(l[wt],r,n,wt);if(u){const wt=lt(u)?u.call(n):u;Reflect.ownKeys(wt).forEach(gt=>{Nm(gt,wt[gt])})}d&&nu(d,e,"c");function Mt(wt,gt){tt(gt)?gt.forEach(Se=>wt(Se.bind(n))):gt&&wt(gt.bind(n))}if(Mt(vm,p),Mt(fl,y),Mt(Em,C),Mt(Tm,P),Mt(mm,V),Mt(_m,N),Mt(Nf,v),Mt(Am,st),Mt(Im,A),Mt(kf,G),Mt(dl,q),Mt(wm,m),tt(_))if(_.length){const wt=e.exposed||(e.exposed={});_.forEach(gt=>{Object.defineProperty(wt,gt,{get:()=>n[gt],set:Se=>n[gt]=Se})})}else e.exposed||(e.exposed={});at&&e.render===Ue&&(e.render=at),w!=null&&(e.inheritAttrs=w),E&&(e.components=E),T&&(e.directives=T),m&&Vf(e)}function Sm(e,t,n=Ue){tt(e)&&(e=ba(e));for(const r in e){const s=e[r];let i;bt(s)?"default"in s?i=vi(s.from||r,s.default,!0):i=vi(s.from||r):i=vi(s),ae(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[r]=i}}function nu(e,t,n){De(tt(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Of(e,t,n,r){let s=r.includes(".")?Wf(n,r):()=>n[r];if(Nt(e)){const i=t[e];lt(i)&&Ei(s,i)}else if(lt(e))Ei(s,e.bind(n));else if(bt(e))if(tt(e))e.forEach(i=>Of(i,t,n,r));else{const i=lt(e.handler)?e.handler.bind(n):t[e.handler];lt(i)&&Ei(s,i,e)}}function Mf(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,l=i.get(t);let u;return l?u=l:!s.length&&!n&&!r?u=t:(u={},s.length&&s.forEach(f=>Oi(u,f,a,!0)),Oi(u,t,a)),bt(t)&&i.set(t,u),u}function Oi(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&Oi(e,i,n,!0),s&&s.forEach(a=>Oi(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const l=Pm[a]||n&&n[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const Pm={data:ru,props:su,emits:su,methods:ns,computed:ns,beforeCreate:ue,created:ue,beforeMount:ue,mounted:ue,beforeUpdate:ue,updated:ue,beforeDestroy:ue,beforeUnmount:ue,destroyed:ue,unmounted:ue,activated:ue,deactivated:ue,errorCaptured:ue,serverPrefetch:ue,components:ns,directives:ns,watch:Vm,provide:ru,inject:xm};function ru(e,t){return t?e?function(){return Ht(lt(e)?e.call(this,this):e,lt(t)?t.call(this,this):t)}:t:e}function xm(e,t){return ns(ba(e),ba(t))}function ba(e){if(tt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ue(e,t){return e?[...new Set([].concat(e,t))]:t}function ns(e,t){return e?Ht(Object.create(null),e,t):t}function su(e,t){return e?tt(e)&&tt(t)?[...new Set([...e,...t])]:Ht(Object.create(null),eu(e),eu(t??{})):t}function Vm(e,t){if(!e)return t;if(!t)return e;const n=Ht(Object.create(null),e);for(const r in t)n[r]=ue(e[r],t[r]);return n}function Lf(){return{app:null,config:{isNativeTag:vg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Dm=0;function km(e,t){return function(r,s=null){lt(r)||(r=Ht({},r)),s!=null&&!bt(s)&&(s=null);const i=Lf(),a=new WeakSet,l=[];let u=!1;const f=i.app={_uid:Dm++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:g_,get config(){return i.config},set config(d){},use(d,...p){return a.has(d)||(d&&lt(d.install)?(a.add(d),d.install(f,...p)):lt(d)&&(a.add(d),d(f,...p))),f},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),f},component(d,p){return p?(i.components[d]=p,f):i.components[d]},directive(d,p){return p?(i.directives[d]=p,f):i.directives[d]},mount(d,p,y){if(!u){const C=f._ceVNode||xt(r,s);return C.appContext=i,y===!0?y="svg":y===!1&&(y=void 0),e(C,d,y),u=!0,f._container=d,d.__vue_app__=f,fo(C.component)}},onUnmount(d){l.push(d)},unmount(){u&&(De(l,f._instance,16),e(null,f._container),delete f._container.__vue_app__)},provide(d,p){return i.provides[d]=p,f},runWithContext(d){const p=vr;vr=f;try{return d()}finally{vr=p}}};return f}}let vr=null;function Nm(e,t){if(oe){let n=oe.provides;const r=oe.parent&&oe.parent.provides;r===n&&(n=oe.provides=Object.create(r)),n[e]=t}}function vi(e,t,n=!1){const r=oe||ve;if(r||vr){const s=vr?vr._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&lt(t)?t.call(r&&r.proxy):t}}const Ff={},Uf=()=>Object.create(Ff),Bf=e=>Object.getPrototypeOf(e)===Ff;function Om(e,t,n,r=!1){const s={},i=Uf();e.propsDefaults=Object.create(null),$f(e,t,s,i);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=r?s:Xg(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function Mm(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=e,l=_t(s),[u]=e.propsOptions;let f=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let p=0;p<d.length;p++){let y=d[p];if(uo(e.emitsOptions,y))continue;const C=t[y];if(u)if(vt(i,y))C!==i[y]&&(i[y]=C,f=!0);else{const P=In(y);s[P]=Ca(u,l,P,C,e,!1)}else C!==i[y]&&(i[y]=C,f=!0)}}}else{$f(e,t,s,i)&&(f=!0);let d;for(const p in l)(!t||!vt(t,p)&&((d=Zn(p))===p||!vt(t,d)))&&(u?n&&(n[p]!==void 0||n[d]!==void 0)&&(s[p]=Ca(u,l,p,void 0,e,!0)):delete s[p]);if(i!==l)for(const p in i)(!t||!vt(t,p))&&(delete i[p],f=!0)}f&&Xe(e.attrs,"set","")}function $f(e,t,n,r){const[s,i]=e.propsOptions;let a=!1,l;if(t)for(let u in t){if(os(u))continue;const f=t[u];let d;s&&vt(s,d=In(u))?!i||!i.includes(d)?n[d]=f:(l||(l={}))[d]=f:uo(e.emitsOptions,u)||(!(u in r)||f!==r[u])&&(r[u]=f,a=!0)}if(i){const u=_t(n),f=l||At;for(let d=0;d<i.length;d++){const p=i[d];n[p]=Ca(s,u,p,f[p],e,!vt(f,p))}}return a}function Ca(e,t,n,r,s,i){const a=e[n];if(a!=null){const l=vt(a,"default");if(l&&r===void 0){const u=a.default;if(a.type!==Function&&!a.skipFactory&&lt(u)){const{propsDefaults:f}=s;if(n in f)r=f[n];else{const d=Ls(s);r=f[n]=u.call(null,t),d()}}else r=u;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!l?r=!1:a[1]&&(r===""||r===Zn(n))&&(r=!0))}return r}const Lm=new WeakMap;function jf(e,t,n=!1){const r=n?Lm:t.propsCache,s=r.get(e);if(s)return s;const i=e.props,a={},l=[];let u=!1;if(!lt(e)){const d=p=>{u=!0;const[y,C]=jf(p,t,!0);Ht(a,y),C&&l.push(...C)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!i&&!u)return bt(e)&&r.set(e,gr),gr;if(tt(i))for(let d=0;d<i.length;d++){const p=In(i[d]);iu(p)&&(a[p]=At)}else if(i)for(const d in i){const p=In(d);if(iu(p)){const y=i[d],C=a[p]=tt(y)||lt(y)?{type:y}:Ht({},y),P=C.type;let V=!1,N=!0;if(tt(P))for(let K=0;K<P.length;++K){const G=P[K],W=lt(G)&&G.name;if(W==="Boolean"){V=!0;break}else W==="String"&&(N=!1)}else V=lt(P)&&P.name==="Boolean";C[0]=V,C[1]=N,(V||vt(C,"default"))&&l.push(p)}}const f=[a,l];return bt(e)&&r.set(e,f),f}function iu(e){return e[0]!=="$"&&!os(e)}const pl=e=>e[0]==="_"||e==="$stable",gl=e=>tt(e)?e.map(Fe):[Fe(e)],Fm=(e,t,n)=>{if(t._n)return t;const r=Ef((...s)=>gl(t(...s)),n);return r._c=!1,r},qf=(e,t,n)=>{const r=e._ctx;for(const s in e){if(pl(s))continue;const i=e[s];if(lt(i))t[s]=Fm(s,i,r);else if(i!=null){const a=gl(i);t[s]=()=>a}}},Hf=(e,t)=>{const n=gl(t);e.slots.default=()=>n},zf=(e,t,n)=>{for(const r in t)(n||!pl(r))&&(e[r]=t[r])},Um=(e,t,n)=>{const r=e.slots=Uf();if(e.vnode.shapeFlag&32){const s=t._;s?(zf(r,t,n),n&&Gh(r,"_",s,!0)):qf(t,r)}else t&&Hf(e,t)},Bm=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,a=At;if(r.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:zf(s,t,n):(i=!t.$stable,qf(t,s)),a=t}else t&&(Hf(e,t),a={default:1});if(i)for(const l in s)!pl(l)&&a[l]==null&&delete s[l]},he=t_;function $m(e){return jm(e)}function jm(e,t){const n=so();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:l,createComment:u,setText:f,setElementText:d,parentNode:p,nextSibling:y,setScopeId:C=Ue,insertStaticContent:P}=e,V=(I,b,x,L=null,O=null,M=null,z=void 0,B=null,U=!!b.dynamicChildren)=>{if(I===b)return;I&&!Kn(I,b)&&(L=Ke(I),Ut(I,O,M,!0),I=null),b.patchFlag===-2&&(U=!1,b.dynamicChildren=null);const{type:F,ref:X,shapeFlag:H}=b;switch(F){case ho:N(I,b,x,L);break;case de:K(I,b,x,L);break;case Zo:I==null&&G(b,x,L,z);break;case me:E(I,b,x,L,O,M,z,B,U);break;default:H&1?at(I,b,x,L,O,M,z,B,U):H&6?T(I,b,x,L,O,M,z,B,U):(H&64||H&128)&&F.process(I,b,x,L,O,M,z,B,U,Ne)}X!=null&&O&&Ni(X,I&&I.ref,M,b||I,!b)},N=(I,b,x,L)=>{if(I==null)r(b.el=l(b.children),x,L);else{const O=b.el=I.el;b.children!==I.children&&f(O,b.children)}},K=(I,b,x,L)=>{I==null?r(b.el=u(b.children||""),x,L):b.el=I.el},G=(I,b,x,L)=>{[I.el,I.anchor]=P(I.children,b,x,L,I.el,I.anchor)},W=({el:I,anchor:b},x,L)=>{let O;for(;I&&I!==b;)O=y(I),r(I,x,L),I=O;r(b,x,L)},q=({el:I,anchor:b})=>{let x;for(;I&&I!==b;)x=y(I),s(I),I=x;s(b)},at=(I,b,x,L,O,M,z,B,U)=>{b.type==="svg"?z="svg":b.type==="math"&&(z="mathml"),I==null?st(b,x,L,O,M,z,B,U):m(I,b,O,M,z,B,U)},st=(I,b,x,L,O,M,z,B)=>{let U,F;const{props:X,shapeFlag:H,transition:J,dirs:rt}=I;if(U=I.el=a(I.type,M,X&&X.is,X),H&8?d(U,I.children):H&16&&v(I.children,U,null,L,O,Xo(I,M),z,B),rt&&Un(I,null,L,"created"),A(U,I,I.scopeId,z,L),X){for(const ct in X)ct!=="value"&&!os(ct)&&i(U,ct,null,X[ct],M,L);"value"in X&&i(U,"value",null,X.value,M),(F=X.onVnodeBeforeMount)&&Oe(F,L,I)}rt&&Un(I,null,L,"beforeMount");const et=qm(O,J);et&&J.beforeEnter(U),r(U,b,x),((F=X&&X.onVnodeMounted)||et||rt)&&he(()=>{F&&Oe(F,L,I),et&&J.enter(U),rt&&Un(I,null,L,"mounted")},O)},A=(I,b,x,L,O)=>{if(x&&C(I,x),L)for(let M=0;M<L.length;M++)C(I,L[M]);if(O){let M=O.subTree;if(b===M||Yf(M.type)&&(M.ssContent===b||M.ssFallback===b)){const z=O.vnode;A(I,z,z.scopeId,z.slotScopeIds,O.parent)}}},v=(I,b,x,L,O,M,z,B,U=0)=>{for(let F=U;F<I.length;F++){const X=I[F]=B?pn(I[F]):Fe(I[F]);V(null,X,b,x,L,O,M,z,B)}},m=(I,b,x,L,O,M,z)=>{const B=b.el=I.el;let{patchFlag:U,dynamicChildren:F,dirs:X}=b;U|=I.patchFlag&16;const H=I.props||At,J=b.props||At;let rt;if(x&&Bn(x,!1),(rt=J.onVnodeBeforeUpdate)&&Oe(rt,x,b,I),X&&Un(b,I,x,"beforeUpdate"),x&&Bn(x,!0),(H.innerHTML&&J.innerHTML==null||H.textContent&&J.textContent==null)&&d(B,""),F?_(I.dynamicChildren,F,B,x,L,Xo(b,O),M):z||gt(I,b,B,null,x,L,Xo(b,O),M,!1),U>0){if(U&16)w(B,H,J,x,O);else if(U&2&&H.class!==J.class&&i(B,"class",null,J.class,O),U&4&&i(B,"style",H.style,J.style,O),U&8){const et=b.dynamicProps;for(let ct=0;ct<et.length;ct++){const ft=et[ct],Xt=H[ft],zt=J[ft];(zt!==Xt||ft==="value")&&i(B,ft,Xt,zt,O,x)}}U&1&&I.children!==b.children&&d(B,b.children)}else!z&&F==null&&w(B,H,J,x,O);((rt=J.onVnodeUpdated)||X)&&he(()=>{rt&&Oe(rt,x,b,I),X&&Un(b,I,x,"updated")},L)},_=(I,b,x,L,O,M,z)=>{for(let B=0;B<b.length;B++){const U=I[B],F=b[B],X=U.el&&(U.type===me||!Kn(U,F)||U.shapeFlag&70)?p(U.el):x;V(U,F,X,null,L,O,M,z,!0)}},w=(I,b,x,L,O)=>{if(b!==x){if(b!==At)for(const M in b)!os(M)&&!(M in x)&&i(I,M,b[M],null,O,L);for(const M in x){if(os(M))continue;const z=x[M],B=b[M];z!==B&&M!=="value"&&i(I,M,B,z,O,L)}"value"in x&&i(I,"value",b.value,x.value,O)}},E=(I,b,x,L,O,M,z,B,U)=>{const F=b.el=I?I.el:l(""),X=b.anchor=I?I.anchor:l("");let{patchFlag:H,dynamicChildren:J,slotScopeIds:rt}=b;rt&&(B=B?B.concat(rt):rt),I==null?(r(F,x,L),r(X,x,L),v(b.children||[],x,X,O,M,z,B,U)):H>0&&H&64&&J&&I.dynamicChildren?(_(I.dynamicChildren,J,x,O,M,z,B),(b.key!=null||O&&b===O.subTree)&&ml(I,b,!0)):gt(I,b,x,X,O,M,z,B,U)},T=(I,b,x,L,O,M,z,B,U)=>{b.slotScopeIds=B,I==null?b.shapeFlag&512?O.ctx.activate(b,x,L,z,U):Tt(b,x,L,O,M,z,U):le(I,b,U)},Tt=(I,b,x,L,O,M,z)=>{const B=I.component=a_(I,L,O);if(lo(I)&&(B.ctx.renderer=Ne),c_(B,!1,z),B.asyncDep){if(O&&O.registerDep(B,Mt,z),!I.el){const U=B.subTree=xt(de);K(null,U,b,x)}}else Mt(B,I,b,x,O,M,z)},le=(I,b,x)=>{const L=b.component=I.component;if(Xm(I,b,x))if(L.asyncDep&&!L.asyncResolved){wt(L,b,x);return}else L.next=b,L.update();else b.el=I.el,L.vnode=b},Mt=(I,b,x,L,O,M,z)=>{const B=()=>{if(I.isMounted){let{next:H,bu:J,u:rt,parent:et,vnode:ct}=I;{const Zt=Kf(I);if(Zt){H&&(H.el=ct.el,wt(I,H,z)),Zt.asyncDep.then(()=>{I.isUnmounted||B()});return}}let ft=H,Xt;Bn(I,!1),H?(H.el=ct.el,wt(I,H,z)):H=ct,J&&_i(J),(Xt=H.props&&H.props.onVnodeBeforeUpdate)&&Oe(Xt,et,H,ct),Bn(I,!0);const zt=au(I),Te=I.subTree;I.subTree=zt,V(Te,zt,p(Te.el),Ke(Te),I,O,M),H.el=zt.el,ft===null&&Zm(I,zt.el),rt&&he(rt,O),(Xt=H.props&&H.props.onVnodeUpdated)&&he(()=>Oe(Xt,et,H,ct),O)}else{let H;const{el:J,props:rt}=b,{bm:et,m:ct,parent:ft,root:Xt,type:zt}=I,Te=us(b);Bn(I,!1),et&&_i(et),!Te&&(H=rt&&rt.onVnodeBeforeMount)&&Oe(H,ft,b),Bn(I,!0);{Xt.ce&&Xt.ce._injectChildStyle(zt);const Zt=I.subTree=au(I);V(null,Zt,x,L,I,O,M),b.el=Zt.el}if(ct&&he(ct,O),!Te&&(H=rt&&rt.onVnodeMounted)){const Zt=b;he(()=>Oe(H,ft,Zt),O)}(b.shapeFlag&256||ft&&us(ft.vnode)&&ft.vnode.shapeFlag&256)&&I.a&&he(I.a,O),I.isMounted=!0,b=x=L=null}};I.scope.on();const U=I.effect=new Xh(B);I.scope.off();const F=I.update=U.run.bind(U),X=I.job=U.runIfDirty.bind(U);X.i=I,X.id=I.uid,U.scheduler=()=>hl(X),Bn(I,!0),F()},wt=(I,b,x)=>{b.component=I;const L=I.vnode.props;I.vnode=b,I.next=null,Mm(I,b.props,L,x),Bm(I,b.children,x),tn(),Yc(I),en()},gt=(I,b,x,L,O,M,z,B,U=!1)=>{const F=I&&I.children,X=I?I.shapeFlag:0,H=b.children,{patchFlag:J,shapeFlag:rt}=b;if(J>0){if(J&128){Dn(F,H,x,L,O,M,z,B,U);return}else if(J&256){Se(F,H,x,L,O,M,z,B,U);return}}rt&8?(X&16&&Nn(F,O,M),H!==F&&d(x,H)):X&16?rt&16?Dn(F,H,x,L,O,M,z,B,U):Nn(F,O,M,!0):(X&8&&d(x,""),rt&16&&v(H,x,L,O,M,z,B,U))},Se=(I,b,x,L,O,M,z,B,U)=>{I=I||gr,b=b||gr;const F=I.length,X=b.length,H=Math.min(F,X);let J;for(J=0;J<H;J++){const rt=b[J]=U?pn(b[J]):Fe(b[J]);V(I[J],rt,x,null,O,M,z,B,U)}F>X?Nn(I,O,M,!0,!1,H):v(b,x,L,O,M,z,B,U,H)},Dn=(I,b,x,L,O,M,z,B,U)=>{let F=0;const X=b.length;let H=I.length-1,J=X-1;for(;F<=H&&F<=J;){const rt=I[F],et=b[F]=U?pn(b[F]):Fe(b[F]);if(Kn(rt,et))V(rt,et,x,null,O,M,z,B,U);else break;F++}for(;F<=H&&F<=J;){const rt=I[H],et=b[J]=U?pn(b[J]):Fe(b[J]);if(Kn(rt,et))V(rt,et,x,null,O,M,z,B,U);else break;H--,J--}if(F>H){if(F<=J){const rt=J+1,et=rt<X?b[rt].el:L;for(;F<=J;)V(null,b[F]=U?pn(b[F]):Fe(b[F]),x,et,O,M,z,B,U),F++}}else if(F>J)for(;F<=H;)Ut(I[F],O,M,!0),F++;else{const rt=F,et=F,ct=new Map;for(F=et;F<=J;F++){const Kt=b[F]=U?pn(b[F]):Fe(b[F]);Kt.key!=null&&ct.set(Kt.key,F)}let ft,Xt=0;const zt=J-et+1;let Te=!1,Zt=0;const an=new Array(zt);for(F=0;F<zt;F++)an[F]=0;for(F=rt;F<=H;F++){const Kt=I[F];if(Xt>=zt){Ut(Kt,O,M,!0);continue}let we;if(Kt.key!=null)we=ct.get(Kt.key);else for(ft=et;ft<=J;ft++)if(an[ft-et]===0&&Kn(Kt,b[ft])){we=ft;break}we===void 0?Ut(Kt,O,M,!0):(an[we-et]=F+1,we>=Zt?Zt=we:Te=!0,V(Kt,b[we],x,null,O,M,z,B,U),Xt++)}const Ur=Te?Hm(an):gr;for(ft=Ur.length-1,F=zt-1;F>=0;F--){const Kt=et+F,we=b[Kt],qs=Kt+1<X?b[Kt+1].el:L;an[F]===0?V(null,we,x,qs,O,M,z,B,U):Te&&(ft<0||F!==Ur[ft]?ze(we,x,qs,2):ft--)}}},ze=(I,b,x,L,O=null)=>{const{el:M,type:z,transition:B,children:U,shapeFlag:F}=I;if(F&6){ze(I.component.subTree,b,x,L);return}if(F&128){I.suspense.move(b,x,L);return}if(F&64){z.move(I,b,x,Ne);return}if(z===me){r(M,b,x);for(let H=0;H<U.length;H++)ze(U[H],b,x,L);r(I.anchor,b,x);return}if(z===Zo){W(I,b,x);return}if(L!==2&&F&1&&B)if(L===0)B.beforeEnter(M),r(M,b,x),he(()=>B.enter(M),O);else{const{leave:H,delayLeave:J,afterLeave:rt}=B,et=()=>{I.ctx.isUnmounted?s(M):r(M,b,x)},ct=()=>{H(M,()=>{et(),rt&&rt()})};J?J(M,et,ct):ct()}else r(M,b,x)},Ut=(I,b,x,L=!1,O=!1)=>{const{type:M,props:z,ref:B,children:U,dynamicChildren:F,shapeFlag:X,patchFlag:H,dirs:J,cacheIndex:rt}=I;if(H===-2&&(O=!1),B!=null&&(tn(),Ni(B,null,x,I,!0),en()),rt!=null&&(b.renderCache[rt]=void 0),X&256){b.ctx.deactivate(I);return}const et=X&1&&J,ct=!us(I);let ft;if(ct&&(ft=z&&z.onVnodeBeforeUnmount)&&Oe(ft,b,I),X&6)kn(I.component,x,L);else{if(X&128){I.suspense.unmount(x,L);return}et&&Un(I,null,b,"beforeUnmount"),X&64?I.type.remove(I,b,x,Ne,L):F&&!F.hasOnce&&(M!==me||H>0&&H&64)?Nn(F,b,x,!1,!0):(M===me&&H&384||!O&&X&16)&&Nn(U,b,x),L&&Bt(I)}(ct&&(ft=z&&z.onVnodeUnmounted)||et)&&he(()=>{ft&&Oe(ft,b,I),et&&Un(I,null,b,"unmounted")},x)},Bt=I=>{const{type:b,el:x,anchor:L,transition:O}=I;if(b===me){So(x,L);return}if(b===Zo){q(I);return}const M=()=>{s(x),O&&!O.persisted&&O.afterLeave&&O.afterLeave()};if(I.shapeFlag&1&&O&&!O.persisted){const{leave:z,delayLeave:B}=O,U=()=>z(x,M);B?B(I.el,M,U):U()}else M()},So=(I,b)=>{let x;for(;I!==b;)x=y(I),s(I),I=x;s(b)},kn=(I,b,x)=>{const{bum:L,scope:O,job:M,subTree:z,um:B,m:U,a:F,parent:X,slots:{__:H}}=I;ou(U),ou(F),L&&_i(L),X&&tt(H)&&H.forEach(J=>{X.renderCache[J]=void 0}),O.stop(),M&&(M.flags|=8,Ut(z,I,b,x)),B&&he(B,b),he(()=>{I.isUnmounted=!0},b),b&&b.pendingBranch&&!b.isUnmounted&&I.asyncDep&&!I.asyncResolved&&I.suspenseId===b.pendingId&&(b.deps--,b.deps===0&&b.resolve())},Nn=(I,b,x,L=!1,O=!1,M=0)=>{for(let z=M;z<I.length;z++)Ut(I[z],b,x,L,O)},Ke=I=>{if(I.shapeFlag&6)return Ke(I.component.subTree);if(I.shapeFlag&128)return I.suspense.next();const b=y(I.anchor||I.el),x=b&&b[Tf];return x?y(x):b};let Lr=!1;const js=(I,b,x)=>{I==null?b._vnode&&Ut(b._vnode,null,null,!0):V(b._vnode||null,I,b,null,null,null,x),b._vnode=I,Lr||(Lr=!0,Yc(),_f(),Lr=!1)},Ne={p:V,um:Ut,m:ze,r:Bt,mt:Tt,mc:v,pc:gt,pbc:_,n:Ke,o:e};return{render:js,hydrate:void 0,createApp:km(js)}}function Xo({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Bn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function qm(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ml(e,t,n=!1){const r=e.children,s=t.children;if(tt(r)&&tt(s))for(let i=0;i<r.length;i++){const a=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=pn(s[i]),l.el=a.el),!n&&l.patchFlag!==-2&&ml(a,l)),l.type===ho&&(l.el=a.el),l.type===de&&!l.el&&(l.el=a.el)}}function Hm(e){const t=e.slice(),n=[0];let r,s,i,a,l;const u=e.length;for(r=0;r<u;r++){const f=e[r];if(f!==0){if(s=n[n.length-1],e[s]<f){t[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,e[n[l]]<f?i=l+1:a=l;f<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function Kf(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Kf(t)}function ou(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const zm=Symbol.for("v-scx"),Km=()=>vi(zm);function Ei(e,t,n){return Gf(e,t,n)}function Gf(e,t,n=At){const{immediate:r,deep:s,flush:i,once:a}=n,l=Ht({},n),u=t&&r||!t&&i!=="post";let f;if(Is){if(i==="sync"){const C=Km();f=C.__watcherHandles||(C.__watcherHandles=[])}else if(!u){const C=()=>{};return C.stop=Ue,C.resume=Ue,C.pause=Ue,C}}const d=oe;l.call=(C,P,V)=>De(C,d,P,V);let p=!1;i==="post"?l.scheduler=C=>{he(C,d&&d.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(C,P)=>{P?C():hl(C)}),l.augmentJob=C=>{t&&(C.flags|=4),p&&(C.flags|=2,d&&(C.id=d.uid,C.i=d))};const y=om(e,t,l);return Is&&(f?f.push(y):u&&y()),y}function Gm(e,t,n){const r=this.proxy,s=Nt(e)?e.includes(".")?Wf(r,e):()=>r[e]:e.bind(r,r);let i;lt(t)?i=t:(i=t.handler,n=t);const a=Ls(this),l=Gf(s,i.bind(r),n);return a(),l}function Wf(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const Wm=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${In(t)}Modifiers`]||e[`${Zn(t)}Modifiers`];function Qm(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||At;let s=n;const i=t.startsWith("update:"),a=i&&Wm(r,t.slice(7));a&&(a.trim&&(s=n.map(d=>Nt(d)?d.trim():d)),a.number&&(s=n.map(ga)));let l,u=r[l=Ho(t)]||r[l=Ho(In(t))];!u&&i&&(u=r[l=Ho(Zn(t))]),u&&De(u,e,6,s);const f=r[l+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,De(f,e,6,s)}}function Qf(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let a={},l=!1;if(!lt(e)){const u=f=>{const d=Qf(f,t,!0);d&&(l=!0,Ht(a,d))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!i&&!l?(bt(e)&&r.set(e,null),null):(tt(i)?i.forEach(u=>a[u]=null):Ht(a,i),bt(e)&&r.set(e,a),a)}function uo(e,t){return!e||!eo(t)?!1:(t=t.slice(2).replace(/Once$/,""),vt(e,t[0].toLowerCase()+t.slice(1))||vt(e,Zn(t))||vt(e,t))}function au(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:l,emit:u,render:f,renderCache:d,props:p,data:y,setupState:C,ctx:P,inheritAttrs:V}=e,N=ki(e);let K,G;try{if(n.shapeFlag&4){const q=s||r,at=q;K=Fe(f.call(at,q,d,p,C,y,P)),G=l}else{const q=t;K=Fe(q.length>1?q(p,{attrs:l,slots:a,emit:u}):q(p,null)),G=t.props?l:Ym(l)}}catch(q){fs.length=0,ao(q,e,1),K=xt(de)}let W=K;if(G&&V!==!1){const q=Object.keys(G),{shapeFlag:at}=W;q.length&&at&7&&(i&&q.some(Za)&&(G=Jm(G,i)),W=bn(W,G,!1,!0))}return n.dirs&&(W=bn(W,null,!1,!0),W.dirs=W.dirs?W.dirs.concat(n.dirs):n.dirs),n.transition&&Ts(W,n.transition),K=W,ki(N),K}const Ym=e=>{let t;for(const n in e)(n==="class"||n==="style"||eo(n))&&((t||(t={}))[n]=e[n]);return t},Jm=(e,t)=>{const n={};for(const r in e)(!Za(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Xm(e,t,n){const{props:r,children:s,component:i}=e,{props:a,children:l,patchFlag:u}=t,f=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?lu(r,a,f):!!a;if(u&8){const d=t.dynamicProps;for(let p=0;p<d.length;p++){const y=d[p];if(a[y]!==r[y]&&!uo(f,y))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?lu(r,a,f):!0:!!a;return!1}function lu(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!uo(n,i))return!0}return!1}function Zm({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Yf=e=>e.__isSuspense;function t_(e,t){t&&t.pendingBranch?tt(e)?t.effects.push(...e):t.effects.push(e):um(e)}const me=Symbol.for("v-fgt"),ho=Symbol.for("v-txt"),de=Symbol.for("v-cmt"),Zo=Symbol.for("v-stc"),fs=[];let Ee=null;function St(e=!1){fs.push(Ee=e?null:[])}function e_(){fs.pop(),Ee=fs[fs.length-1]||null}let ws=1;function cu(e,t=!1){ws+=e,e<0&&Ee&&t&&(Ee.hasOnce=!0)}function Jf(e){return e.dynamicChildren=ws>0?Ee||gr:null,e_(),ws>0&&Ee&&Ee.push(e),e}function Vt(e,t,n,r,s,i){return Jf(j(e,t,n,r,s,i,!0))}function Xf(e,t,n,r,s){return Jf(xt(e,t,n,r,s,!0))}function Mi(e){return e?e.__v_isVNode===!0:!1}function Kn(e,t){return e.type===t.type&&e.key===t.key}const Zf=({key:e})=>e??null,Ti=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Nt(e)||ae(e)||lt(e)?{i:ve,r:e,k:t,f:!!n}:e:null);function j(e,t=null,n=null,r=0,s=null,i=e===me?0:1,a=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Zf(t),ref:t&&Ti(t),scopeId:vf,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:ve};return l?(_l(u,n),i&128&&e.normalize(u)):n&&(u.shapeFlag|=Nt(n)?8:16),ws>0&&!a&&Ee&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&Ee.push(u),u}const xt=n_;function n_(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===bm)&&(e=de),Mi(e)){const l=bn(e,t,!0);return n&&_l(l,n),ws>0&&!i&&Ee&&(l.shapeFlag&6?Ee[Ee.indexOf(e)]=l:Ee.push(l)),l.patchFlag=-2,l}if(d_(e)&&(e=e.__vccOpts),t){t=r_(t);let{class:l,style:u}=t;l&&!Nt(l)&&(t.class=Ae(l)),bt(u)&&(ul(u)&&!tt(u)&&(u=Ht({},u)),t.style=nl(u))}const a=Nt(e)?1:Yf(e)?128:wf(e)?64:bt(e)?4:lt(e)?2:0;return j(e,t,n,r,s,a,i,!0)}function r_(e){return e?ul(e)||Bf(e)?Ht({},e):e:null}function bn(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:l,transition:u}=e,f=t?s_(s||{},t):s,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&Zf(f),ref:t&&t.ref?n&&i?tt(i)?i.concat(Ti(t)):[i,Ti(t)]:Ti(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==me?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&bn(e.ssContent),ssFallback:e.ssFallback&&bn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&r&&Ts(d,u.clone(d)),d}function Yn(e=" ",t=0){return xt(ho,null,e,t)}function Ra(e="",t=!1){return t?(St(),Xf(de,null,e)):xt(de,null,e)}function Fe(e){return e==null||typeof e=="boolean"?xt(de):tt(e)?xt(me,null,e.slice()):Mi(e)?pn(e):xt(ho,null,String(e))}function pn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:bn(e)}function _l(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(tt(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),_l(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!Bf(t)?t._ctx=ve:s===3&&ve&&(ve.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else lt(t)?(t={default:t,_ctx:ve},n=32):(t=String(t),r&64?(n=16,t=[Yn(t)]):n=8);e.children=t,e.shapeFlag|=n}function s_(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=Ae([t.class,r.class]));else if(s==="style")t.style=nl([t.style,r.style]);else if(eo(s)){const i=t[s],a=r[s];a&&i!==a&&!(tt(i)&&i.includes(a))&&(t[s]=i?[].concat(i,a):a)}else s!==""&&(t[s]=r[s])}return t}function Oe(e,t,n,r=null){De(e,t,7,[n,r])}const i_=Lf();let o_=0;function a_(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||i_,i={uid:o_++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Dg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:jf(r,s),emitsOptions:Qf(r,s),emit:null,emitted:null,propsDefaults:At,inheritAttrs:r.inheritAttrs,ctx:At,data:At,props:At,attrs:At,slots:At,refs:At,setupState:At,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Qm.bind(null,i),e.ce&&e.ce(i),i}let oe=null;const l_=()=>oe||ve;let Li,Sa;{const e=so(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};Li=t("__VUE_INSTANCE_SETTERS__",n=>oe=n),Sa=t("__VUE_SSR_SETTERS__",n=>Is=n)}const Ls=e=>{const t=oe;return Li(e),e.scope.on(),()=>{e.scope.off(),Li(t)}},uu=()=>{oe&&oe.scope.off(),Li(null)};function td(e){return e.vnode.shapeFlag&4}let Is=!1;function c_(e,t=!1,n=!1){t&&Sa(t);const{props:r,children:s}=e.vnode,i=td(e);Om(e,r,i,t),Um(e,s,n||t);const a=i?u_(e,t):void 0;return t&&Sa(!1),a}function u_(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Cm);const{setup:r}=n;if(r){tn();const s=e.setupContext=r.length>1?f_(e):null,i=Ls(e),a=Ms(r,e,0,[e.props,s]),l=qh(a);if(en(),i(),(l||e.sp)&&!us(e)&&Vf(e),l){if(a.then(uu,uu),t)return a.then(u=>{hu(e,u)}).catch(u=>{ao(u,e,0)});e.asyncDep=a}else hu(e,a)}else ed(e)}function hu(e,t,n){lt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:bt(t)&&(e.setupState=pf(t)),ed(e)}function ed(e,t,n){const r=e.type;e.render||(e.render=r.render||Ue);{const s=Ls(e);tn();try{Rm(e)}finally{en(),s()}}}const h_={get(e,t){return se(e,"get",""),e[t]}};function f_(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,h_),slots:e.slots,emit:e.emit,expose:t}}function fo(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(pf(Zg(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in hs)return hs[n](e)},has(t,n){return n in t||n in hs}})):e.proxy}function d_(e){return lt(e)&&"__vccOpts"in e}const wi=(e,t)=>sm(e,t,Is);function p_(e,t,n){const r=arguments.length;return r===2?bt(t)&&!tt(t)?Mi(t)?xt(e,null,[t]):xt(e,t):xt(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Mi(n)&&(n=[n]),xt(e,t,n))}const g_="3.5.14";/**
* @vue/runtime-dom v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Pa;const fu=typeof window<"u"&&window.trustedTypes;if(fu)try{Pa=fu.createPolicy("vue",{createHTML:e=>e})}catch{}const nd=Pa?e=>Pa.createHTML(e):e=>e,m_="http://www.w3.org/2000/svg",__="http://www.w3.org/1998/Math/MathML",Je=typeof document<"u"?document:null,du=Je&&Je.createElement("template"),y_={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?Je.createElementNS(m_,e):t==="mathml"?Je.createElementNS(__,e):n?Je.createElement(e,{is:n}):Je.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>Je.createTextNode(e),createComment:e=>Je.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Je.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const a=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{du.innerHTML=nd(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const l=du.content;if(r==="svg"||r==="mathml"){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}t.insertBefore(l,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},hn="transition",Zr="animation",As=Symbol("_vtc"),rd={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},v_=Ht({},bf,rd),E_=e=>(e.displayName="Transition",e.props=v_,e),T_=E_((e,{slots:t})=>p_(gm,w_(e),t)),$n=(e,t=[])=>{tt(e)?e.forEach(n=>n(...t)):e&&e(...t)},pu=e=>e?tt(e)?e.some(t=>t.length>1):e.length>1:!1;function w_(e){const t={};for(const E in e)E in rd||(t[E]=e[E]);if(e.css===!1)return t;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:u=i,appearActiveClass:f=a,appearToClass:d=l,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:y=`${n}-leave-active`,leaveToClass:C=`${n}-leave-to`}=e,P=I_(s),V=P&&P[0],N=P&&P[1],{onBeforeEnter:K,onEnter:G,onEnterCancelled:W,onLeave:q,onLeaveCancelled:at,onBeforeAppear:st=K,onAppear:A=G,onAppearCancelled:v=W}=t,m=(E,T,Tt,le)=>{E._enterCancelled=le,jn(E,T?d:l),jn(E,T?f:a),Tt&&Tt()},_=(E,T)=>{E._isLeaving=!1,jn(E,p),jn(E,C),jn(E,y),T&&T()},w=E=>(T,Tt)=>{const le=E?A:G,Mt=()=>m(T,E,Tt);$n(le,[T,Mt]),gu(()=>{jn(T,E?u:i),Ye(T,E?d:l),pu(le)||mu(T,r,V,Mt)})};return Ht(t,{onBeforeEnter(E){$n(K,[E]),Ye(E,i),Ye(E,a)},onBeforeAppear(E){$n(st,[E]),Ye(E,u),Ye(E,f)},onEnter:w(!1),onAppear:w(!0),onLeave(E,T){E._isLeaving=!0;const Tt=()=>_(E,T);Ye(E,p),E._enterCancelled?(Ye(E,y),vu()):(vu(),Ye(E,y)),gu(()=>{E._isLeaving&&(jn(E,p),Ye(E,C),pu(q)||mu(E,r,N,Tt))}),$n(q,[E,Tt])},onEnterCancelled(E){m(E,!1,void 0,!0),$n(W,[E])},onAppearCancelled(E){m(E,!0,void 0,!0),$n(v,[E])},onLeaveCancelled(E){_(E),$n(at,[E])}})}function I_(e){if(e==null)return null;if(bt(e))return[ta(e.enter),ta(e.leave)];{const t=ta(e);return[t,t]}}function ta(e){return Ag(e)}function Ye(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[As]||(e[As]=new Set)).add(t)}function jn(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const n=e[As];n&&(n.delete(t),n.size||(e[As]=void 0))}function gu(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let A_=0;function mu(e,t,n,r){const s=e._endId=++A_,i=()=>{s===e._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:a,timeout:l,propCount:u}=b_(e,t);if(!a)return r();const f=a+"end";let d=0;const p=()=>{e.removeEventListener(f,y),i()},y=C=>{C.target===e&&++d>=u&&p()};setTimeout(()=>{d<u&&p()},l+1),e.addEventListener(f,y)}function b_(e,t){const n=window.getComputedStyle(e),r=P=>(n[P]||"").split(", "),s=r(`${hn}Delay`),i=r(`${hn}Duration`),a=_u(s,i),l=r(`${Zr}Delay`),u=r(`${Zr}Duration`),f=_u(l,u);let d=null,p=0,y=0;t===hn?a>0&&(d=hn,p=a,y=i.length):t===Zr?f>0&&(d=Zr,p=f,y=u.length):(p=Math.max(a,f),d=p>0?a>f?hn:Zr:null,y=d?d===hn?i.length:u.length:0);const C=d===hn&&/\b(transform|all)(,|$)/.test(r(`${hn}Property`).toString());return{type:d,timeout:p,propCount:y,hasTransform:C}}function _u(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>yu(n)+yu(e[r])))}function yu(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function vu(){return document.body.offsetHeight}function C_(e,t,n){const r=e[As];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Fi=Symbol("_vod"),sd=Symbol("_vsh"),R_={beforeMount(e,{value:t},{transition:n}){e[Fi]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):ts(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),ts(e,!0),r.enter(e)):r.leave(e,()=>{ts(e,!1)}):ts(e,t))},beforeUnmount(e,{value:t}){ts(e,t)}};function ts(e,t){e.style.display=t?e[Fi]:"none",e[sd]=!t}const S_=Symbol(""),P_=/(^|;)\s*display\s*:/;function x_(e,t,n){const r=e.style,s=Nt(n);let i=!1;if(n&&!s){if(t)if(Nt(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&Ii(r,l,"")}else for(const a in t)n[a]==null&&Ii(r,a,"");for(const a in n)a==="display"&&(i=!0),Ii(r,a,n[a])}else if(s){if(t!==n){const a=r[S_];a&&(n+=";"+a),r.cssText=n,i=P_.test(n)}}else t&&e.removeAttribute("style");Fi in e&&(e[Fi]=i?r.display:"",e[sd]&&(r.display="none"))}const Eu=/\s*!important$/;function Ii(e,t,n){if(tt(n))n.forEach(r=>Ii(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=V_(e,t);Eu.test(n)?e.setProperty(Zn(r),n.replace(Eu,""),"important"):e[r]=n}}const Tu=["Webkit","Moz","ms"],ea={};function V_(e,t){const n=ea[t];if(n)return n;let r=In(t);if(r!=="filter"&&r in e)return ea[t]=r;r=Kh(r);for(let s=0;s<Tu.length;s++){const i=Tu[s]+r;if(i in e)return ea[t]=i}return t}const wu="http://www.w3.org/1999/xlink";function Iu(e,t,n,r,s,i=xg(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(wu,t.slice(6,t.length)):e.setAttributeNS(wu,t,n):n==null||i&&!Wh(n)?e.removeAttribute(t):e.setAttribute(t,i?"":qe(n)?String(n):n)}function Au(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?nd(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,u=n==null?e.type==="checkbox"?"on":"":String(n);(l!==u||!("_value"in e))&&(e.value=u),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Wh(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(s||t)}function Gn(e,t,n,r){e.addEventListener(t,n,r)}function D_(e,t,n,r){e.removeEventListener(t,n,r)}const bu=Symbol("_vei");function k_(e,t,n,r,s=null){const i=e[bu]||(e[bu]={}),a=i[t];if(r&&a)a.value=r;else{const[l,u]=N_(t);if(r){const f=i[t]=L_(r,s);Gn(e,l,f,u)}else a&&(D_(e,l,a,u),i[t]=void 0)}}const Cu=/(?:Once|Passive|Capture)$/;function N_(e){let t;if(Cu.test(e)){t={};let r;for(;r=e.match(Cu);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Zn(e.slice(2)),t]}let na=0;const O_=Promise.resolve(),M_=()=>na||(O_.then(()=>na=0),na=Date.now());function L_(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;De(F_(r,n.value),t,5,[r])};return n.value=e,n.attached=M_(),n}function F_(e,t){if(tt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const Ru=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,U_=(e,t,n,r,s,i)=>{const a=s==="svg";t==="class"?C_(e,r,a):t==="style"?x_(e,n,r):eo(t)?Za(t)||k_(e,t,n,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):B_(e,t,r,a))?(Au(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Iu(e,t,r,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Nt(r))?Au(e,In(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Iu(e,t,r,a))};function B_(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Ru(t)&&lt(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Ru(t)&&Nt(n)?!1:t in e}const Ui=e=>{const t=e.props["onUpdate:modelValue"]||!1;return tt(t)?n=>_i(t,n):t};function $_(e){e.target.composing=!0}function Su(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Er=Symbol("_assign"),j_={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[Er]=Ui(s);const i=r||s.props&&s.props.type==="number";Gn(e,t?"change":"input",a=>{if(a.target.composing)return;let l=e.value;n&&(l=l.trim()),i&&(l=ga(l)),e[Er](l)}),n&&Gn(e,"change",()=>{e.value=e.value.trim()}),t||(Gn(e,"compositionstart",$_),Gn(e,"compositionend",Su),Gn(e,"change",Su))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(e[Er]=Ui(a),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?ga(e.value):e.value,u=t??"";l!==u&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===u)||(e.value=u))}},q_={deep:!0,created(e,t,n){e[Er]=Ui(n),Gn(e,"change",()=>{const r=e._modelValue,s=H_(e),i=e.checked,a=e[Er];if(tt(r)){const l=Qh(r,s),u=l!==-1;if(i&&!u)a(r.concat(s));else if(!i&&u){const f=[...r];f.splice(l,1),a(f)}}else if(no(r)){const l=new Set(r);i?l.add(s):l.delete(s),a(l)}else a(id(e,i))})},mounted:Pu,beforeUpdate(e,t,n){e[Er]=Ui(n),Pu(e,t,n)}};function Pu(e,{value:t,oldValue:n},r){e._modelValue=t;let s;if(tt(t))s=Qh(t,r.props.value)>-1;else if(no(t))s=t.has(r.props.value);else{if(t===n)return;s=io(t,id(e,!0))}e.checked!==s&&(e.checked=s)}function H_(e){return"_value"in e?e._value:e.value}function id(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const z_=Ht({patchProp:U_},y_);let xu;function K_(){return xu||(xu=$m(z_))}const G_=(...e)=>{const t=K_().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=Q_(r);if(!s)return;const i=t._component;!lt(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,W_(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t};function W_(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Q_(e){return Nt(e)?document.querySelector(e):e}const ra="maintenance-tasks",ui=[{id:"1",description:"lstand prfen (Motorl)",category:"Motor",frequency:"weekly",lastCheck:null,nextCheck:null},{id:"2",description:"Scheibenwaschanlage prfen und nachfllen",category:"Karosserie",frequency:"weekly",lastCheck:null,nextCheck:null},{id:"3",description:"Lichtfunktionen prfen (Abblend-, Fernlicht, Bremslicht, Blinker)",category:"Beleuchtung",frequency:"weekly",lastCheck:null,nextCheck:null},{id:"4",description:"Khlflssigkeit und Bremsflssigkeit kontrollieren",category:"Motor",frequency:"monthly",lastCheck:null,nextCheck:null},{id:"5",description:"Batterie prfen (besonders im Winter)",category:"Elektrik",frequency:"monthly",lastCheck:null,nextCheck:null},{id:"6",description:"Reifendruck kontrollieren und anpassen",category:"Reifen",frequency:"monthly",lastCheck:null,nextCheck:null},{id:"7",description:"Wischerbltter auf Schlierenbildung/Gerusche prfen",category:"Karosserie",frequency:"quarterly",lastCheck:null,nextCheck:null},{id:"8",description:"Reifenwechsel (Sommer/Winter)",category:"Reifen",frequency:"quarterly",lastCheck:null,nextCheck:null},{id:"9",description:"TV/HU/AU Flligkeit prfen",category:"Dokumente",frequency:"quarterly",lastCheck:null,nextCheck:null},{id:"10",description:"Unterbodenwsche durchfhren",category:"Karosserie",frequency:"biannual",lastCheck:null,nextCheck:null},{id:"11",description:"Roststellen kontrollieren (Kanten/Radlufe)",category:"Karosserie",frequency:"biannual",lastCheck:null,nextCheck:null},{id:"12",description:"Inspektion nach Herstellervorgabe",category:"Service",frequency:"annual",lastCheck:null,nextCheck:null},{id:"13",description:"Klimaanlage prfen und desinfizieren",category:"Klimaanlage",frequency:"annual",lastCheck:null,nextCheck:null},{id:"14",description:"Innenraumfilter (Pollenfilter) wechseln",category:"Klimaanlage",frequency:"annual",lastCheck:null,nextCheck:null},{id:"15",description:"Bremsen (Belge und Scheiben) berprfen",category:"Bremsen",frequency:"annual",lastCheck:null,nextCheck:null},{id:"16",description:"ADAC-Mitgliedschaft prfen",category:"Dokumente",frequency:"annual",lastCheck:null,nextCheck:null}];function Y_(){const e=gn([]),t=()=>{try{const i=localStorage.getItem(ra);e.value=i?JSON.parse(i):[...ui]}catch(i){console.error("Error loading tasks:",i),e.value=[...ui]}},n=()=>{try{localStorage.setItem(ra,JSON.stringify(e.value))}catch(i){console.error("Error saving tasks:",i)}},r=i=>{const a=e.value.findIndex(l=>l.id===i.id);a!==-1&&(e.value[a]=i,n())},s=()=>{try{localStorage.removeItem(ra),e.value=[...ui],n()}catch(i){console.error("Error resetting tasks:",i),e.value=[...ui]}};return t(),{maintenanceTasks:e,updateTask:r,resetTasks:s}}const J_=()=>{};var Vu={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},X_=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],a=e[n++],l=e[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return t.join("")},ad={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],a=s+1<e.length,l=a?e[s+1]:0,u=s+2<e.length,f=u?e[s+2]:0,d=i>>2,p=(i&3)<<4|l>>4;let y=(l&15)<<2|f>>6,C=f&63;u||(C=64,a||(y=64)),r.push(n[d],n[p],n[y],n[C])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(od(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):X_(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const f=s<e.length?n[e.charAt(s)]:64;++s;const p=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||l==null||f==null||p==null)throw new Z_;const y=i<<2|l>>4;if(r.push(y),f!==64){const C=l<<4&240|f>>2;if(r.push(C),p!==64){const P=f<<6&192|p;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Z_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ty=function(e){const t=od(e);return ad.encodeByteArray(t,!0)},Bi=function(e){return ty(e).replace(/\./g,"")},ey=function(e){try{return ad.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=()=>ny().__FIREBASE_DEFAULTS__,sy=()=>{if(typeof process>"u"||typeof Vu>"u")return;const e=Vu.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},iy=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&ey(e[1]);return t&&JSON.parse(t)},yl=()=>{try{return J_()||ry()||sy()||iy()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},oy=e=>{var t,n;return(n=(t=yl())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},ay=e=>{const t=oy(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},ld=()=>{var e;return(e=yl())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(e){return e.endsWith(".cloudworkstations.dev")}async function cy(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Bi(JSON.stringify(n)),Bi(JSON.stringify(a)),""].join(".")}const ds={};function hy(){const e={prod:[],emulator:[]};for(const t of Object.keys(ds))ds[t]?e.emulator.push(t):e.prod.push(t);return e}function fy(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let Du=!1;function cd(e,t){if(typeof window>"u"||typeof document>"u"||!vl(window.location.host)||ds[e]===t||ds[e]||Du)return;ds[e]=t;function n(y){return`__firebase__banner__${y}`}const r="__firebase__banner",i=hy().prod.length>0;function a(){const y=document.getElementById(r);y&&y.remove()}function l(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function u(y,C){y.setAttribute("width","24"),y.setAttribute("id",C),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function f(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{Du=!0,a()},y}function d(y,C){y.setAttribute("id",C),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function p(){const y=fy(r),C=n("text"),P=document.getElementById(C)||document.createElement("span"),V=n("learnmore"),N=document.getElementById(V)||document.createElement("a"),K=n("preprendIcon"),G=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const W=y.element;l(W),d(N,V);const q=f();u(G,K),W.append(G,P,N,q),document.body.appendChild(W)}i?(P.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function py(){var e;const t=(e=yl())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gy(){return!py()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function my(){try{return typeof indexedDB=="object"}catch{return!1}}function _y(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="FirebaseError";class Vr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=yy,Object.setPrototypeOf(this,Vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ud.prototype.create)}}class ud{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],a=i?vy(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Vr(s,l,r)}}function vy(e,t){return e.replace(Ey,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const Ey=/\{\$([^}]+)}/g;function $i(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],a=t[s];if(ku(i)&&ku(a)){if(!$i(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ku(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(e){return e&&e._delegate?e._delegate:e}class bs{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new ly;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Iy(t))try{this.getOrInitializeService({instanceIdentifier:zn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=zn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=zn){return this.instances.has(t)}getOptions(t=zn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&t(a,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wy(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=zn){return this.component?this.component.multipleInstances?t:zn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wy(e){return e===zn?void 0:e}function Iy(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Ty(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(pt||(pt={}));const by={debug:pt.DEBUG,verbose:pt.VERBOSE,info:pt.INFO,warn:pt.WARN,error:pt.ERROR,silent:pt.SILENT},Cy=pt.INFO,Ry={[pt.DEBUG]:"log",[pt.VERBOSE]:"log",[pt.INFO]:"info",[pt.WARN]:"warn",[pt.ERROR]:"error"},Sy=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=Ry[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class hd{constructor(t){this.name=t,this._logLevel=Cy,this._logHandler=Sy,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in pt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?by[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,pt.DEBUG,...t),this._logHandler(this,pt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,pt.VERBOSE,...t),this._logHandler(this,pt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,pt.INFO,...t),this._logHandler(this,pt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,pt.WARN,...t),this._logHandler(this,pt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,pt.ERROR,...t),this._logHandler(this,pt.ERROR,...t)}}const Py=(e,t)=>t.some(n=>e instanceof n);let Nu,Ou;function xy(){return Nu||(Nu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Vy(){return Ou||(Ou=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fd=new WeakMap,xa=new WeakMap,dd=new WeakMap,sa=new WeakMap,El=new WeakMap;function Dy(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{n(yn(e.result)),s()},a=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&fd.set(n,e)}).catch(()=>{}),El.set(t,e),t}function ky(e){if(xa.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});xa.set(e,t)}let Va={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return xa.get(e);if(t==="objectStoreNames")return e.objectStoreNames||dd.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Ny(e){Va=e(Va)}function Oy(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(ia(this),t,...n);return dd.set(r,t.sort?t.sort():[t]),yn(r)}:Vy().includes(e)?function(...t){return e.apply(ia(this),t),yn(fd.get(this))}:function(...t){return yn(e.apply(ia(this),t))}}function My(e){return typeof e=="function"?Oy(e):(e instanceof IDBTransaction&&ky(e),Py(e,xy())?new Proxy(e,Va):e)}function yn(e){if(e instanceof IDBRequest)return Dy(e);if(sa.has(e))return sa.get(e);const t=My(e);return t!==e&&(sa.set(e,t),El.set(t,e)),t}const ia=e=>El.get(e);function Ly(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(e,t),l=yn(a);return r&&a.addEventListener("upgradeneeded",u=>{r(yn(a.result),u.oldVersion,u.newVersion,yn(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const Fy=["get","getKey","getAll","getAllKeys","count"],Uy=["put","add","delete","clear"],oa=new Map;function Mu(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(oa.get(t))return oa.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Uy.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Fy.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let f=u.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&u.done]))[0]};return oa.set(t,i),i}Ny(e=>({...e,get:(t,n,r)=>Mu(t,n)||e.get(t,n,r),has:(t,n)=>!!Mu(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($y(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $y(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Da="@firebase/app",Lu="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn=new hd("@firebase/app"),jy="@firebase/app-compat",qy="@firebase/analytics-compat",Hy="@firebase/analytics",zy="@firebase/app-check-compat",Ky="@firebase/app-check",Gy="@firebase/auth",Wy="@firebase/auth-compat",Qy="@firebase/database",Yy="@firebase/data-connect",Jy="@firebase/database-compat",Xy="@firebase/functions",Zy="@firebase/functions-compat",tv="@firebase/installations",ev="@firebase/installations-compat",nv="@firebase/messaging",rv="@firebase/messaging-compat",sv="@firebase/performance",iv="@firebase/performance-compat",ov="@firebase/remote-config",av="@firebase/remote-config-compat",lv="@firebase/storage",cv="@firebase/storage-compat",uv="@firebase/firestore",hv="@firebase/vertexai",fv="@firebase/firestore-compat",dv="firebase",pv="11.7.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka="[DEFAULT]",gv={[Da]:"fire-core",[jy]:"fire-core-compat",[Hy]:"fire-analytics",[qy]:"fire-analytics-compat",[Ky]:"fire-app-check",[zy]:"fire-app-check-compat",[Gy]:"fire-auth",[Wy]:"fire-auth-compat",[Qy]:"fire-rtdb",[Yy]:"fire-data-connect",[Jy]:"fire-rtdb-compat",[Xy]:"fire-fn",[Zy]:"fire-fn-compat",[tv]:"fire-iid",[ev]:"fire-iid-compat",[nv]:"fire-fcm",[rv]:"fire-fcm-compat",[sv]:"fire-perf",[iv]:"fire-perf-compat",[ov]:"fire-rc",[av]:"fire-rc-compat",[lv]:"fire-gcs",[cv]:"fire-gcs-compat",[uv]:"fire-fst",[fv]:"fire-fst-compat",[hv]:"fire-vertex","fire-js":"fire-js",[dv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji=new Map,mv=new Map,Na=new Map;function Fu(e,t){try{e.container.addComponent(t)}catch(n){nn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function qi(e){const t=e.name;if(Na.has(t))return nn.debug(`There were multiple attempts to register component ${t}.`),!1;Na.set(t,e);for(const n of ji.values())Fu(n,e);for(const n of mv.values())Fu(n,e);return!0}function _v(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function yv(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vn=new ud("app","Firebase",vv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw vn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=pv;function pd(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:ka,automaticDataCollectionEnabled:!1},t),s=r.name;if(typeof s!="string"||!s)throw vn.create("bad-app-name",{appName:String(s)});if(n||(n=ld()),!n)throw vn.create("no-options");const i=ji.get(s);if(i){if($i(n,i.options)&&$i(r,i.config))return i;throw vn.create("duplicate-app",{appName:s})}const a=new Ay(s);for(const u of Na.values())a.addComponent(u);const l=new Ev(n,r,a);return ji.set(s,l),l}function wv(e=ka){const t=ji.get(e);if(!t&&e===ka&&ld())return pd();if(!t)throw vn.create("no-app",{appName:e});return t}function Tr(e,t,n){var r;let s=(r=gv[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${t}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),nn.warn(l.join(" "));return}qi(new bs(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="firebase-heartbeat-database",Av=1,Cs="firebase-heartbeat-store";let aa=null;function gd(){return aa||(aa=Ly(Iv,Av,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Cs)}catch(n){console.warn(n)}}}}).catch(e=>{throw vn.create("idb-open",{originalErrorMessage:e.message})})),aa}async function bv(e){try{const n=(await gd()).transaction(Cs),r=await n.objectStore(Cs).get(md(e));return await n.done,r}catch(t){if(t instanceof Vr)nn.warn(t.message);else{const n=vn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});nn.warn(n.message)}}}async function Uu(e,t){try{const r=(await gd()).transaction(Cs,"readwrite");await r.objectStore(Cs).put(t,md(e)),await r.done}catch(n){if(n instanceof Vr)nn.warn(n.message);else{const r=vn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});nn.warn(r.message)}}}function md(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=1024,Rv=30;class Sv{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new xv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Bu();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Rv){const a=Vv(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){nn.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Bu(),{heartbeatsToSend:r,unsentEntries:s}=Pv(this._heartbeatsCache.heartbeats),i=Bi(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return nn.warn(n),""}}}function Bu(){return new Date().toISOString().substring(0,10)}function Pv(e,t=Cv){const n=[];let r=e.slice();for(const s of e){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),$u(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),$u(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class xv{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return my()?_y().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bv(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Uu(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Uu(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function $u(e){return Bi(JSON.stringify({version:2,heartbeats:e})).length}function Vv(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(e){qi(new bs("platform-logger",t=>new By(t),"PRIVATE")),qi(new bs("heartbeat",t=>new Sv(t),"PRIVATE")),Tr(Da,Lu,e),Tr(Da,Lu,"esm2017"),Tr("fire-js","")}Dv("");var ju=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var En,_d;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(A,v){function m(){}m.prototype=v.prototype,A.D=v.prototype,A.prototype=new m,A.prototype.constructor=A,A.C=function(_,w,E){for(var T=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)T[Tt-2]=arguments[Tt];return v.prototype[w].apply(_,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,v,m){m||(m=0);var _=Array(16);if(typeof v=="string")for(var w=0;16>w;++w)_[w]=v.charCodeAt(m++)|v.charCodeAt(m++)<<8|v.charCodeAt(m++)<<16|v.charCodeAt(m++)<<24;else for(w=0;16>w;++w)_[w]=v[m++]|v[m++]<<8|v[m++]<<16|v[m++]<<24;v=A.g[0],m=A.g[1],w=A.g[2];var E=A.g[3],T=v+(E^m&(w^E))+_[0]+3614090360&4294967295;v=m+(T<<7&4294967295|T>>>25),T=E+(w^v&(m^w))+_[1]+3905402710&4294967295,E=v+(T<<12&4294967295|T>>>20),T=w+(m^E&(v^m))+_[2]+606105819&4294967295,w=E+(T<<17&4294967295|T>>>15),T=m+(v^w&(E^v))+_[3]+3250441966&4294967295,m=w+(T<<22&4294967295|T>>>10),T=v+(E^m&(w^E))+_[4]+4118548399&4294967295,v=m+(T<<7&4294967295|T>>>25),T=E+(w^v&(m^w))+_[5]+1200080426&4294967295,E=v+(T<<12&4294967295|T>>>20),T=w+(m^E&(v^m))+_[6]+2821735955&4294967295,w=E+(T<<17&4294967295|T>>>15),T=m+(v^w&(E^v))+_[7]+4249261313&4294967295,m=w+(T<<22&4294967295|T>>>10),T=v+(E^m&(w^E))+_[8]+1770035416&4294967295,v=m+(T<<7&4294967295|T>>>25),T=E+(w^v&(m^w))+_[9]+2336552879&4294967295,E=v+(T<<12&4294967295|T>>>20),T=w+(m^E&(v^m))+_[10]+4294925233&4294967295,w=E+(T<<17&4294967295|T>>>15),T=m+(v^w&(E^v))+_[11]+2304563134&4294967295,m=w+(T<<22&4294967295|T>>>10),T=v+(E^m&(w^E))+_[12]+1804603682&4294967295,v=m+(T<<7&4294967295|T>>>25),T=E+(w^v&(m^w))+_[13]+4254626195&4294967295,E=v+(T<<12&4294967295|T>>>20),T=w+(m^E&(v^m))+_[14]+2792965006&4294967295,w=E+(T<<17&4294967295|T>>>15),T=m+(v^w&(E^v))+_[15]+1236535329&4294967295,m=w+(T<<22&4294967295|T>>>10),T=v+(w^E&(m^w))+_[1]+4129170786&4294967295,v=m+(T<<5&4294967295|T>>>27),T=E+(m^w&(v^m))+_[6]+3225465664&4294967295,E=v+(T<<9&4294967295|T>>>23),T=w+(v^m&(E^v))+_[11]+643717713&4294967295,w=E+(T<<14&4294967295|T>>>18),T=m+(E^v&(w^E))+_[0]+3921069994&4294967295,m=w+(T<<20&4294967295|T>>>12),T=v+(w^E&(m^w))+_[5]+3593408605&4294967295,v=m+(T<<5&4294967295|T>>>27),T=E+(m^w&(v^m))+_[10]+38016083&4294967295,E=v+(T<<9&4294967295|T>>>23),T=w+(v^m&(E^v))+_[15]+3634488961&4294967295,w=E+(T<<14&4294967295|T>>>18),T=m+(E^v&(w^E))+_[4]+3889429448&4294967295,m=w+(T<<20&4294967295|T>>>12),T=v+(w^E&(m^w))+_[9]+568446438&4294967295,v=m+(T<<5&4294967295|T>>>27),T=E+(m^w&(v^m))+_[14]+3275163606&4294967295,E=v+(T<<9&4294967295|T>>>23),T=w+(v^m&(E^v))+_[3]+4107603335&4294967295,w=E+(T<<14&4294967295|T>>>18),T=m+(E^v&(w^E))+_[8]+1163531501&4294967295,m=w+(T<<20&4294967295|T>>>12),T=v+(w^E&(m^w))+_[13]+2850285829&4294967295,v=m+(T<<5&4294967295|T>>>27),T=E+(m^w&(v^m))+_[2]+4243563512&4294967295,E=v+(T<<9&4294967295|T>>>23),T=w+(v^m&(E^v))+_[7]+1735328473&4294967295,w=E+(T<<14&4294967295|T>>>18),T=m+(E^v&(w^E))+_[12]+2368359562&4294967295,m=w+(T<<20&4294967295|T>>>12),T=v+(m^w^E)+_[5]+4294588738&4294967295,v=m+(T<<4&4294967295|T>>>28),T=E+(v^m^w)+_[8]+2272392833&4294967295,E=v+(T<<11&4294967295|T>>>21),T=w+(E^v^m)+_[11]+1839030562&4294967295,w=E+(T<<16&4294967295|T>>>16),T=m+(w^E^v)+_[14]+4259657740&4294967295,m=w+(T<<23&4294967295|T>>>9),T=v+(m^w^E)+_[1]+2763975236&4294967295,v=m+(T<<4&4294967295|T>>>28),T=E+(v^m^w)+_[4]+1272893353&4294967295,E=v+(T<<11&4294967295|T>>>21),T=w+(E^v^m)+_[7]+4139469664&4294967295,w=E+(T<<16&4294967295|T>>>16),T=m+(w^E^v)+_[10]+3200236656&4294967295,m=w+(T<<23&4294967295|T>>>9),T=v+(m^w^E)+_[13]+681279174&4294967295,v=m+(T<<4&4294967295|T>>>28),T=E+(v^m^w)+_[0]+3936430074&4294967295,E=v+(T<<11&4294967295|T>>>21),T=w+(E^v^m)+_[3]+3572445317&4294967295,w=E+(T<<16&4294967295|T>>>16),T=m+(w^E^v)+_[6]+76029189&4294967295,m=w+(T<<23&4294967295|T>>>9),T=v+(m^w^E)+_[9]+3654602809&4294967295,v=m+(T<<4&4294967295|T>>>28),T=E+(v^m^w)+_[12]+3873151461&4294967295,E=v+(T<<11&4294967295|T>>>21),T=w+(E^v^m)+_[15]+530742520&4294967295,w=E+(T<<16&4294967295|T>>>16),T=m+(w^E^v)+_[2]+3299628645&4294967295,m=w+(T<<23&4294967295|T>>>9),T=v+(w^(m|~E))+_[0]+4096336452&4294967295,v=m+(T<<6&4294967295|T>>>26),T=E+(m^(v|~w))+_[7]+1126891415&4294967295,E=v+(T<<10&4294967295|T>>>22),T=w+(v^(E|~m))+_[14]+2878612391&4294967295,w=E+(T<<15&4294967295|T>>>17),T=m+(E^(w|~v))+_[5]+4237533241&4294967295,m=w+(T<<21&4294967295|T>>>11),T=v+(w^(m|~E))+_[12]+1700485571&4294967295,v=m+(T<<6&4294967295|T>>>26),T=E+(m^(v|~w))+_[3]+2399980690&4294967295,E=v+(T<<10&4294967295|T>>>22),T=w+(v^(E|~m))+_[10]+4293915773&4294967295,w=E+(T<<15&4294967295|T>>>17),T=m+(E^(w|~v))+_[1]+2240044497&4294967295,m=w+(T<<21&4294967295|T>>>11),T=v+(w^(m|~E))+_[8]+1873313359&4294967295,v=m+(T<<6&4294967295|T>>>26),T=E+(m^(v|~w))+_[15]+4264355552&4294967295,E=v+(T<<10&4294967295|T>>>22),T=w+(v^(E|~m))+_[6]+2734768916&4294967295,w=E+(T<<15&4294967295|T>>>17),T=m+(E^(w|~v))+_[13]+1309151649&4294967295,m=w+(T<<21&4294967295|T>>>11),T=v+(w^(m|~E))+_[4]+4149444226&4294967295,v=m+(T<<6&4294967295|T>>>26),T=E+(m^(v|~w))+_[11]+3174756917&4294967295,E=v+(T<<10&4294967295|T>>>22),T=w+(v^(E|~m))+_[2]+718787259&4294967295,w=E+(T<<15&4294967295|T>>>17),T=m+(E^(w|~v))+_[9]+3951481745&4294967295,A.g[0]=A.g[0]+v&4294967295,A.g[1]=A.g[1]+(w+(T<<21&4294967295|T>>>11))&4294967295,A.g[2]=A.g[2]+w&4294967295,A.g[3]=A.g[3]+E&4294967295}r.prototype.u=function(A,v){v===void 0&&(v=A.length);for(var m=v-this.blockSize,_=this.B,w=this.h,E=0;E<v;){if(w==0)for(;E<=m;)s(this,A,E),E+=this.blockSize;if(typeof A=="string"){for(;E<v;)if(_[w++]=A.charCodeAt(E++),w==this.blockSize){s(this,_),w=0;break}}else for(;E<v;)if(_[w++]=A[E++],w==this.blockSize){s(this,_),w=0;break}}this.h=w,this.o+=v},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var v=1;v<A.length-8;++v)A[v]=0;var m=8*this.o;for(v=A.length-8;v<A.length;++v)A[v]=m&255,m/=256;for(this.u(A),A=Array(16),v=m=0;4>v;++v)for(var _=0;32>_;_+=8)A[m++]=this.g[v]>>>_&255;return A};function i(A,v){var m=l;return Object.prototype.hasOwnProperty.call(m,A)?m[A]:m[A]=v(A)}function a(A,v){this.h=v;for(var m=[],_=!0,w=A.length-1;0<=w;w--){var E=A[w]|0;_&&E==v||(m[w]=E,_=!1)}this.g=m}var l={};function u(A){return-128<=A&&128>A?i(A,function(v){return new a([v|0],0>v?-1:0)}):new a([A|0],0>A?-1:0)}function f(A){if(isNaN(A)||!isFinite(A))return p;if(0>A)return N(f(-A));for(var v=[],m=1,_=0;A>=m;_++)v[_]=A/m|0,m*=4294967296;return new a(v,0)}function d(A,v){if(A.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(A.charAt(0)=="-")return N(d(A.substring(1),v));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var m=f(Math.pow(v,8)),_=p,w=0;w<A.length;w+=8){var E=Math.min(8,A.length-w),T=parseInt(A.substring(w,w+E),v);8>E?(E=f(Math.pow(v,E)),_=_.j(E).add(f(T))):(_=_.j(m),_=_.add(f(T)))}return _}var p=u(0),y=u(1),C=u(16777216);e=a.prototype,e.m=function(){if(V(this))return-N(this).m();for(var A=0,v=1,m=0;m<this.g.length;m++){var _=this.i(m);A+=(0<=_?_:4294967296+_)*v,v*=4294967296}return A},e.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(P(this))return"0";if(V(this))return"-"+N(this).toString(A);for(var v=f(Math.pow(A,6)),m=this,_="";;){var w=q(m,v).g;m=K(m,w.j(v));var E=((0<m.g.length?m.g[0]:m.h)>>>0).toString(A);if(m=w,P(m))return E+_;for(;6>E.length;)E="0"+E;_=E+_}},e.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function P(A){if(A.h!=0)return!1;for(var v=0;v<A.g.length;v++)if(A.g[v]!=0)return!1;return!0}function V(A){return A.h==-1}e.l=function(A){return A=K(this,A),V(A)?-1:P(A)?0:1};function N(A){for(var v=A.g.length,m=[],_=0;_<v;_++)m[_]=~A.g[_];return new a(m,~A.h).add(y)}e.abs=function(){return V(this)?N(this):this},e.add=function(A){for(var v=Math.max(this.g.length,A.g.length),m=[],_=0,w=0;w<=v;w++){var E=_+(this.i(w)&65535)+(A.i(w)&65535),T=(E>>>16)+(this.i(w)>>>16)+(A.i(w)>>>16);_=T>>>16,E&=65535,T&=65535,m[w]=T<<16|E}return new a(m,m[m.length-1]&-2147483648?-1:0)};function K(A,v){return A.add(N(v))}e.j=function(A){if(P(this)||P(A))return p;if(V(this))return V(A)?N(this).j(N(A)):N(N(this).j(A));if(V(A))return N(this.j(N(A)));if(0>this.l(C)&&0>A.l(C))return f(this.m()*A.m());for(var v=this.g.length+A.g.length,m=[],_=0;_<2*v;_++)m[_]=0;for(_=0;_<this.g.length;_++)for(var w=0;w<A.g.length;w++){var E=this.i(_)>>>16,T=this.i(_)&65535,Tt=A.i(w)>>>16,le=A.i(w)&65535;m[2*_+2*w]+=T*le,G(m,2*_+2*w),m[2*_+2*w+1]+=E*le,G(m,2*_+2*w+1),m[2*_+2*w+1]+=T*Tt,G(m,2*_+2*w+1),m[2*_+2*w+2]+=E*Tt,G(m,2*_+2*w+2)}for(_=0;_<v;_++)m[_]=m[2*_+1]<<16|m[2*_];for(_=v;_<2*v;_++)m[_]=0;return new a(m,0)};function G(A,v){for(;(A[v]&65535)!=A[v];)A[v+1]+=A[v]>>>16,A[v]&=65535,v++}function W(A,v){this.g=A,this.h=v}function q(A,v){if(P(v))throw Error("division by zero");if(P(A))return new W(p,p);if(V(A))return v=q(N(A),v),new W(N(v.g),N(v.h));if(V(v))return v=q(A,N(v)),new W(N(v.g),v.h);if(30<A.g.length){if(V(A)||V(v))throw Error("slowDivide_ only works with positive integers.");for(var m=y,_=v;0>=_.l(A);)m=at(m),_=at(_);var w=st(m,1),E=st(_,1);for(_=st(_,2),m=st(m,2);!P(_);){var T=E.add(_);0>=T.l(A)&&(w=w.add(m),E=T),_=st(_,1),m=st(m,1)}return v=K(A,w.j(v)),new W(w,v)}for(w=p;0<=A.l(v);){for(m=Math.max(1,Math.floor(A.m()/v.m())),_=Math.ceil(Math.log(m)/Math.LN2),_=48>=_?1:Math.pow(2,_-48),E=f(m),T=E.j(v);V(T)||0<T.l(A);)m-=_,E=f(m),T=E.j(v);P(E)&&(E=y),w=w.add(E),A=K(A,T)}return new W(w,A)}e.A=function(A){return q(this,A).h},e.and=function(A){for(var v=Math.max(this.g.length,A.g.length),m=[],_=0;_<v;_++)m[_]=this.i(_)&A.i(_);return new a(m,this.h&A.h)},e.or=function(A){for(var v=Math.max(this.g.length,A.g.length),m=[],_=0;_<v;_++)m[_]=this.i(_)|A.i(_);return new a(m,this.h|A.h)},e.xor=function(A){for(var v=Math.max(this.g.length,A.g.length),m=[],_=0;_<v;_++)m[_]=this.i(_)^A.i(_);return new a(m,this.h^A.h)};function at(A){for(var v=A.g.length+1,m=[],_=0;_<v;_++)m[_]=A.i(_)<<1|A.i(_-1)>>>31;return new a(m,A.h)}function st(A,v){var m=v>>5;v%=32;for(var _=A.g.length-m,w=[],E=0;E<_;E++)w[E]=0<v?A.i(E+m)>>>v|A.i(E+m+1)<<32-v:A.i(E+m);return new a(w,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_d=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=d,En=a}).apply(typeof ju<"u"?ju:typeof self<"u"?self:typeof window<"u"?window:{});var hi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yd,rs,vd,Ai,Oa,Ed,Td,wd;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,h){return o==Array.prototype||o==Object.prototype||(o[c]=h.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof hi=="object"&&hi];for(var c=0;c<o.length;++c){var h=o[c];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function s(o,c){if(c)t:{var h=r;o=o.split(".");for(var g=0;g<o.length-1;g++){var R=o[g];if(!(R in h))break t;h=h[R]}o=o[o.length-1],g=h[o],c=c(g),c!=g&&c!=null&&t(h,o,{configurable:!0,writable:!0,value:c})}}function i(o,c){o instanceof String&&(o+="");var h=0,g=!1,R={next:function(){if(!g&&h<o.length){var S=h++;return{value:c(S,o[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}s("Array.prototype.values",function(o){return o||function(){return i(this,function(c,h){return h})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function f(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,h){return o.call.apply(o.bind,arguments)}function p(o,c,h){if(!o)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,g),o.apply(c,R)}}return function(){return o.apply(c,arguments)}}function y(o,c,h){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,y.apply(null,arguments)}function C(o,c){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),o.apply(this,g)}}function P(o,c){function h(){}h.prototype=c.prototype,o.aa=c.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(g,R,S){for(var $=Array(arguments.length-2),It=2;It<arguments.length;It++)$[It-2]=arguments[It];return c.prototype[R].apply(g,$)}}function V(o){const c=o.length;if(0<c){const h=Array(c);for(let g=0;g<c;g++)h[g]=o[g];return h}return[]}function N(o,c){for(let h=1;h<arguments.length;h++){const g=arguments[h];if(u(g)){const R=o.length||0,S=g.length||0;o.length=R+S;for(let $=0;$<S;$++)o[R+$]=g[$]}else o.push(g)}}class K{constructor(c,h){this.i=c,this.j=h,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function G(o){return/^[\s\xa0]*$/.test(o)}function W(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function q(o){return q[" "](o),o}q[" "]=function(){};var at=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function st(o,c,h){for(const g in o)c.call(h,o[g],g,o)}function A(o,c){for(const h in o)c.call(void 0,o[h],h,o)}function v(o){const c={};for(const h in o)c[h]=o[h];return c}const m="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(o,c){let h,g;for(let R=1;R<arguments.length;R++){g=arguments[R];for(h in g)o[h]=g[h];for(let S=0;S<m.length;S++)h=m[S],Object.prototype.hasOwnProperty.call(g,h)&&(o[h]=g[h])}}function w(o){var c=1;o=o.split(":");const h=[];for(;0<c&&o.length;)h.push(o.shift()),c--;return o.length&&h.push(o.join(":")),h}function E(o){l.setTimeout(()=>{throw o},0)}function T(){var o=Se;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class Tt{constructor(){this.h=this.g=null}add(c,h){const g=le.get();g.set(c,h),this.h?this.h.next=g:this.g=g,this.h=g}}var le=new K(()=>new Mt,o=>o.reset());class Mt{constructor(){this.next=this.g=this.h=null}set(c,h){this.h=c,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let wt,gt=!1,Se=new Tt,Dn=()=>{const o=l.Promise.resolve(void 0);wt=()=>{o.then(ze)}};var ze=()=>{for(var o;o=T();){try{o.h.call(o.g)}catch(h){E(h)}var c=le;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}gt=!1};function Ut(){this.s=this.s,this.C=this.C}Ut.prototype.s=!1,Ut.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ut.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Bt(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}Bt.prototype.h=function(){this.defaultPrevented=!0};var So=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const h=()=>{};l.addEventListener("test",h,c),l.removeEventListener("test",h,c)}catch{}return o}();function kn(o,c){if(Bt.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,g=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(at){t:{try{q(c.nodeName);var R=!0;break t}catch{}R=!1}R||(c=null)}}else h=="mouseover"?c=o.fromElement:h=="mouseout"&&(c=o.toElement);this.relatedTarget=c,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Nn[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&kn.aa.h.call(this)}}P(kn,Bt);var Nn={2:"touch",3:"pen",4:"mouse"};kn.prototype.h=function(){kn.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Ke="closure_listenable_"+(1e6*Math.random()|0),Lr=0;function js(o,c,h,g,R){this.listener=o,this.proxy=null,this.src=c,this.type=h,this.capture=!!g,this.ha=R,this.key=++Lr,this.da=this.fa=!1}function Ne(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Fr(o){this.src=o,this.g={},this.h=0}Fr.prototype.add=function(o,c,h,g,R){var S=o.toString();o=this.g[S],o||(o=this.g[S]=[],this.h++);var $=b(o,c,g,R);return-1<$?(c=o[$],h||(c.fa=!1)):(c=new js(c,this.src,S,!!g,R),c.fa=h,o.push(c)),c};function I(o,c){var h=c.type;if(h in o.g){var g=o.g[h],R=Array.prototype.indexOf.call(g,c,void 0),S;(S=0<=R)&&Array.prototype.splice.call(g,R,1),S&&(Ne(c),o.g[h].length==0&&(delete o.g[h],o.h--))}}function b(o,c,h,g){for(var R=0;R<o.length;++R){var S=o[R];if(!S.da&&S.listener==c&&S.capture==!!h&&S.ha==g)return R}return-1}var x="closure_lm_"+(1e6*Math.random()|0),L={};function O(o,c,h,g,R){if(Array.isArray(c)){for(var S=0;S<c.length;S++)O(o,c[S],h,g,R);return null}return h=rt(h),o&&o[Ke]?o.K(c,h,f(g)?!!g.capture:!1,R):M(o,c,h,!1,g,R)}function M(o,c,h,g,R,S){if(!c)throw Error("Invalid event type");var $=f(R)?!!R.capture:!!R,It=H(o);if(It||(o[x]=It=new Fr(o)),h=It.add(c,h,g,$,S),h.proxy)return h;if(g=z(),h.proxy=g,g.src=o,g.listener=h,o.addEventListener)So||(R=$),R===void 0&&(R=!1),o.addEventListener(c.toString(),g,R);else if(o.attachEvent)o.attachEvent(F(c.toString()),g);else if(o.addListener&&o.removeListener)o.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function z(){function o(h){return c.call(o.src,o.listener,h)}const c=X;return o}function B(o,c,h,g,R){if(Array.isArray(c))for(var S=0;S<c.length;S++)B(o,c[S],h,g,R);else g=f(g)?!!g.capture:!!g,h=rt(h),o&&o[Ke]?(o=o.i,c=String(c).toString(),c in o.g&&(S=o.g[c],h=b(S,h,g,R),-1<h&&(Ne(S[h]),Array.prototype.splice.call(S,h,1),S.length==0&&(delete o.g[c],o.h--)))):o&&(o=H(o))&&(c=o.g[c.toString()],o=-1,c&&(o=b(c,h,g,R)),(h=-1<o?c[o]:null)&&U(h))}function U(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Ke])I(c.i,o);else{var h=o.type,g=o.proxy;c.removeEventListener?c.removeEventListener(h,g,o.capture):c.detachEvent?c.detachEvent(F(h),g):c.addListener&&c.removeListener&&c.removeListener(g),(h=H(c))?(I(h,o),h.h==0&&(h.src=null,c[x]=null)):Ne(o)}}}function F(o){return o in L?L[o]:L[o]="on"+o}function X(o,c){if(o.da)o=!0;else{c=new kn(c,this);var h=o.listener,g=o.ha||o.src;o.fa&&U(o),o=h.call(g,c)}return o}function H(o){return o=o[x],o instanceof Fr?o:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function rt(o){return typeof o=="function"?o:(o[J]||(o[J]=function(c){return o.handleEvent(c)}),o[J])}function et(){Ut.call(this),this.i=new Fr(this),this.M=this,this.F=null}P(et,Ut),et.prototype[Ke]=!0,et.prototype.removeEventListener=function(o,c,h,g){B(this,o,c,h,g)};function ct(o,c){var h,g=o.F;if(g)for(h=[];g;g=g.F)h.push(g);if(o=o.M,g=c.type||c,typeof c=="string")c=new Bt(c,o);else if(c instanceof Bt)c.target=c.target||o;else{var R=c;c=new Bt(g,o),_(c,R)}if(R=!0,h)for(var S=h.length-1;0<=S;S--){var $=c.g=h[S];R=ft($,g,!0,c)&&R}if($=c.g=o,R=ft($,g,!0,c)&&R,R=ft($,g,!1,c)&&R,h)for(S=0;S<h.length;S++)$=c.g=h[S],R=ft($,g,!1,c)&&R}et.prototype.N=function(){if(et.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var h=o.g[c],g=0;g<h.length;g++)Ne(h[g]);delete o.g[c],o.h--}}this.F=null},et.prototype.K=function(o,c,h,g){return this.i.add(String(o),c,!1,h,g)},et.prototype.L=function(o,c,h,g){return this.i.add(String(o),c,!0,h,g)};function ft(o,c,h,g){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var R=!0,S=0;S<c.length;++S){var $=c[S];if($&&!$.da&&$.capture==h){var It=$.listener,Gt=$.ha||$.src;$.fa&&I(o.i,$),R=It.call(Gt,g)!==!1&&R}}return R&&!g.defaultPrevented}function Xt(o,c,h){if(typeof o=="function")h&&(o=y(o,h));else if(o&&typeof o.handleEvent=="function")o=y(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function zt(o){o.g=Xt(()=>{o.g=null,o.i&&(o.i=!1,zt(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class Te extends Ut{constructor(c,h){super(),this.m=c,this.l=h,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:zt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zt(o){Ut.call(this),this.h=o,this.g={}}P(Zt,Ut);var an=[];function Ur(o){st(o.g,function(c,h){this.g.hasOwnProperty(h)&&U(c)},o),o.g={}}Zt.prototype.N=function(){Zt.aa.N.call(this),Ur(this)},Zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kt=l.JSON.stringify,we=l.JSON.parse,qs=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Po(){}Po.prototype.h=null;function ec(o){return o.h||(o.h=o.i())}function nc(){}var Br={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xo(){Bt.call(this,"d")}P(xo,Bt);function Vo(){Bt.call(this,"c")}P(Vo,Bt);var On={},rc=null;function Hs(){return rc=rc||new et}On.La="serverreachability";function sc(o){Bt.call(this,On.La,o)}P(sc,Bt);function $r(o){const c=Hs();ct(c,new sc(c))}On.STAT_EVENT="statevent";function ic(o,c){Bt.call(this,On.STAT_EVENT,o),this.stat=c}P(ic,Bt);function ce(o){const c=Hs();ct(c,new ic(c,o))}On.Ma="timingevent";function oc(o,c){Bt.call(this,On.Ma,o),this.size=c}P(oc,Bt);function jr(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function qr(){this.g=!0}qr.prototype.xa=function(){this.g=!1};function Yp(o,c,h,g,R,S){o.info(function(){if(o.g)if(S)for(var $="",It=S.split("&"),Gt=0;Gt<It.length;Gt++){var mt=It[Gt].split("=");if(1<mt.length){var te=mt[0];mt=mt[1];var ee=te.split("_");$=2<=ee.length&&ee[1]=="type"?$+(te+"="+mt+"&"):$+(te+"=redacted&")}}else $=null;else $=S;return"XMLHTTP REQ ("+g+") [attempt "+R+"]: "+c+`
`+h+`
`+$})}function Jp(o,c,h,g,R,S,$){o.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+R+"]: "+c+`
`+h+`
`+S+" "+$})}function ir(o,c,h,g){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+Zp(o,h)+(g?" "+g:"")})}function Xp(o,c){o.info(function(){return"TIMEOUT: "+c})}qr.prototype.info=function(){};function Zp(o,c){if(!o.g)return c;if(!c)return null;try{var h=JSON.parse(c);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var g=h[o];if(!(2>g.length)){var R=g[1];if(Array.isArray(R)&&!(1>R.length)){var S=R[0];if(S!="noop"&&S!="stop"&&S!="close")for(var $=1;$<R.length;$++)R[$]=""}}}}return Kt(h)}catch{return c}}var zs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ac={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Do;function Ks(){}P(Ks,Po),Ks.prototype.g=function(){return new XMLHttpRequest},Ks.prototype.i=function(){return{}},Do=new Ks;function ln(o,c,h,g){this.j=o,this.i=c,this.l=h,this.R=g||1,this.U=new Zt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lc}function lc(){this.i=null,this.g="",this.h=!1}var cc={},ko={};function No(o,c,h){o.L=1,o.v=Ys(Ge(c)),o.m=h,o.P=!0,uc(o,null)}function uc(o,c){o.F=Date.now(),Gs(o),o.A=Ge(o.v);var h=o.A,g=o.R;Array.isArray(g)||(g=[String(g)]),Ac(h.i,"t",g),o.C=0,h=o.j.J,o.h=new lc,o.g=jc(o.j,h?c:null,!o.m),0<o.O&&(o.M=new Te(y(o.Y,o,o.g),o.O)),c=o.U,h=o.g,g=o.ca;var R="readystatechange";Array.isArray(R)||(R&&(an[0]=R.toString()),R=an);for(var S=0;S<R.length;S++){var $=O(h,R[S],g||c.handleEvent,!1,c.h||c);if(!$)break;c.g[$.key]=$}c=o.H?v(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),$r(),Yp(o.i,o.u,o.A,o.l,o.R,o.m)}ln.prototype.ca=function(o){o=o.target;const c=this.M;c&&We(o)==3?c.j():this.Y(o)},ln.prototype.Y=function(o){try{if(o==this.g)t:{const ee=We(this.g);var c=this.g.Ba();const lr=this.g.Z();if(!(3>ee)&&(ee!=3||this.g&&(this.h.h||this.g.oa()||Vc(this.g)))){this.J||ee!=4||c==7||(c==8||0>=lr?$r(3):$r(2)),Oo(this);var h=this.g.Z();this.X=h;e:if(hc(this)){var g=Vc(this.g);o="";var R=g.length,S=We(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mn(this),Hr(this);var $="";break e}this.h.i=new l.TextDecoder}for(c=0;c<R;c++)this.h.h=!0,o+=this.h.i.decode(g[c],{stream:!(S&&c==R-1)});g.length=0,this.h.g+=o,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=h==200,Jp(this.i,this.u,this.A,this.l,this.R,ee,h),this.o){if(this.T&&!this.K){e:{if(this.g){var It,Gt=this.g;if((It=Gt.g?Gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(It)){var mt=It;break e}}mt=null}if(h=mt)ir(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mo(this,h);else{this.o=!1,this.s=3,ce(12),Mn(this),Hr(this);break t}}if(this.P){h=!0;let Pe;for(;!this.J&&this.C<$.length;)if(Pe=tg(this,$),Pe==ko){ee==4&&(this.s=4,ce(14),h=!1),ir(this.i,this.l,null,"[Incomplete Response]");break}else if(Pe==cc){this.s=4,ce(15),ir(this.i,this.l,$,"[Invalid Chunk]"),h=!1;break}else ir(this.i,this.l,Pe,null),Mo(this,Pe);if(hc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ee!=4||$.length!=0||this.h.h||(this.s=1,ce(16),h=!1),this.o=this.o&&h,!h)ir(this.i,this.l,$,"[Invalid Chunked Response]"),Mn(this),Hr(this);else if(0<$.length&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.ba&&!te.M&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),jo(te),te.M=!0,ce(11))}}else ir(this.i,this.l,$,null),Mo(this,$);ee==4&&Mn(this),this.o&&!this.J&&(ee==4?Fc(this.j,this):(this.o=!1,Gs(this)))}else _g(this.g),h==400&&0<$.indexOf("Unknown SID")?(this.s=3,ce(12)):(this.s=0,ce(13)),Mn(this),Hr(this)}}}catch{}finally{}};function hc(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function tg(o,c){var h=o.C,g=c.indexOf(`
`,h);return g==-1?ko:(h=Number(c.substring(h,g)),isNaN(h)?cc:(g+=1,g+h>c.length?ko:(c=c.slice(g,g+h),o.C=g+h,c)))}ln.prototype.cancel=function(){this.J=!0,Mn(this)};function Gs(o){o.S=Date.now()+o.I,fc(o,o.I)}function fc(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=jr(y(o.ba,o),c)}function Oo(o){o.B&&(l.clearTimeout(o.B),o.B=null)}ln.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Xp(this.i,this.A),this.L!=2&&($r(),ce(17)),Mn(this),this.s=2,Hr(this)):fc(this,this.S-o)};function Hr(o){o.j.G==0||o.J||Fc(o.j,o)}function Mn(o){Oo(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Ur(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function Mo(o,c){try{var h=o.j;if(h.G!=0&&(h.g==o||Lo(h.h,o))){if(!o.K&&Lo(h.h,o)&&h.G==3){try{var g=h.Da.g.parse(c)}catch{g=null}if(Array.isArray(g)&&g.length==3){var R=g;if(R[0]==0){t:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)ni(h),ti(h);else break t;$o(h),ce(18)}}else h.za=R[1],0<h.za-h.T&&37500>R[2]&&h.F&&h.v==0&&!h.C&&(h.C=jr(y(h.Za,h),6e3));if(1>=gc(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Fn(h,11)}else if((o.K||h.g==o)&&ni(h),!G(c))for(R=h.Da.g.parse(c),c=0;c<R.length;c++){let mt=R[c];if(h.T=mt[0],mt=mt[1],h.G==2)if(mt[0]=="c"){h.K=mt[1],h.ia=mt[2];const te=mt[3];te!=null&&(h.la=te,h.j.info("VER="+h.la));const ee=mt[4];ee!=null&&(h.Aa=ee,h.j.info("SVER="+h.Aa));const lr=mt[5];lr!=null&&typeof lr=="number"&&0<lr&&(g=1.5*lr,h.L=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;const Pe=o.g;if(Pe){const si=Pe.g?Pe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(si){var S=g.h;S.g||si.indexOf("spdy")==-1&&si.indexOf("quic")==-1&&si.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Fo(S,S.h),S.h=null))}if(g.D){const qo=Pe.g?Pe.g.getResponseHeader("X-HTTP-Session-Id"):null;qo&&(g.ya=qo,Rt(g.I,g.D,qo))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),g=h;var $=o;if(g.qa=$c(g,g.J?g.ia:null,g.W),$.K){mc(g.h,$);var It=$,Gt=g.L;Gt&&(It.I=Gt),It.B&&(Oo(It),Gs(It)),g.g=$}else Mc(g);0<h.i.length&&ei(h)}else mt[0]!="stop"&&mt[0]!="close"||Fn(h,7);else h.G==3&&(mt[0]=="stop"||mt[0]=="close"?mt[0]=="stop"?Fn(h,7):Bo(h):mt[0]!="noop"&&h.l&&h.l.ta(mt),h.v=0)}}$r(4)}catch{}}var eg=class{constructor(o,c){this.g=o,this.map=c}};function dc(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pc(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function gc(o){return o.h?1:o.g?o.g.size:0}function Lo(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function Fo(o,c){o.g?o.g.add(c):o.h=c}function mc(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}dc.prototype.cancel=function(){if(this.i=_c(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function _c(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const h of o.g.values())c=c.concat(h.D);return c}return V(o.i)}function ng(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],h=o.length,g=0;g<h;g++)c.push(o[g]);return c}c=[],h=0;for(g in o)c[h++]=o[g];return c}function rg(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var h=0;h<o;h++)c.push(h);return c}c=[],h=0;for(const g in o)c[h++]=g;return c}}}function yc(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var h=rg(o),g=ng(o),R=g.length,S=0;S<R;S++)c.call(void 0,g[S],h&&h[S],o)}var vc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sg(o,c){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var g=o[h].indexOf("="),R=null;if(0<=g){var S=o[h].substring(0,g);R=o[h].substring(g+1)}else S=o[h];c(S,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function Ln(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Ln){this.h=o.h,Ws(this,o.j),this.o=o.o,this.g=o.g,Qs(this,o.s),this.l=o.l;var c=o.i,h=new Gr;h.i=c.i,c.g&&(h.g=new Map(c.g),h.h=c.h),Ec(this,h),this.m=o.m}else o&&(c=String(o).match(vc))?(this.h=!1,Ws(this,c[1]||"",!0),this.o=zr(c[2]||""),this.g=zr(c[3]||"",!0),Qs(this,c[4]),this.l=zr(c[5]||"",!0),Ec(this,c[6]||"",!0),this.m=zr(c[7]||"")):(this.h=!1,this.i=new Gr(null,this.h))}Ln.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Kr(c,Tc,!0),":");var h=this.g;return(h||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Kr(c,Tc,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(Kr(h,h.charAt(0)=="/"?ag:og,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",Kr(h,cg)),o.join("")};function Ge(o){return new Ln(o)}function Ws(o,c,h){o.j=h?zr(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Qs(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Ec(o,c,h){c instanceof Gr?(o.i=c,ug(o.i,o.h)):(h||(c=Kr(c,lg)),o.i=new Gr(c,o.h))}function Rt(o,c,h){o.i.set(c,h)}function Ys(o){return Rt(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function zr(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Kr(o,c,h){return typeof o=="string"?(o=encodeURI(o).replace(c,ig),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function ig(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Tc=/[#\/\?@]/g,og=/[#\?:]/g,ag=/[#\?]/g,lg=/[#\?@]/g,cg=/#/g;function Gr(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function cn(o){o.g||(o.g=new Map,o.h=0,o.i&&sg(o.i,function(c,h){o.add(decodeURIComponent(c.replace(/\+/g," ")),h)}))}e=Gr.prototype,e.add=function(o,c){cn(this),this.i=null,o=or(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(c),this.h+=1,this};function wc(o,c){cn(o),c=or(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Ic(o,c){return cn(o),c=or(o,c),o.g.has(c)}e.forEach=function(o,c){cn(this),this.g.forEach(function(h,g){h.forEach(function(R){o.call(c,R,g,this)},this)},this)},e.na=function(){cn(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),h=[];for(let g=0;g<c.length;g++){const R=o[g];for(let S=0;S<R.length;S++)h.push(c[g])}return h},e.V=function(o){cn(this);let c=[];if(typeof o=="string")Ic(this,o)&&(c=c.concat(this.g.get(or(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)c=c.concat(o[h])}return c},e.set=function(o,c){return cn(this),this.i=null,o=or(this,o),Ic(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function Ac(o,c,h){wc(o,c),0<h.length&&(o.i=null,o.g.set(or(o,c),V(h)),o.h+=h.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var h=0;h<c.length;h++){var g=c[h];const S=encodeURIComponent(String(g)),$=this.V(g);for(g=0;g<$.length;g++){var R=S;$[g]!==""&&(R+="="+encodeURIComponent(String($[g]))),o.push(R)}}return this.i=o.join("&")};function or(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function ug(o,c){c&&!o.j&&(cn(o),o.i=null,o.g.forEach(function(h,g){var R=g.toLowerCase();g!=R&&(wc(this,g),Ac(this,R,h))},o)),o.j=c}function hg(o,c){const h=new qr;if(l.Image){const g=new Image;g.onload=C(un,h,"TestLoadImage: loaded",!0,c,g),g.onerror=C(un,h,"TestLoadImage: error",!1,c,g),g.onabort=C(un,h,"TestLoadImage: abort",!1,c,g),g.ontimeout=C(un,h,"TestLoadImage: timeout",!1,c,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=o}else c(!1)}function fg(o,c){const h=new qr,g=new AbortController,R=setTimeout(()=>{g.abort(),un(h,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:g.signal}).then(S=>{clearTimeout(R),S.ok?un(h,"TestPingServer: ok",!0,c):un(h,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(R),un(h,"TestPingServer: error",!1,c)})}function un(o,c,h,g,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),g(h)}catch{}}function dg(){this.g=new qs}function pg(o,c,h){const g=h||"";try{yc(o,function(R,S){let $=R;f(R)&&($=Kt(R)),c.push(g+S+"="+encodeURIComponent($))})}catch(R){throw c.push(g+"type="+encodeURIComponent("_badmap")),R}}function Js(o){this.l=o.Ub||null,this.j=o.eb||!1}P(Js,Po),Js.prototype.g=function(){return new Xs(this.l,this.j)},Js.prototype.i=function(o){return function(){return o}}({});function Xs(o,c){et.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Xs,et),e=Xs.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Qr(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wr(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Qr(this)),this.g&&(this.readyState=3,Qr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bc(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function bc(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Wr(this):Qr(this),this.readyState==3&&bc(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,Wr(this))},e.Qa=function(o){this.g&&(this.response=o,Wr(this))},e.ga=function(){this.g&&Wr(this)};function Wr(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Qr(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var h=c.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=c.next();return o.join(`\r
`)};function Qr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Xs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Cc(o){let c="";return st(o,function(h,g){c+=g,c+=":",c+=h,c+=`\r
`}),c}function Uo(o,c,h){t:{for(g in h){var g=!1;break t}g=!0}g||(h=Cc(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):Rt(o,c,h))}function kt(o){et.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(kt,et);var gg=/^https?$/i,mg=["POST","PUT"];e=kt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Do.g(),this.v=this.o?ec(this.o):ec(Do),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(S){Rc(this,S);return}if(o=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var R in g)h.set(R,g[R]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const S of g.keys())h.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(S=>S.toLowerCase()=="content-type"),R=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(mg,c,void 0))||g||R||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[S,$]of h)this.g.setRequestHeader(S,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xc(this),this.u=!0,this.g.send(o),this.u=!1}catch(S){Rc(this,S)}};function Rc(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,Sc(o),Zs(o)}function Sc(o){o.A||(o.A=!0,ct(o,"complete"),ct(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ct(this,"complete"),ct(this,"abort"),Zs(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zs(this,!0)),kt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Pc(this):this.bb())},e.bb=function(){Pc(this)};function Pc(o){if(o.h&&typeof a<"u"&&(!o.v[1]||We(o)!=4||o.Z()!=2)){if(o.u&&We(o)==4)Xt(o.Ea,0,o);else if(ct(o,"readystatechange"),We(o)==4){o.h=!1;try{const $=o.Z();t:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var h;if(!(h=c)){var g;if(g=$===0){var R=String(o.D).match(vc)[1]||null;!R&&l.self&&l.self.location&&(R=l.self.location.protocol.slice(0,-1)),g=!gg.test(R?R.toLowerCase():"")}h=g}if(h)ct(o,"complete"),ct(o,"success");else{o.m=6;try{var S=2<We(o)?o.g.statusText:""}catch{S=""}o.l=S+" ["+o.Z()+"]",Sc(o)}}finally{Zs(o)}}}}function Zs(o,c){if(o.g){xc(o);const h=o.g,g=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||ct(o,"ready");try{h.onreadystatechange=g}catch{}}}function xc(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function We(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<We(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),we(c)}};function Vc(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function _g(o){const c={};o=(o.g&&2<=We(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<o.length;g++){if(G(o[g]))continue;var h=w(o[g]);const R=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const S=c[R]||[];c[R]=S,S.push(h)}A(c,function(g){return g.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yr(o,c,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||c}function Dc(o){this.Aa=0,this.i=[],this.j=new qr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yr("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yr("baseRetryDelayMs",5e3,o),this.cb=Yr("retryDelaySeedMs",1e4,o),this.Wa=Yr("forwardChannelMaxRetries",2,o),this.wa=Yr("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new dc(o&&o.concurrentRequestLimit),this.Da=new dg,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Dc.prototype,e.la=8,e.G=1,e.connect=function(o,c,h,g){ce(0),this.W=o,this.H=c||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.I=$c(this,null,this.W),ei(this)};function Bo(o){if(kc(o),o.G==3){var c=o.U++,h=Ge(o.I);if(Rt(h,"SID",o.K),Rt(h,"RID",c),Rt(h,"TYPE","terminate"),Jr(o,h),c=new ln(o,o.j,c),c.L=2,c.v=Ys(Ge(h)),h=!1,l.navigator&&l.navigator.sendBeacon)try{h=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!h&&l.Image&&(new Image().src=c.v,h=!0),h||(c.g=jc(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Gs(c)}Bc(o)}function ti(o){o.g&&(jo(o),o.g.cancel(),o.g=null)}function kc(o){ti(o),o.u&&(l.clearTimeout(o.u),o.u=null),ni(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function ei(o){if(!pc(o.h)&&!o.s){o.s=!0;var c=o.Ga;wt||Dn(),gt||(wt(),gt=!0),Se.add(c,o),o.B=0}}function yg(o,c){return gc(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=jr(y(o.Ga,o,c),Uc(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const R=new ln(this,this.j,o);let S=this.o;if(this.S&&(S?(S=v(S),_(S,this.S)):S=this.S),this.m!==null||this.O||(R.H=S,S=null),this.P)t:{for(var c=0,h=0;h<this.i.length;h++){e:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break e}g=void 0}if(g===void 0)break;if(c+=g,4096<c){c=h;break t}if(c===4096||h===this.i.length-1){c=h+1;break t}}c=1e3}else c=1e3;c=Oc(this,R,c),h=Ge(this.I),Rt(h,"RID",o),Rt(h,"CVER",22),this.D&&Rt(h,"X-HTTP-Session-Id",this.D),Jr(this,h),S&&(this.O?c="headers="+encodeURIComponent(String(Cc(S)))+"&"+c:this.m&&Uo(h,this.m,S)),Fo(this.h,R),this.Ua&&Rt(h,"TYPE","init"),this.P?(Rt(h,"$req",c),Rt(h,"SID","null"),R.T=!0,No(R,h,null)):No(R,h,c),this.G=2}}else this.G==3&&(o?Nc(this,o):this.i.length==0||pc(this.h)||Nc(this))};function Nc(o,c){var h;c?h=c.l:h=o.U++;const g=Ge(o.I);Rt(g,"SID",o.K),Rt(g,"RID",h),Rt(g,"AID",o.T),Jr(o,g),o.m&&o.o&&Uo(g,o.m,o.o),h=new ln(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),c&&(o.i=c.D.concat(o.i)),c=Oc(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Fo(o.h,h),No(h,g,c)}function Jr(o,c){o.H&&st(o.H,function(h,g){Rt(c,g,h)}),o.l&&yc({},function(h,g){Rt(c,g,h)})}function Oc(o,c,h){h=Math.min(o.i.length,h);var g=o.l?y(o.l.Na,o.l,o):null;t:{var R=o.i;let S=-1;for(;;){const $=["count="+h];S==-1?0<h?(S=R[0].g,$.push("ofs="+S)):S=0:$.push("ofs="+S);let It=!0;for(let Gt=0;Gt<h;Gt++){let mt=R[Gt].g;const te=R[Gt].map;if(mt-=S,0>mt)S=Math.max(0,R[Gt].g-100),It=!1;else try{pg(te,$,"req"+mt+"_")}catch{g&&g(te)}}if(It){g=$.join("&");break t}}}return o=o.i.splice(0,h),c.D=o,g}function Mc(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;wt||Dn(),gt||(wt(),gt=!0),Se.add(c,o),o.v=0}}function $o(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=jr(y(o.Fa,o),Uc(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Lc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=jr(y(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ce(10),ti(this),Lc(this))};function jo(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Lc(o){o.g=new ln(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=Ge(o.qa);Rt(c,"RID","rpc"),Rt(c,"SID",o.K),Rt(c,"AID",o.T),Rt(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Rt(c,"TO",o.ja),Rt(c,"TYPE","xmlhttp"),Jr(o,c),o.m&&o.o&&Uo(c,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=Ys(Ge(c)),h.m=null,h.P=!0,uc(h,o)}e.Za=function(){this.C!=null&&(this.C=null,ti(this),$o(this),ce(19))};function ni(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Fc(o,c){var h=null;if(o.g==c){ni(o),jo(o),o.g=null;var g=2}else if(Lo(o.h,c))h=c.D,mc(o.h,c),g=1;else return;if(o.G!=0){if(c.o)if(g==1){h=c.m?c.m.length:0,c=Date.now()-c.F;var R=o.B;g=Hs(),ct(g,new oc(g,h)),ei(o)}else Mc(o);else if(R=c.s,R==3||R==0&&0<c.X||!(g==1&&yg(o,c)||g==2&&$o(o)))switch(h&&0<h.length&&(c=o.h,c.i=c.i.concat(h)),R){case 1:Fn(o,5);break;case 4:Fn(o,10);break;case 3:Fn(o,6);break;default:Fn(o,2)}}}function Uc(o,c){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*c}function Fn(o,c){if(o.j.info("Error code "+c),c==2){var h=y(o.fb,o),g=o.Xa;const R=!g;g=new Ln(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ws(g,"https"),Ys(g),R?hg(g.toString(),h):fg(g.toString(),h)}else ce(2);o.G=0,o.l&&o.l.sa(c),Bc(o),kc(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),ce(2)):(this.j.info("Failed to ping google.com"),ce(1))};function Bc(o){if(o.G=0,o.ka=[],o.l){const c=_c(o.h);(c.length!=0||o.i.length!=0)&&(N(o.ka,c),N(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function $c(o,c,h){var g=h instanceof Ln?Ge(h):new Ln(h);if(g.g!="")c&&(g.g=c+"."+g.g),Qs(g,g.s);else{var R=l.location;g=R.protocol,c=c?c+"."+R.hostname:R.hostname,R=+R.port;var S=new Ln(null);g&&Ws(S,g),c&&(S.g=c),R&&Qs(S,R),h&&(S.l=h),g=S}return h=o.D,c=o.ya,h&&c&&Rt(g,h,c),Rt(g,"VER",o.la),Jr(o,g),g}function jc(o,c,h){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new kt(new Js({eb:h})):new kt(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function qc(){}e=qc.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function ri(){}ri.prototype.g=function(o,c){return new _e(o,c)};function _e(o,c){et.call(this),this.g=new Dc(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!G(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!G(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new ar(this)}P(_e,et),_e.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_e.prototype.close=function(){Bo(this.g)},_e.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=Kt(o),o=h);c.i.push(new eg(c.Ya++,o)),c.G==3&&ei(c)},_e.prototype.N=function(){this.g.l=null,delete this.j,Bo(this.g),delete this.g,_e.aa.N.call(this)};function Hc(o){xo.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const h in c){o=h;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}P(Hc,xo);function zc(){Vo.call(this),this.status=1}P(zc,Vo);function ar(o){this.g=o}P(ar,qc),ar.prototype.ua=function(){ct(this.g,"a")},ar.prototype.ta=function(o){ct(this.g,new Hc(o))},ar.prototype.sa=function(o){ct(this.g,new zc)},ar.prototype.ra=function(){ct(this.g,"b")},ri.prototype.createWebChannel=ri.prototype.g,_e.prototype.send=_e.prototype.o,_e.prototype.open=_e.prototype.m,_e.prototype.close=_e.prototype.close,wd=function(){return new ri},Td=function(){return Hs()},Ed=On,Oa={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zs.NO_ERROR=0,zs.TIMEOUT=8,zs.HTTP_ERROR=6,Ai=zs,ac.COMPLETE="complete",vd=ac,nc.EventType=Br,Br.OPEN="a",Br.CLOSE="b",Br.ERROR="c",Br.MESSAGE="d",et.prototype.listen=et.prototype.K,rs=nc,kt.prototype.listenOnce=kt.prototype.L,kt.prototype.getLastError=kt.prototype.Ka,kt.prototype.getLastErrorCode=kt.prototype.Ba,kt.prototype.getStatus=kt.prototype.Z,kt.prototype.getResponseJson=kt.prototype.Oa,kt.prototype.getResponseText=kt.prototype.oa,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Ha,yd=kt}).apply(typeof hi<"u"?hi:typeof self<"u"?self:typeof window<"u"?window:{});const qu="@firebase/firestore",Hu="4.7.14";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}re.UNAUTHENTICATED=new re(null),re.GOOGLE_CREDENTIALS=new re("google-credentials-uid"),re.FIRST_PARTY=new re("first-party-uid"),re.MOCK_USER=new re("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dr="11.7.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn=new hd("@firebase/firestore");function hr(){return Jn.logLevel}function Q(e,...t){if(Jn.logLevel<=pt.DEBUG){const n=t.map(Tl);Jn.debug(`Firestore (${Dr}): ${e}`,...n)}}function rn(e,...t){if(Jn.logLevel<=pt.ERROR){const n=t.map(Tl);Jn.error(`Firestore (${Dr}): ${e}`,...n)}}function Ar(e,...t){if(Jn.logLevel<=pt.WARN){const n=t.map(Tl);Jn.warn(`Firestore (${Dr}): ${e}`,...n)}}function Tl(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,Id(e,r,n)}function Id(e,t,n){let r=`FIRESTORE (${Dr}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw rn(r),new Error(r)}function Et(e,t,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,e||Id(t,s,r)}function ot(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Vr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class kv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(re.UNAUTHENTICATED))}shutdown(){}}class Nv{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Ov{constructor(t){this.t=t,this.currentUser=re.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Et(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Tn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Tn,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;t.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Tn)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et(typeof r.accessToken=="string",31837,{l:r}),new Ad(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Et(t===null||typeof t=="string",2055,{h:t}),new re(t)}}class Mv{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=re.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Lv{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new Mv(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(re.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zu{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Fv{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yv(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Et(this.o===void 0,3512);const r=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>r(i))};const s=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new zu(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Et(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new zu(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Uv(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%62))}return r}}function ut(e,t){return e<t?-1:e>t?1:0}function Ma(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return ut(r,s);{const i=bd(),a=Bv(i.encode(Ku(e,n)),i.encode(Ku(t,n)));return a!==0?a:ut(r,s)}}n+=r>65535?2:1}return ut(e.length,t.length)}function Ku(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Bv(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return ut(e[n],t[n]);return ut(e.length,t.length)}function br(e,t,n){return e.length===t.length&&e.every((r,s)=>n(r,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu=-62135596800,Wu=1e6;class $t{static now(){return $t.fromMillis(Date.now())}static fromDate(t){return $t.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*Wu);return new $t(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Y(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Gu)throw new Y(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Y(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Wu}_compareTo(t){return this.seconds===t.seconds?ut(this.nanoseconds,t.nanoseconds):ut(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-Gu;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{static fromTimestamp(t){return new it(t)}static min(){return new it(new $t(0,0))}static max(){return new it(new $t(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu="__name__";class Le{constructor(t,n,r){n===void 0?n=0:n>t.length&&nt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&nt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Le.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Le?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=Le.compareSegments(t.get(s),n.get(s));if(i!==0)return i}return ut(t.length,n.length)}static compareSegments(t,n){const r=Le.isNumericId(t),s=Le.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Le.extractNumericId(t).compare(Le.extractNumericId(n)):Ma(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return En.fromString(t.substring(4,t.length-2))}}class Pt extends Le{construct(t,n,r){return new Pt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Y(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Pt(n)}static emptyPath(){return new Pt([])}}const $v=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends Le{construct(t,n,r){return new Yt(t,n,r)}static isValidIdentifier(t){return $v.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Qu}static keyField(){return new Yt([Qu])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y(k.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new Y(k.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Y(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new Y(k.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Yt(n)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(t){this.path=t}static fromPath(t){return new Z(Pt.fromString(t))}static fromName(t){return new Z(Pt.fromString(t).popFirst(5))}static empty(){return new Z(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Pt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Pt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Z(new Pt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=-1;function jv(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=it.fromTimestamp(r===1e9?new $t(n+1,0):new $t(n,r));return new Cn(s,Z.empty(),t)}function qv(e){return new Cn(e.readTime,e.key,Rs)}class Cn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Cn(it.min(),Z.empty(),Rs)}static max(){return new Cn(it.max(),Z.empty(),Rs)}}function Hv(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Z.comparator(e.documentKey,t.documentKey),n!==0?n:ut(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Kv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kr(e){if(e.code!==k.FAILED_PRECONDITION||e.message!==zv)throw e;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&nt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new D((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof D?n:D.resolve(n)}catch(n){return D.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):D.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):D.reject(n)}static resolve(t){return new D((n,r)=>{n(t)})}static reject(t){return new D((n,r)=>{r(t)})}static waitFor(t){return new D((n,r)=>{let s=0,i=0,a=!1;t.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(t){let n=D.resolve(!1);for(const r of t)n=n.next(s=>s?D.resolve(s):r());return n}static forEach(t,n){const r=[];return t.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(t,n){return new D((r,s)=>{const i=t.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const f=u;n(t[f]).next(d=>{a[f]=d,++l,l===i&&r(a)},d=>s(d))}})}static doWhile(t,n){return new D((r,s)=>{const i=()=>{t()===!0?n().next(()=>{i()},s):r()};i()})}}function Gv(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Nr(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}po.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl=-1;function go(e){return e==null}function Hi(e){return e===0&&1/e==-1/0}function Wv(e){return typeof e=="number"&&Number.isInteger(e)&&!Hi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd="";function Qv(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Yu(t)),t=Yv(e.get(n),t);return Yu(t)}function Yv(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const i=e.charAt(s);switch(i){case"\0":n+="";break;case Rd:n+="";break;default:n+=i}}return n}function Yu(e){return e+Rd+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function tr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Sd(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(t,n){this.comparator=t,this.root=n||Wt.EMPTY}insert(t,n){return new Dt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(t){return new Dt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new fi(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new fi(this.root,t,this.comparator,!1)}getReverseIterator(){return new fi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new fi(this.root,t,this.comparator,!0)}}class fi{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Wt{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??Wt.RED,this.left=s??Wt.EMPTY,this.right=i??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new Wt(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Wt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw nt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw nt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw nt(27949);return t+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw nt(57766)}get value(){throw nt(16141)}get color(){throw nt(16727)}get left(){throw nt(29726)}get right(){throw nt(36894)}copy(t,n,r,s,i){return this}insert(t,n,r){return new Wt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(t){this.comparator=t,this.data=new Dt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xu(this.data.getIterator())}getIteratorFrom(t){return new Xu(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof jt)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new jt(this.comparator);return n.data=t,n}}class Xu{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(t){this.fields=t,t.sort(Yt.comparator)}static empty(){return new xe([])}unionWith(t){let n=new jt(Yt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new xe(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return br(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Pd("Invalid base64 string: "+i):i}}(t);return new Jt(n)}static fromUint8Array(t){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(t);return new Jt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ut(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Jt.EMPTY_BYTE_STRING=new Jt("");const Jv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rn(e){if(Et(!!e,39018),typeof e=="string"){let t=0;const n=Jv.exec(e);if(Et(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ot(e.seconds),nanos:Ot(e.nanos)}}function Ot(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Sn(e){return typeof e=="string"?Jt.fromBase64String(e):Jt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd="server_timestamp",Vd="__type__",Dd="__previous_value__",kd="__local_write_time__";function Il(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Vd])===null||n===void 0?void 0:n.stringValue)===xd}function mo(e){const t=e.mapValue.fields[Dd];return Il(t)?mo(t):t}function Ss(e){const t=Rn(e.mapValue.fields[kd].timestampValue);return new $t(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(t,n,r,s,i,a,l,u,f,d){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f,this.isUsingEmulator=d}}const zi="(default)";class Ps{constructor(t,n){this.projectId=t,this.database=n||zi}static empty(){return new Ps("","")}get isDefaultDatabase(){return this.database===zi}isEqual(t){return t instanceof Ps&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd="__type__",Zv="__max__",di={mapValue:{}},Od="__vector__",Ki="value";function Pn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Il(e)?4:e0(e)?9007199254740991:t0(e)?10:11:nt(28295,{value:e})}function He(e,t){if(e===t)return!0;const n=Pn(e);if(n!==Pn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ss(e).isEqual(Ss(t));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Rn(s.timestampValue),l=Rn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,i){return Sn(s.bytesValue).isEqual(Sn(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,i){return Ot(s.geoPointValue.latitude)===Ot(i.geoPointValue.latitude)&&Ot(s.geoPointValue.longitude)===Ot(i.geoPointValue.longitude)}(e,t);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ot(s.integerValue)===Ot(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Ot(s.doubleValue),l=Ot(i.doubleValue);return a===l?Hi(a)===Hi(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return br(e.arrayValue.values||[],t.arrayValue.values||[],He);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Ju(a)!==Ju(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!He(a[u],l[u])))return!1;return!0}(e,t);default:return nt(52216,{left:e})}}function xs(e,t){return(e.values||[]).find(n=>He(n,t))!==void 0}function Cr(e,t){if(e===t)return 0;const n=Pn(e),r=Pn(t);if(n!==r)return ut(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ut(e.booleanValue,t.booleanValue);case 2:return function(i,a){const l=Ot(i.integerValue||i.doubleValue),u=Ot(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return Zu(e.timestampValue,t.timestampValue);case 4:return Zu(Ss(e),Ss(t));case 5:return Ma(e.stringValue,t.stringValue);case 6:return function(i,a){const l=Sn(i),u=Sn(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(i,a){const l=i.split("/"),u=a.split("/");for(let f=0;f<l.length&&f<u.length;f++){const d=ut(l[f],u[f]);if(d!==0)return d}return ut(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,a){const l=ut(Ot(i.latitude),Ot(a.latitude));return l!==0?l:ut(Ot(i.longitude),Ot(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return th(e.arrayValue,t.arrayValue);case 10:return function(i,a){var l,u,f,d;const p=i.fields||{},y=a.fields||{},C=(l=p[Ki])===null||l===void 0?void 0:l.arrayValue,P=(u=y[Ki])===null||u===void 0?void 0:u.arrayValue,V=ut(((f=C==null?void 0:C.values)===null||f===void 0?void 0:f.length)||0,((d=P==null?void 0:P.values)===null||d===void 0?void 0:d.length)||0);return V!==0?V:th(C,P)}(e.mapValue,t.mapValue);case 11:return function(i,a){if(i===di.mapValue&&a===di.mapValue)return 0;if(i===di.mapValue)return 1;if(a===di.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),f=a.fields||{},d=Object.keys(f);u.sort(),d.sort();for(let p=0;p<u.length&&p<d.length;++p){const y=Ma(u[p],d[p]);if(y!==0)return y;const C=Cr(l[u[p]],f[d[p]]);if(C!==0)return C}return ut(u.length,d.length)}(e.mapValue,t.mapValue);default:throw nt(23264,{Pe:n})}}function Zu(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ut(e,t);const n=Rn(e),r=Rn(t),s=ut(n.seconds,r.seconds);return s!==0?s:ut(n.nanos,r.nanos)}function th(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Cr(n[s],r[s]);if(i)return i}return ut(n.length,r.length)}function Rr(e){return La(e)}function La(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Rn(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Sn(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Z.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=La(i);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${La(n.fields[a])}`;return s+"}"}(e.mapValue):nt(61005,{value:e})}function bi(e){switch(Pn(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=mo(e);return t?16+bi(t):16;case 5:return 2*e.stringValue.length;case 6:return Sn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+bi(i),0)}(e.arrayValue);case 10:case 11:return function(r){let s=0;return tr(r.fields,(i,a)=>{s+=i.length+bi(a)}),s}(e.mapValue);default:throw nt(13486,{value:e})}}function eh(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Fa(e){return!!e&&"integerValue"in e}function Al(e){return!!e&&"arrayValue"in e}function nh(e){return!!e&&"nullValue"in e}function rh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ci(e){return!!e&&"mapValue"in e}function t0(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Nd])===null||n===void 0?void 0:n.stringValue)===Od}function ps(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return tr(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=ps(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ps(e.arrayValue.values[n]);return t}return Object.assign({},e)}function e0(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Zv}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t){this.value=t}static empty(){return new be({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Ci(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=ps(n)}setAll(t){let n=Yt.emptyPath(),r={},s=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=ps(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());Ci(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return He(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];Ci(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){tr(n,(s,i)=>t[s]=i);for(const s of r)delete t[s]}clone(){return new be(ps(this.value))}}function Md(e){const t=[];return tr(e.fields,(n,r)=>{const s=new Yt([n]);if(Ci(r)){const i=Md(r.mapValue).fields;if(i.length===0)t.push(s);else for(const a of i)t.push(s.child(a))}else t.push(s)}),new xe(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t,n,r,s,i,a,l){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(t){return new ie(t,0,it.min(),it.min(),it.min(),be.empty(),0)}static newFoundDocument(t,n,r,s){return new ie(t,1,n,it.min(),r,s,0)}static newNoDocument(t,n){return new ie(t,2,n,it.min(),it.min(),be.empty(),0)}static newUnknownDocument(t,n){return new ie(t,3,n,it.min(),it.min(),be.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(it.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=be.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=be.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=it.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ie&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ie(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(t,n){this.position=t,this.inclusive=n}}function sh(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(i.field.isKeyField()?r=Z.comparator(Z.fromName(a.referenceValue),n.key):r=Cr(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ih(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!He(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(t,n="asc"){this.field=t,this.dir=n}}function n0(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{}class Ft extends Ld{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new s0(t,n,r):n==="array-contains"?new a0(t,r):n==="in"?new l0(t,r):n==="not-in"?new c0(t,r):n==="array-contains-any"?new u0(t,r):new Ft(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new i0(t,r):new o0(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Cr(n,this.value)):n!==null&&Pn(this.value)===Pn(n)&&this.matchesComparison(Cr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return nt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ke extends Ld{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new ke(t,n)}matches(t){return Fd(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Fd(e){return e.op==="and"}function Ud(e){return r0(e)&&Fd(e)}function r0(e){for(const t of e.filters)if(t instanceof ke)return!1;return!0}function Ua(e){if(e instanceof Ft)return e.field.canonicalString()+e.op.toString()+Rr(e.value);if(Ud(e))return e.filters.map(t=>Ua(t)).join(",");{const t=e.filters.map(n=>Ua(n)).join(",");return`${e.op}(${t})`}}function Bd(e,t){return e instanceof Ft?function(r,s){return s instanceof Ft&&r.op===s.op&&r.field.isEqual(s.field)&&He(r.value,s.value)}(e,t):e instanceof ke?function(r,s){return s instanceof ke&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&Bd(a,s.filters[l]),!0):!1}(e,t):void nt(19439)}function $d(e){return e instanceof Ft?function(n){return`${n.field.canonicalString()} ${n.op} ${Rr(n.value)}`}(e):e instanceof ke?function(n){return n.op.toString()+" {"+n.getFilters().map($d).join(" ,")+"}"}(e):"Filter"}class s0 extends Ft{constructor(t,n,r){super(t,n,r),this.key=Z.fromName(r.referenceValue)}matches(t){const n=Z.comparator(t.key,this.key);return this.matchesComparison(n)}}class i0 extends Ft{constructor(t,n){super(t,"in",n),this.keys=jd("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class o0 extends Ft{constructor(t,n){super(t,"not-in",n),this.keys=jd("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function jd(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class a0 extends Ft{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Al(n)&&xs(n.arrayValue,this.value)}}class l0 extends Ft{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&xs(this.value.arrayValue,n)}}class c0 extends Ft{constructor(t,n){super(t,"not-in",n)}matches(t){if(xs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!xs(this.value.arrayValue,n)}}class u0 extends Ft{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Al(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>xs(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(t,n=null,r=[],s=[],i=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Ie=null}}function oh(e,t=null,n=[],r=[],s=null,i=null,a=null){return new h0(e,t,n,r,s,i,a)}function bl(e){const t=ot(e);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>Ua(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),go(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Rr(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Rr(r)).join(",")),t.Ie=n}return t.Ie}function Cl(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!n0(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Bd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ih(e.startAt,t.startAt)&&ih(e.endAt,t.endAt)}function Ba(e){return Z.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(t,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function f0(e,t,n,r,s,i,a,l){return new Or(e,t,n,r,s,i,a,l)}function qd(e){return new Or(e)}function ah(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Hd(e){return e.collectionGroup!==null}function gs(e){const t=ot(e);if(t.Ee===null){t.Ee=[];const n=new Set;for(const i of t.explicitOrderBy)t.Ee.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new jt(Yt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.Ee.push(new Vs(i,r))}),n.has(Yt.keyField().canonicalString())||t.Ee.push(new Vs(Yt.keyField(),r))}return t.Ee}function Be(e){const t=ot(e);return t.de||(t.de=d0(t,gs(e))),t.de}function d0(e,t){if(e.limitType==="F")return oh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Vs(s.field,i)});const n=e.endAt?new Gi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Gi(e.startAt.position,e.startAt.inclusive):null;return oh(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function $a(e,t){const n=e.filters.concat([t]);return new Or(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ja(e,t,n){return new Or(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function _o(e,t){return Cl(Be(e),Be(t))&&e.limitType===t.limitType}function zd(e){return`${bl(Be(e))}|lt:${e.limitType}`}function fr(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>$d(s)).join(", ")}]`),go(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Rr(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Rr(s)).join(",")),`Target(${r})`}(Be(e))}; limitType=${e.limitType})`}function yo(e,t){return t.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Z.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(e,t)&&function(r,s){for(const i of gs(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(e,t)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(e,t)&&function(r,s){return!(r.startAt&&!function(a,l,u){const f=sh(a,l,u);return a.inclusive?f<=0:f<0}(r.startAt,gs(r),s)||r.endAt&&!function(a,l,u){const f=sh(a,l,u);return a.inclusive?f>=0:f>0}(r.endAt,gs(r),s))}(e,t)}function p0(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Kd(e){return(t,n)=>{let r=!1;for(const s of gs(e)){const i=g0(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function g0(e,t,n){const r=e.field.isKeyField()?Z.comparator(t.key,n.key):function(i,a,l){const u=a.data.field(i),f=l.data.field(i);return u!==null&&f!==null?Cr(u,f):nt(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return nt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){tr(this.inner,(n,r)=>{for(const[s,i]of r)t(s,i)})}isEmpty(){return Sd(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0=new Dt(Z.comparator);function sn(){return m0}const Gd=new Dt(Z.comparator);function ss(...e){let t=Gd;for(const n of e)t=t.insert(n.key,n);return t}function Wd(e){let t=Gd;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Wn(){return ms()}function Qd(){return ms()}function ms(){return new er(e=>e.toString(),(e,t)=>e.isEqual(t))}const _0=new Dt(Z.comparator),y0=new jt(Z.comparator);function ht(...e){let t=y0;for(const n of e)t=t.add(n);return t}const v0=new jt(ut);function E0(){return v0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hi(t)?"-0":t}}function Yd(e){return{integerValue:""+e}}function T0(e,t){return Wv(t)?Yd(t):Rl(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(){this._=void 0}}function w0(e,t,n){return e instanceof Wi?function(s,i){const a={fields:{[Vd]:{stringValue:xd},[kd]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Il(i)&&(i=mo(i)),i&&(a.fields[Dd]=i),{mapValue:a}}(n,t):e instanceof Ds?Xd(e,t):e instanceof ks?Zd(e,t):function(s,i){const a=Jd(s,i),l=lh(a)+lh(s.Re);return Fa(a)&&Fa(s.Re)?Yd(l):Rl(s.serializer,l)}(e,t)}function I0(e,t,n){return e instanceof Ds?Xd(e,t):e instanceof ks?Zd(e,t):n}function Jd(e,t){return e instanceof Qi?function(r){return Fa(r)||function(i){return!!i&&"doubleValue"in i}(r)}(t)?t:{integerValue:0}:null}class Wi extends vo{}class Ds extends vo{constructor(t){super(),this.elements=t}}function Xd(e,t){const n=tp(t);for(const r of e.elements)n.some(s=>He(s,r))||n.push(r);return{arrayValue:{values:n}}}class ks extends vo{constructor(t){super(),this.elements=t}}function Zd(e,t){let n=tp(t);for(const r of e.elements)n=n.filter(s=>!He(s,r));return{arrayValue:{values:n}}}class Qi extends vo{constructor(t,n){super(),this.serializer=t,this.Re=n}}function lh(e){return Ot(e.integerValue||e.doubleValue)}function tp(e){return Al(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function A0(e,t){return e.field.isEqual(t.field)&&function(r,s){return r instanceof Ds&&s instanceof Ds||r instanceof ks&&s instanceof ks?br(r.elements,s.elements,He):r instanceof Qi&&s instanceof Qi?He(r.Re,s.Re):r instanceof Wi&&s instanceof Wi}(e.transform,t.transform)}class b0{constructor(t,n){this.version=t,this.transformResults=n}}class $e{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new $e}static exists(t){return new $e(void 0,t)}static updateTime(t){return new $e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ri(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Eo{}function ep(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Sl(e.key,$e.none()):new Fs(e.key,e.data,$e.none());{const n=e.data,r=be.empty();let s=new jt(Yt.comparator);for(let i of t.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new nr(e.key,r,new xe(s.toArray()),$e.none())}}function C0(e,t,n){e instanceof Fs?function(s,i,a){const l=s.value.clone(),u=uh(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof nr?function(s,i,a){if(!Ri(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=uh(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(np(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function _s(e,t,n,r){return e instanceof Fs?function(i,a,l,u){if(!Ri(i.precondition,a))return l;const f=i.value.clone(),d=hh(i.fieldTransforms,u,a);return f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(e,t,n,r):e instanceof nr?function(i,a,l,u){if(!Ri(i.precondition,a))return l;const f=hh(i.fieldTransforms,u,a),d=a.data;return d.setAll(np(i)),d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(e,t,n,r):function(i,a,l){return Ri(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function R0(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=Jd(r.transform,s||null);i!=null&&(n===null&&(n=be.empty()),n.set(r.field,i))}return n||null}function ch(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&br(r,s,(i,a)=>A0(i,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Fs extends Eo{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class nr extends Eo{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function np(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function uh(e,t,n){const r=new Map;Et(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,l=t.data.field(i.field);r.set(i.field,I0(a,l,n[s]))}return r}function hh(e,t,n){const r=new Map;for(const s of e){const i=s.transform,a=n.data.field(s.field);r.set(s.field,w0(i,a,t))}return r}class Sl extends Eo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class S0 extends Eo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&C0(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=_s(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=_s(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Qd();return this.mutations.forEach(s=>{const i=t.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=ep(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(it.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ht())}isEqual(t){return this.batchId===t.batchId&&br(this.mutations,t.mutations,(n,r)=>ch(n,r))&&br(this.baseMutations,t.baseMutations,(n,r)=>ch(n,r))}}class Pl{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){Et(t.mutations.length===r.length,58842,{fe:t.mutations.length,ge:r.length});let s=function(){return _0}();const i=t.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Pl(t,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt,dt;function D0(e){switch(e){case k.OK:return nt(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return nt(15467,{code:e})}}function rp(e){if(e===void 0)return rn("GRPC error has no .code"),k.UNKNOWN;switch(e){case Lt.OK:return k.OK;case Lt.CANCELLED:return k.CANCELLED;case Lt.UNKNOWN:return k.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return k.INTERNAL;case Lt.UNAVAILABLE:return k.UNAVAILABLE;case Lt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Lt.NOT_FOUND:return k.NOT_FOUND;case Lt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Lt.ABORTED:return k.ABORTED;case Lt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Lt.DATA_LOSS:return k.DATA_LOSS;default:return nt(39323,{code:e})}}(dt=Lt||(Lt={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=new En([4294967295,4294967295],0);function fh(e){const t=bd().encode(e),n=new _d;return n.update(t),new Uint8Array(n.digest())}function dh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new En([n,r],0),new En([s,i],0)]}class xl{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new is(`Invalid padding: ${n}`);if(r<0)throw new is(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new is(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new is(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*t.length-n,this.ye=En.fromNumber(this.pe)}we(t,n,r){let s=t.add(n.multiply(En.fromNumber(r)));return s.compare(k0)===1&&(s=new En([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const n=fh(t),[r,s]=dh(n);for(let i=0;i<this.hashCount;i++){const a=this.we(r,s,i);if(!this.be(a))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),a=new xl(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(t){if(this.pe===0)return;const n=fh(t),[r,s]=dh(n);for(let i=0;i<this.hashCount;i++){const a=this.we(r,s,i);this.Se(a)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class is extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,Us.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new To(it.min(),s,new Dt(ut),sn(),ht())}}class Us{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Us(r,n,ht(),ht(),ht())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(t,n,r,s){this.De=t,this.removedTargetIds=n,this.key=r,this.ve=s}}class sp{constructor(t,n){this.targetId=t,this.Ce=n}}class ip{constructor(t,n,r=Jt.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ph{constructor(){this.Fe=0,this.Me=gh(),this.xe=Jt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=ht(),n=ht(),r=ht();return this.Me.forEach((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:nt(38017,{changeType:i})}}),new Us(this.xe,this.Oe,t,n,r)}Qe(){this.Ne=!1,this.Me=gh()}$e(t,n){this.Ne=!0,this.Me=this.Me.insert(t,n)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,Et(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class N0{constructor(t){this.ze=t,this.je=new Map,this.He=sn(),this.Je=pi(),this.Ye=pi(),this.Ze=new Dt(ut)}Xe(t){for(const n of t.De)t.ve&&t.ve.isFoundDocument()?this.et(n,t.ve):this.tt(n,t.key,t.ve);for(const n of t.removedTargetIds)this.tt(n,t.key,t.ve)}nt(t){this.forEachTarget(t,n=>{const r=this.rt(n);switch(t.state){case 0:this.it(n)&&r.ke(t.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(t.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(t.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(t.resumeToken));break;default:nt(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(t){const n=t.targetId,r=t.Ce.count,s=this._t(n);if(s){const i=s.target;if(Ba(i))if(r===0){const a=new Z(i.path);this.tt(n,a,ie.newNoDocument(a,it.min()))}else Et(r===1,20013,{expectedCount:r});else{const a=this.ut(n);if(a!==r){const l=this.ct(t),u=l?this.lt(l,t,a):1;if(u!==0){this.st(n);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,f)}}}}}ct(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Sn(r).toUint8Array()}catch(u){if(u instanceof Pd)return Ar("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new xl(a,s,i)}catch(u){return Ar(u instanceof is?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.pe===0?null:l}lt(t,n,r){return n.Ce.count===r-this.Tt(t,n.targetId)?0:2}Tt(t,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.ze.Pt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.tt(n,i,null),s++)}),s}It(t){const n=new Map;this.je.forEach((i,a)=>{const l=this._t(a);if(l){if(i.current&&Ba(l.target)){const u=new Z(l.target.path);this.Et(u).has(a)||this.dt(a,u)||this.tt(a,u,ie.newNoDocument(u,t))}i.Le&&(n.set(a,i.qe()),i.Qe())}});let r=ht();this.Ye.forEach((i,a)=>{let l=!0;a.forEachWhile(u=>{const f=this._t(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.He.forEach((i,a)=>a.setReadTime(t));const s=new To(t,n,this.Ze,this.He,r);return this.He=sn(),this.Je=pi(),this.Ye=pi(),this.Ze=new Dt(ut),s}et(t,n){if(!this.it(t))return;const r=this.dt(t,n.key)?2:0;this.rt(t).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(t)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(t))}tt(t,n,r){if(!this.it(t))return;const s=this.rt(t);this.dt(t,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(t)),this.Ye=this.Ye.insert(n,this.At(n).add(t)),r&&(this.He=this.He.insert(n,r))}removeTarget(t){this.je.delete(t)}ut(t){const n=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let n=this.je.get(t);return n||(n=new ph,this.je.set(t,n)),n}At(t){let n=this.Ye.get(t);return n||(n=new jt(ut),this.Ye=this.Ye.insert(t,n)),n}Et(t){let n=this.Je.get(t);return n||(n=new jt(ut),this.Je=this.Je.insert(t,n)),n}it(t){const n=this._t(t)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",t),n}_t(t){const n=this.je.get(t);return n&&n.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new ph),this.ze.getRemoteKeysForTarget(t).forEach(n=>{this.tt(t,n,null)})}dt(t,n){return this.ze.getRemoteKeysForTarget(t).has(n)}}function pi(){return new Dt(Z.comparator)}function gh(){return new Dt(Z.comparator)}const O0={asc:"ASCENDING",desc:"DESCENDING"},M0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},L0={and:"AND",or:"OR"};class F0{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function qa(e,t){return e.useProto3Json||go(t)?t:{value:t}}function Yi(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function op(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function U0(e,t){return Yi(e,t.toTimestamp())}function je(e){return Et(!!e,49232),it.fromTimestamp(function(n){const r=Rn(n);return new $t(r.seconds,r.nanos)}(e))}function Vl(e,t){return Ha(e,t).canonicalString()}function Ha(e,t){const n=function(s){return new Pt(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function ap(e){const t=Pt.fromString(e);return Et(fp(t),10190,{key:t.toString()}),t}function za(e,t){return Vl(e.databaseId,t.path)}function la(e,t){const n=ap(t);if(n.get(1)!==e.databaseId.projectId)throw new Y(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Y(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Z(cp(n))}function lp(e,t){return Vl(e.databaseId,t)}function B0(e){const t=ap(e);return t.length===4?Pt.emptyPath():cp(t)}function Ka(e){return new Pt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function cp(e){return Et(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function mh(e,t,n){return{name:za(e,t),fields:n.value.mapValue.fields}}function $0(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:nt(39313,{state:f})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(f,d){return f.useProto3Json?(Et(d===void 0||typeof d=="string",58123),Jt.fromBase64String(d||"")):(Et(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Jt.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(f){const d=f.code===void 0?k.UNKNOWN:rp(f.code);return new Y(d,f.message||"")}(a);n=new ip(r,s,i,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=la(e,r.document.name),i=je(r.document.updateTime),a=r.document.createTime?je(r.document.createTime):it.min(),l=new be({mapValue:{fields:r.document.fields}}),u=ie.newFoundDocument(s,i,a,l),f=r.targetIds||[],d=r.removedTargetIds||[];n=new Si(f,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=la(e,r.document),i=r.readTime?je(r.readTime):it.min(),a=ie.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Si([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=la(e,r.document),i=r.removedTargetIds||[];n=new Si([],i,s,null)}else{if(!("filter"in t))return nt(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new V0(s,i),l=r.targetId;n=new sp(l,a)}}return n}function j0(e,t){let n;if(t instanceof Fs)n={update:mh(e,t.key,t.value)};else if(t instanceof Sl)n={delete:za(e,t.key)};else if(t instanceof nr)n={update:mh(e,t.key,t.data),updateMask:J0(t.fieldMask)};else{if(!(t instanceof S0))return nt(16599,{ft:t.type});n={verify:za(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Wi)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ds)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ks)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Qi)return{fieldPath:a.field.canonicalString(),increment:l.Re};throw nt(20930,{transform:a.transform})}(0,r))),t.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:U0(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:nt(27497)}(e,t.precondition)),n}function q0(e,t){return e&&e.length>0?(Et(t!==void 0,14353),e.map(n=>function(s,i){let a=s.updateTime?je(s.updateTime):je(i);return a.isEqual(it.min())&&(a=je(i)),new b0(a,s.transformResults||[])}(n,t))):[]}function H0(e,t){return{documents:[lp(e,t.path)]}}function z0(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lp(e,s);const i=function(f){if(f.length!==0)return hp(ke.create(f,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(f){if(f.length!==0)return f.map(d=>function(y){return{field:dr(y.field),direction:W0(y.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=qa(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(t.endAt)),{gt:n,parent:s}}function K0(e){let t=B0(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Et(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let i=[];n.where&&(i=function(p){const y=up(p);return y instanceof ke&&Ud(y)?y.getFilters():[y]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(y=>function(P){return new Vs(pr(P.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(p){let y;return y=typeof p=="object"?p.value:p,go(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(p){const y=!!p.before,C=p.values||[];return new Gi(C,y)}(n.startAt));let f=null;return n.endAt&&(f=function(p){const y=!p.before,C=p.values||[];return new Gi(C,y)}(n.endAt)),f0(t,s,a,i,l,"F",u,f)}function G0(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return nt(28987,{purpose:s})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function up(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=pr(n.unaryFilter.field);return Ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=pr(n.unaryFilter.field);return Ft.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=pr(n.unaryFilter.field);return Ft.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=pr(n.unaryFilter.field);return Ft.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return nt(61313);default:return nt(60726)}}(e):e.fieldFilter!==void 0?function(n){return Ft.create(pr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return nt(58110);default:return nt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return ke.create(n.compositeFilter.filters.map(r=>up(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return nt(1026)}}(n.compositeFilter.op))}(e):nt(30097,{filter:e})}function W0(e){return O0[e]}function Q0(e){return M0[e]}function Y0(e){return L0[e]}function dr(e){return{fieldPath:e.canonicalString()}}function pr(e){return Yt.fromServerFormat(e.fieldPath)}function hp(e){return e instanceof Ft?function(n){if(n.op==="=="){if(rh(n.value))return{unaryFilter:{field:dr(n.field),op:"IS_NAN"}};if(nh(n.value))return{unaryFilter:{field:dr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rh(n.value))return{unaryFilter:{field:dr(n.field),op:"IS_NOT_NAN"}};if(nh(n.value))return{unaryFilter:{field:dr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dr(n.field),op:Q0(n.op),value:n.value}}}(e):e instanceof ke?function(n){const r=n.getFilters().map(s=>hp(s));return r.length===1?r[0]:{compositeFilter:{op:Y0(n.op),filters:r}}}(e):nt(54877,{filter:e})}function J0(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function fp(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(t,n,r,s,i=it.min(),a=it.min(),l=Jt.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new mn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new mn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new mn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new mn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(t){this.wt=t}}function Z0(e){const t=K0({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?ja(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(){this.yn=new eE}addToCollectionParentIndex(t,n){return this.yn.add(n),D.resolve()}getCollectionParents(t,n){return D.resolve(this.yn.getEntries(n))}addFieldIndex(t,n){return D.resolve()}deleteFieldIndex(t,n){return D.resolve()}deleteAllFieldIndexes(t){return D.resolve()}createTargetIndexes(t,n){return D.resolve()}getDocumentsMatchingTarget(t,n){return D.resolve(null)}getIndexType(t,n){return D.resolve(0)}getFieldIndexes(t,n){return D.resolve([])}getNextCollectionGroupToUpdate(t){return D.resolve(null)}getMinOffset(t,n){return D.resolve(Cn.min())}getMinOffsetFromCollectionGroup(t,n){return D.resolve(Cn.min())}updateCollectionGroup(t,n,r){return D.resolve()}updateIndexEntries(t,n){return D.resolve()}}class eE{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new jt(Pt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new jt(Pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dp=41943040;class ge{static withCacheSize(t){return new ge(t,ge.DEFAULT_COLLECTION_PERCENTILE,ge.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ge.DEFAULT_COLLECTION_PERCENTILE=10,ge.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ge.DEFAULT=new ge(dp,ge.DEFAULT_COLLECTION_PERCENTILE,ge.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ge.DISABLED=new ge(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(t){this.nr=t}next(){return this.nr+=2,this.nr}static rr(){return new Sr(0)}static ir(){return new Sr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh="LruGarbageCollector",nE=1048576;function vh([e,t],[n,r]){const s=ut(e,n);return s===0?ut(t,r):s}class rE{constructor(t){this.cr=t,this.buffer=new jt(vh),this.lr=0}hr(){return++this.lr}Pr(t){const n=[t,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();vh(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class sE{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(t){Q(yh,`Garbage collection scheduled in ${t}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Nr(n)?Q(yh,"Ignoring IndexedDB error during garbage collection: ",n):await kr(n)}await this.Ir(3e5)})}}class iE{constructor(t,n){this.Er=t,this.params=n}calculateTargetCount(t,n){return this.Er.dr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return D.resolve(po.le);const r=new rE(n);return this.Er.forEachTarget(t,s=>r.Pr(s.sequenceNumber)).next(()=>this.Er.Ar(t,s=>r.Pr(s))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.Er.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Er.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),D.resolve(_h)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_h):this.Rr(t,n))}getCacheSize(t){return this.Er.getCacheSize(t)}Rr(t,n){let r,s,i,a,l,u,f;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(t,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(t,r,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(t,r))).next(p=>(f=Date.now(),hr()<=pt.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(f-u)+`ms
Total Duration: ${f-d}ms`),D.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function oE(e,t){return new iE(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(){this.changes=new er(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ie.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?D.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(r!==null&&_s(r.mutation,s,xe.empty(),$t.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,ht()).next(()=>r))}getLocalViewOfDocuments(t,n,r=ht()){const s=Wn();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,r).next(i=>{let a=ss();return i.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const r=Wn();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,ht()))}populateOverlays(t,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(t,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,r,s){let i=sn();const a=ms(),l=function(){return ms()}();return n.forEach((u,f)=>{const d=r.get(f.key);s.has(f.key)&&(d===void 0||d.mutation instanceof nr)?i=i.insert(f.key,f):d!==void 0?(a.set(f.key,d.mutation.getFieldMask()),_s(d.mutation,f,d.mutation.getFieldMask(),$t.now())):a.set(f.key,xe.empty())}),this.recalculateAndSaveOverlays(t,i).next(u=>(u.forEach((f,d)=>a.set(f,d)),n.forEach((f,d)=>{var p;return l.set(f,new lE(d,(p=a.get(f))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(t,n){const r=ms();let s=new Dt((a,l)=>a-l),i=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const f=n.get(u);if(f===null)return;let d=r.get(u)||xe.empty();d=l.applyToLocalView(f,d),r.set(u,d);const p=(s.get(l.batchId)||ht()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),f=u.key,d=u.value,p=Qd();d.forEach(y=>{if(!i.has(y)){const C=ep(n.get(y),r.get(y));C!==null&&p.set(y,C),i=i.add(y)}}),a.push(this.documentOverlayCache.saveOverlays(t,f,p))}return D.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,s){return function(a){return Z.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Hd(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):D.resolve(Wn());let l=Rs,u=i;return a.next(f=>D.forEach(f,(d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(d)?D.resolve():this.remoteDocumentCache.getEntry(t,d).next(y=>{u=u.insert(d,y)}))).next(()=>this.populateOverlays(t,f,i)).next(()=>this.computeViews(t,u,f,ht())).next(d=>({batchId:l,changes:Wd(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Z(n)).next(r=>{let s=ss();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let a=ss();return this.indexManager.getCollectionParents(t,i).next(l=>D.forEach(l,u=>{const f=function(p,y){return new Or(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(t,f,r,s).next(d=>{d.forEach((p,y)=>{a=a.insert(p,y)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s))).next(a=>{i.forEach((u,f)=>{const d=f.getKey();a.get(d)===null&&(a=a.insert(d,ie.newInvalidDocument(d)))});let l=ss();return a.forEach((u,f)=>{const d=i.get(u);d!==void 0&&_s(d.mutation,f,xe.empty(),$t.now()),yo(n,f)&&(l=l.insert(u,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(t){this.serializer=t,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(t,n){return D.resolve(this.Fr.get(n))}saveBundleMetadata(t,n){return this.Fr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:je(s.createTime)}}(n)),D.resolve()}getNamedQuery(t,n){return D.resolve(this.Mr.get(n))}saveNamedQuery(t,n){return this.Mr.set(n.name,function(s){return{name:s.name,query:Z0(s.bundledQuery),readTime:je(s.readTime)}}(n)),D.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(){this.overlays=new Dt(Z.comparator),this.Or=new Map}getOverlay(t,n){return D.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Wn();return D.forEach(n,s=>this.getOverlay(t,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((s,i)=>{this.St(t,n,i)}),D.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.Or.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Or.delete(r)),D.resolve()}getOverlaysForCollection(t,n,r){const s=Wn(),i=n.length+1,a=new Z(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return D.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new Dt((f,d)=>f-d);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let d=i.get(f.largestBatchId);d===null&&(d=Wn(),i=i.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const l=Wn(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,d)=>l.set(f,d)),!(l.size()>=s)););return D.resolve(l)}St(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Or.get(s.largestBatchId).delete(r.key);this.Or.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new x0(n,r));let i=this.Or.get(n);i===void 0&&(i=ht(),this.Or.set(n,i)),this.Or.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.sessionToken=Jt.EMPTY_BYTE_STRING}getSessionToken(t){return D.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,D.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(){this.Nr=new jt(qt.Br),this.Lr=new jt(qt.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(t,n){const r=new qt(t,n);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Qr(new qt(t,n))}$r(t,n){t.forEach(r=>this.removeReference(r,n))}Ur(t){const n=new Z(new Pt([])),r=new qt(n,t),s=new qt(n,t+1),i=[];return this.Lr.forEachInRange([r,s],a=>{this.Qr(a),i.push(a.key)}),i}Kr(){this.Nr.forEach(t=>this.Qr(t))}Qr(t){this.Nr=this.Nr.delete(t),this.Lr=this.Lr.delete(t)}Wr(t){const n=new Z(new Pt([])),r=new qt(n,t),s=new qt(n,t+1);let i=ht();return this.Lr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(t){const n=new qt(t,0),r=this.Nr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class qt{constructor(t,n){this.key=t,this.Gr=n}static Br(t,n){return Z.comparator(t.key,n.key)||ut(t.Gr,n.Gr)}static kr(t,n){return ut(t.Gr,n.Gr)||Z.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Jn=1,this.zr=new jt(qt.Br)}checkEmpty(t){return D.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new P0(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.zr=this.zr.add(new qt(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return D.resolve(a)}lookupMutationBatch(t,n){return D.resolve(this.jr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.Hr(r),i=s<0?0:s;return D.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.mutationQueue.length===0?wl:this.Jn-1)}getAllMutationBatches(t){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new qt(n,0),s=new qt(n,Number.POSITIVE_INFINITY),i=[];return this.zr.forEachInRange([r,s],a=>{const l=this.jr(a.Gr);i.push(l)}),D.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new jt(ut);return n.forEach(s=>{const i=new qt(s,0),a=new qt(s,Number.POSITIVE_INFINITY);this.zr.forEachInRange([i,a],l=>{r=r.add(l.Gr)})}),D.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;Z.isDocumentKey(i)||(i=i.child(""));const a=new qt(new Z(i),0);let l=new jt(ut);return this.zr.forEachWhile(u=>{const f=u.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(l=l.add(u.Gr)),!0)},a),D.resolve(this.Jr(l))}Jr(t){const n=[];return t.forEach(r=>{const s=this.jr(r);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){Et(this.Yr(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return D.forEach(n.mutations,s=>{const i=new qt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.zr=r})}Xn(t){}containsKey(t,n){const r=new qt(n,0),s=this.zr.firstAfterOrEqual(r);return D.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,D.resolve()}Yr(t,n){return this.Hr(t)}Hr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}jr(t){const n=this.Hr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(t){this.Zr=t,this.docs=function(){return new Dt(Z.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Zr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return D.resolve(r?r.document.mutableCopy():ie.newInvalidDocument(n))}getEntries(t,n){let r=sn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ie.newInvalidDocument(s))}),D.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=sn();const a=n.path,l=new Z(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:f,value:{document:d}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||Hv(qv(d),r)<=0||(s.has(d.key)||yo(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return D.resolve(i)}getAllFromCollectionGroup(t,n,r,s){nt(9500)}Xr(t,n){return D.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new gE(this)}getSize(t){return D.resolve(this.size)}}class gE extends aE{constructor(t){super(),this.vr=t}applyChanges(t){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.vr.addEntry(t,s)):this.vr.removeEntry(r)}),D.waitFor(n)}getFromCache(t,n){return this.vr.getEntry(t,n)}getAllFromCache(t,n){return this.vr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(t){this.persistence=t,this.ei=new er(n=>bl(n),Cl),this.lastRemoteSnapshotVersion=it.min(),this.highestTargetId=0,this.ti=0,this.ni=new Dl,this.targetCount=0,this.ri=Sr.rr()}forEachTarget(t,n){return this.ei.forEach((r,s)=>n(s)),D.resolve()}getLastRemoteSnapshotVersion(t){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return D.resolve(this.ti)}allocateTargetId(t){return this.highestTargetId=this.ri.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ti&&(this.ti=n),D.resolve()}ar(t){this.ei.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ri=new Sr(n),this.highestTargetId=n),t.sequenceNumber>this.ti&&(this.ti=t.sequenceNumber)}addTargetData(t,n){return this.ar(n),this.targetCount+=1,D.resolve()}updateTargetData(t,n){return this.ar(n),D.resolve()}removeTargetData(t,n){return this.ei.delete(n.target),this.ni.Ur(n.targetId),this.targetCount-=1,D.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.ei.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ei.delete(a),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),D.waitFor(i).next(()=>s)}getTargetCount(t){return D.resolve(this.targetCount)}getTargetData(t,n){const r=this.ei.get(n)||null;return D.resolve(r)}addMatchingKeys(t,n,r){return this.ni.qr(n,r),D.resolve()}removeMatchingKeys(t,n,r){this.ni.$r(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(t,a))}),D.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.ni.Ur(n),D.resolve()}getMatchingKeysForTargetId(t,n){const r=this.ni.Wr(n);return D.resolve(r)}containsKey(t,n){return D.resolve(this.ni.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(t,n){this.ii={},this.overlays={},this.si=new po(0),this.oi=!1,this.oi=!0,this._i=new fE,this.referenceDelegate=t(this),this.ai=new mE(this),this.indexManager=new tE,this.remoteDocumentCache=function(s){return new pE(s)}(r=>this.referenceDelegate.ui(r)),this.serializer=new X0(n),this.ci=new uE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new hE,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ii[t.toKey()];return r||(r=new dE(n,this.referenceDelegate),this.ii[t.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(t,n,r){Q("MemoryPersistence","Starting transaction:",t);const s=new _E(this.si.next());return this.referenceDelegate.li(),r(s).next(i=>this.referenceDelegate.hi(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Pi(t,n){return D.or(Object.values(this.ii).map(r=>()=>r.containsKey(t,n)))}}class _E extends Kv{constructor(t){super(),this.currentSequenceNumber=t}}class kl{constructor(t){this.persistence=t,this.Ti=new Dl,this.Ii=null}static Ei(t){return new kl(t)}get di(){if(this.Ii)return this.Ii;throw nt(60996)}addReference(t,n,r){return this.Ti.addReference(r,n),this.di.delete(r.toString()),D.resolve()}removeReference(t,n,r){return this.Ti.removeReference(r,n),this.di.add(r.toString()),D.resolve()}markPotentiallyOrphaned(t,n){return this.di.add(n.toString()),D.resolve()}removeTarget(t,n){this.Ti.Ur(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(t,n))}li(){this.Ii=new Set}hi(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.di,r=>{const s=Z.fromPath(r);return this.Ai(t,s).next(i=>{i||n.removeEntry(s,it.min())})}).next(()=>(this.Ii=null,n.apply(t)))}updateLimboDocument(t,n){return this.Ai(t,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}ui(t){return 0}Ai(t,n){return D.or([()=>D.resolve(this.Ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Pi(t,n)])}}class Ji{constructor(t,n){this.persistence=t,this.Ri=new er(r=>Qv(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=oE(this,n)}static Ei(t,n){return new Ji(t,n)}li(){}hi(t){return D.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}dr(t){const n=this.Vr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(s=>r+s))}Vr(t){let n=0;return this.Ar(t,r=>{n++}).next(()=>n)}Ar(t,n){return D.forEach(this.Ri,(r,s)=>this.gr(t,r,s).next(i=>i?D.resolve():n(s)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Xr(t,a=>this.gr(t,a,n).next(l=>{l||(r++,i.removeEntry(a,it.min()))})).next(()=>i.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.Ri.set(n,t.currentSequenceNumber),D.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.Ri.set(r,t.currentSequenceNumber),D.resolve()}removeReference(t,n,r){return this.Ri.set(r,t.currentSequenceNumber),D.resolve()}updateLimboDocument(t,n){return this.Ri.set(n,t.currentSequenceNumber),D.resolve()}ui(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=bi(t.data.value)),n}gr(t,n,r){return D.or([()=>this.persistence.Pi(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.Ri.get(n);return D.resolve(s!==void 0&&s>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.ls=r,this.hs=s}static Ps(t,n){let r=ht(),s=ht();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Nl(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return gy()?8:Gv(dy())>0?6:4}()}initialize(t,n){this.As=t,this.indexManager=n,this.Ts=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.Rs(t,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Vs(t,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new yE;return this.fs(t,n,a).next(l=>{if(i.result=l,this.Is)return this.gs(t,n,a,l.size)})}).next(()=>i.result)}gs(t,n,r,s){return r.documentReadCount<this.Es?(hr()<=pt.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",fr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),D.resolve()):(hr()<=pt.DEBUG&&Q("QueryEngine","Query:",fr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(hr()<=pt.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",fr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Be(n))):D.resolve())}Rs(t,n){if(ah(n))return D.resolve(null);let r=Be(n);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ja(n,null,"F"),r=Be(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(i=>{const a=ht(...i);return this.As.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,r).next(u=>{const f=this.ps(n,l);return this.ys(n,f,a,u.readTime)?this.Rs(t,ja(n,null,"F")):this.ws(t,f,n,u)}))})))}Vs(t,n,r,s){return ah(n)||s.isEqual(it.min())?D.resolve(null):this.As.getDocuments(t,r).next(i=>{const a=this.ps(n,i);return this.ys(n,a,r,s)?D.resolve(null):(hr()<=pt.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),fr(n)),this.ws(t,a,n,jv(s,Rs)).next(l=>l))})}ps(t,n){let r=new jt(Kd(t));return n.forEach((s,i)=>{yo(t,i)&&(r=r.add(i))}),r}ys(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}fs(t,n,r){return hr()<=pt.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",fr(n)),this.As.getDocumentsMatchingQuery(t,n,Cn.min(),r)}ws(t,n,r,s){return this.As.getDocumentsMatchingQuery(t,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol="LocalStore",EE=3e8;class TE{constructor(t,n,r,s){this.persistence=t,this.bs=n,this.serializer=s,this.Ss=new Dt(ut),this.Ds=new er(i=>bl(i),Cl),this.vs=new Map,this.Cs=t.getRemoteDocumentCache(),this.ai=t.getTargetCache(),this.ci=t.getBundleCache(),this.Fs(r)}Fs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new cE(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ss))}}function wE(e,t,n,r){return new TE(e,t,n,r)}async function gp(e,t){const n=ot(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Fs(t),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let u=ht();for(const f of s){a.push(f.batchId);for(const d of f.mutations)u=u.add(d.key)}for(const f of i){l.push(f.batchId);for(const d of f.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(f=>({Ms:f,removedBatchIds:a,addedBatchIds:l}))})})}function IE(e,t){const n=ot(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=t.batch.keys(),i=n.Cs.newChangeBuffer({trackRemovals:!0});return function(l,u,f,d){const p=f.batch,y=p.keys();let C=D.resolve();return y.forEach(P=>{C=C.next(()=>d.getEntry(u,P)).next(V=>{const N=f.docVersions.get(P);Et(N!==null,48541),V.version.compareTo(N)<0&&(p.applyToRemoteDocument(V,f),V.isValidDocument()&&(V.setReadTime(f.commitVersion),d.addEntry(V)))})}),C.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,t,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ht();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(u=u.add(l.batch.mutations[f].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,s))})}function mp(e){const t=ot(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.ai.getLastRemoteSnapshotVersion(n))}function AE(e,t){const n=ot(e),r=t.snapshotVersion;let s=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Cs.newChangeBuffer({trackRemovals:!0});s=n.Ss;const l=[];t.targetChanges.forEach((d,p)=>{const y=s.get(p);if(!y)return;l.push(n.ai.removeMatchingKeys(i,d.removedDocuments,p).next(()=>n.ai.addMatchingKeys(i,d.addedDocuments,p)));let C=y.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(p)!==null?C=C.withResumeToken(Jt.EMPTY_BYTE_STRING,it.min()).withLastLimboFreeSnapshotVersion(it.min()):d.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(d.resumeToken,r)),s=s.insert(p,C),function(V,N,K){return V.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=EE?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0}(y,C,d)&&l.push(n.ai.updateTargetData(i,C))});let u=sn(),f=ht();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(bE(i,a,t.documentUpdates).next(d=>{u=d.xs,f=d.Os})),!r.isEqual(it.min())){const d=n.ai.getLastRemoteSnapshotVersion(i).next(p=>n.ai.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(d)}return D.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,f)).next(()=>u)}).then(i=>(n.Ss=s,i))}function bE(e,t,n){let r=ht(),s=ht();return n.forEach(i=>r=r.add(i)),t.getEntries(e,r).next(i=>{let a=sn();return n.forEach((l,u)=>{const f=i.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(it.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):Q(Ol,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)}),{xs:a,Os:s}})}function CE(e,t){const n=ot(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=wl),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function RE(e,t){const n=ot(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.ai.getTargetData(r,t).next(i=>i?(s=i,D.resolve(s)):n.ai.allocateTargetId(r).next(a=>(s=new mn(t,a,"TargetPurposeListen",r.currentSequenceNumber),n.ai.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ss.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(r.targetId,r),n.Ds.set(t,r.targetId)),r})}async function Ga(e,t,n){const r=ot(e),s=r.Ss.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Nr(a))throw a;Q(Ol,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Ss=r.Ss.remove(t),r.Ds.delete(s.target)}function Eh(e,t,n){const r=ot(e);let s=it.min(),i=ht();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,f,d){const p=ot(u),y=p.Ds.get(d);return y!==void 0?D.resolve(p.Ss.get(y)):p.ai.getTargetData(f,d)}(r,a,Be(t)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(a,l.targetId).next(u=>{i=u})}).next(()=>r.bs.getDocumentsMatchingQuery(a,t,n?s:it.min(),n?i:ht())).next(l=>(SE(r,p0(t),l),{documents:l,Ns:i})))}function SE(e,t,n){let r=e.vs.get(t)||it.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),e.vs.set(t,r)}class Th{constructor(){this.activeTargetIds=E0()}$s(t){this.activeTargetIds=this.activeTargetIds.add(t)}Us(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Qs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class PE{constructor(){this.So=new Th,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.So.$s(t),this.Do[t]||"not-current"}updateQueryState(t,n,r){this.Do[t]=n}removeLocalQueryTarget(t){this.So.Us(t)}isLocalQueryTarget(t){return this.So.activeTargetIds.has(t)}clearQueryState(t){delete this.Do[t]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(t){return this.So.activeTargetIds.has(t)}start(){return this.So=new Th,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{vo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh="ConnectivityMonitor";class Ih{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(t){this.Oo.push(t)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){Q(wh,"Network connectivity changed: AVAILABLE");for(const t of this.Oo)t(0)}xo(){Q(wh,"Network connectivity changed: UNAVAILABLE");for(const t of this.Oo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gi=null;function Wa(){return gi===null?gi=function(){return 268435456+Math.round(2147483648*Math.random())}():gi++,"0x"+gi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="RestConnection",VE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class DE{get Bo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Lo=n+"://"+t.host,this.ko=`projects/${r}/databases/${s}`,this.qo=this.databaseId.database===zi?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Qo(t,n,r,s,i){const a=Wa(),l=this.$o(t,n.toUriEncodedString());Q(ca,`Sending RPC '${t}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(u,s,i);const{host:f}=new URL(l),d=vl(f);return this.Ko(t,l,u,r,d).then(p=>(Q(ca,`Received RPC '${t}' ${a}: `,p),p),p=>{throw Ar(ca,`RPC '${t}' ${a} failed with error: `,p,"url: ",l,"request:",r),p})}Wo(t,n,r,s,i,a){return this.Qo(t,n,r,s,i)}Uo(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Dr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>t[i]=s),r&&r.headers.forEach((s,i)=>t[i]=s)}$o(t,n){const r=VE[t];return`${this.Lo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(t){this.Go=t.Go,this.zo=t.zo}jo(t){this.Ho=t}Jo(t){this.Yo=t}Zo(t){this.Xo=t}onMessage(t){this.e_=t}close(){this.zo()}send(t){this.Go(t)}t_(){this.Ho()}n_(){this.Yo()}r_(t){this.Xo(t)}i_(t){this.e_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne="WebChannelConnection";class NE extends DE{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Ko(t,n,r,s,i){const a=Wa();return new Promise((l,u)=>{const f=new yd;f.setWithCredentials(!0),f.listenOnce(vd.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Ai.NO_ERROR:const p=f.getResponseJson();Q(ne,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(p)),l(p);break;case Ai.TIMEOUT:Q(ne,`RPC '${t}' ${a} timed out`),u(new Y(k.DEADLINE_EXCEEDED,"Request time out"));break;case Ai.HTTP_ERROR:const y=f.getStatus();if(Q(ne,`RPC '${t}' ${a} failed with status:`,y,"response text:",f.getResponseText()),y>0){let C=f.getResponseJson();Array.isArray(C)&&(C=C[0]);const P=C==null?void 0:C.error;if(P&&P.status&&P.message){const V=function(K){const G=K.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(G)>=0?G:k.UNKNOWN}(P.status);u(new Y(V,P.message))}else u(new Y(k.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new Y(k.UNAVAILABLE,"Connection failed."));break;default:nt(9055,{s_:t,streamId:a,o_:f.getLastErrorCode(),__:f.getLastError()})}}finally{Q(ne,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(s);Q(ne,`RPC '${t}' ${a} sending request:`,s),f.send(n,"POST",d,r,15)})}a_(t,n,r){const s=Wa(),i=[this.Lo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=wd(),l=Td(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Uo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=i.join("");Q(ne,`Creating RPC '${t}' stream ${s}: ${d}`,u);const p=a.createWebChannel(d,u);let y=!1,C=!1;const P=new kE({Go:N=>{C?Q(ne,`Not sending because RPC '${t}' stream ${s} is closed:`,N):(y||(Q(ne,`Opening RPC '${t}' stream ${s} transport.`),p.open(),y=!0),Q(ne,`RPC '${t}' stream ${s} sending:`,N),p.send(N))},zo:()=>p.close()}),V=(N,K,G)=>{N.listen(K,W=>{try{G(W)}catch(q){setTimeout(()=>{throw q},0)}})};return V(p,rs.EventType.OPEN,()=>{C||(Q(ne,`RPC '${t}' stream ${s} transport opened.`),P.t_())}),V(p,rs.EventType.CLOSE,()=>{C||(C=!0,Q(ne,`RPC '${t}' stream ${s} transport closed`),P.r_())}),V(p,rs.EventType.ERROR,N=>{C||(C=!0,Ar(ne,`RPC '${t}' stream ${s} transport errored. Name:`,N.name,"Message:",N.message),P.r_(new Y(k.UNAVAILABLE,"The operation could not be completed")))}),V(p,rs.EventType.MESSAGE,N=>{var K;if(!C){const G=N.data[0];Et(!!G,16349);const W=G,q=(W==null?void 0:W.error)||((K=W[0])===null||K===void 0?void 0:K.error);if(q){Q(ne,`RPC '${t}' stream ${s} received error:`,q);const at=q.status;let st=function(m){const _=Lt[m];if(_!==void 0)return rp(_)}(at),A=q.message;st===void 0&&(st=k.INTERNAL,A="Unknown error status: "+at+" with message "+q.message),C=!0,P.r_(new Y(st,A)),p.close()}else Q(ne,`RPC '${t}' stream ${s} received:`,G),P.i_(G)}}),V(l,Ed.STAT_EVENT,N=>{N.stat===Oa.PROXY?Q(ne,`RPC '${t}' stream ${s} detected buffering proxy`):N.stat===Oa.NOPROXY&&Q(ne,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{P.n_()},0),P}}function ua(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(e){return new F0(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(t,n,r=1e3,s=1.5,i=6e4){this.bi=t,this.timerId=n,this.u_=r,this.c_=s,this.l_=i,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(t){this.cancel();const n=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),s=Math.max(0,n-r);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.h_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,s,()=>(this.T_=Date.now(),t())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah="PersistentStream";class yp{constructor(t,n,r,s,i,a,l,u){this.bi=t,this.R_=r,this.V_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new _p(t,n)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(t){this.M_(),this.stream.send(t)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(t,n){this.M_(),this.x_(),this.y_.cancel(),this.m_++,t!==4?this.y_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(rn(n.toString()),rn("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Zo(n)}O_(){}auth(){this.state=1;const t=this.N_(this.m_),n=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.m_===n&&this.B_(r,s)},r=>{t(()=>{const s=new Y(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(s)})})}B_(t,n){const r=this.N_(this.m_);this.stream=this.k_(t,n),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(s=>{r(()=>this.L_(s))}),this.stream.onMessage(s=>{r(()=>++this.p_==1?this.q_(s):this.onNext(s))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(t){return Q(Ah,`close with error: ${t}`),this.stream=null,this.close(4,t)}N_(t){return n=>{this.bi.enqueueAndForget(()=>this.m_===t?n():(Q(Ah,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OE extends yp{constructor(t,n,r,s,i,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}k_(t,n){return this.connection.a_("Listen",t,n)}q_(t){return this.onNext(t)}onNext(t){this.y_.reset();const n=$0(this.serializer,t),r=function(i){if(!("targetChange"in i))return it.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?it.min():a.readTime?je(a.readTime):it.min()}(t);return this.listener.Q_(n,r)}U_(t){const n={};n.database=Ka(this.serializer),n.addTarget=function(i,a){let l;const u=a.target;if(l=Ba(u)?{documents:H0(i,u)}:{query:z0(i,u).gt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=op(i,a.resumeToken);const f=qa(i,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(it.min())>0){l.readTime=Yi(i,a.snapshotVersion.toTimestamp());const f=qa(i,a.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,t);const r=G0(this.serializer,t);r&&(n.labels=r),this.F_(n)}K_(t){const n={};n.database=Ka(this.serializer),n.removeTarget=t,this.F_(n)}}class ME extends yp{constructor(t,n,r,s,i,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(t,n){return this.connection.a_("Write",t,n)}q_(t){return Et(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Et(!t.writeResults||t.writeResults.length===0,55816),this.listener.z_()}onNext(t){Et(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.y_.reset();const n=q0(t.writeResults,t.commitTime),r=je(t.commitTime);return this.listener.j_(r,n)}H_(){const t={};t.database=Ka(this.serializer),this.F_(t)}G_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>j0(this.serializer,r))};this.F_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{}class FE extends LE{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.J_=!1}Y_(){if(this.J_)throw new Y(k.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(t,n,r,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Qo(t,Ha(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(k.UNKNOWN,i.toString())})}Wo(t,n,r,s,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Wo(t,Ha(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Y(k.UNKNOWN,a.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class UE{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(t){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.na("Offline")))}set(t){this.sa(),this.Z_=0,t==="Online"&&(this.ea=!1),this.na(t)}na(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ra(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(rn(n),this.ea=!1):Q("OnlineStateTracker",n)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn="RemoteStore";class BE{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=i,this.ca.vo(a=>{r.enqueueAndForget(async()=>{rr(this)&&(Q(Xn,"Restarting streams for network reachability change."),await async function(u){const f=ot(u);f.aa.add(4),await Bs(f),f.la.set("Unknown"),f.aa.delete(4),await Io(f)}(this))})}),this.la=new UE(r,s)}}async function Io(e){if(rr(e))for(const t of e.ua)await t(!0)}async function Bs(e){for(const t of e.ua)await t(!1)}function vp(e,t){const n=ot(e);n._a.has(t.targetId)||(n._a.set(t.targetId,t),Ul(n)?Fl(n):Mr(n).b_()&&Ll(n,t))}function Ml(e,t){const n=ot(e),r=Mr(n);n._a.delete(t),r.b_()&&Ep(n,t),n._a.size===0&&(r.b_()?r.v_():rr(n)&&n.la.set("Unknown"))}function Ll(e,t){if(e.ha.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(it.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Mr(e).U_(t)}function Ep(e,t){e.ha.Ke(t),Mr(e).K_(t)}function Fl(e){e.ha=new N0({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e._a.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),Mr(e).start(),e.la.ta()}function Ul(e){return rr(e)&&!Mr(e).w_()&&e._a.size>0}function rr(e){return ot(e).aa.size===0}function Tp(e){e.ha=void 0}async function $E(e){e.la.set("Online")}async function jE(e){e._a.forEach((t,n)=>{Ll(e,t)})}async function qE(e,t){Tp(e),Ul(e)?(e.la.ia(t),Fl(e)):e.la.set("Unknown")}async function HE(e,t,n){if(e.la.set("Online"),t instanceof ip&&t.state===2&&t.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s._a.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s._a.delete(l),s.ha.removeTarget(l))}(e,t)}catch(r){Q(Xn,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Xi(e,r)}else if(t instanceof Si?e.ha.Xe(t):t instanceof sp?e.ha.ot(t):e.ha.nt(t),!n.isEqual(it.min()))try{const r=await mp(e.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.ha.It(a);return l.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const d=i._a.get(f);d&&i._a.set(f,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,f)=>{const d=i._a.get(u);if(!d)return;i._a.set(u,d.withResumeToken(Jt.EMPTY_BYTE_STRING,d.snapshotVersion)),Ep(i,u);const p=new mn(d.target,u,f,d.sequenceNumber);Ll(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(r){Q(Xn,"Failed to raise snapshot:",r),await Xi(e,r)}}async function Xi(e,t,n){if(!Nr(t))throw t;e.aa.add(1),await Bs(e),e.la.set("Offline"),n||(n=()=>mp(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Q(Xn,"Retrying IndexedDB access"),await n(),e.aa.delete(1),await Io(e)})}function wp(e,t){return t().catch(n=>Xi(e,n,t))}async function Ao(e){const t=ot(e),n=xn(t);let r=t.oa.length>0?t.oa[t.oa.length-1].batchId:wl;for(;zE(t);)try{const s=await CE(t.localStore,r);if(s===null){t.oa.length===0&&n.v_();break}r=s.batchId,KE(t,s)}catch(s){await Xi(t,s)}Ip(t)&&Ap(t)}function zE(e){return rr(e)&&e.oa.length<10}function KE(e,t){e.oa.push(t);const n=xn(e);n.b_()&&n.W_&&n.G_(t.mutations)}function Ip(e){return rr(e)&&!xn(e).w_()&&e.oa.length>0}function Ap(e){xn(e).start()}async function GE(e){xn(e).H_()}async function WE(e){const t=xn(e);for(const n of e.oa)t.G_(n.mutations)}async function QE(e,t,n){const r=e.oa.shift(),s=Pl.from(r,t,n);await wp(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Ao(e)}async function YE(e,t){t&&xn(e).W_&&await async function(r,s){if(function(a){return D0(a)&&a!==k.ABORTED}(s.code)){const i=r.oa.shift();xn(r).D_(),await wp(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ao(r)}}(e,t),Ip(e)&&Ap(e)}async function bh(e,t){const n=ot(e);n.asyncQueue.verifyOperationInProgress(),Q(Xn,"RemoteStore received new credentials");const r=rr(n);n.aa.add(3),await Bs(n),r&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.aa.delete(3),await Io(n)}async function JE(e,t){const n=ot(e);t?(n.aa.delete(2),await Io(n)):t||(n.aa.add(2),await Bs(n),n.la.set("Unknown"))}function Mr(e){return e.Pa||(e.Pa=function(n,r,s){const i=ot(n);return i.Y_(),new OE(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{jo:$E.bind(null,e),Jo:jE.bind(null,e),Zo:qE.bind(null,e),Q_:HE.bind(null,e)}),e.ua.push(async t=>{t?(e.Pa.D_(),Ul(e)?Fl(e):e.la.set("Unknown")):(await e.Pa.stop(),Tp(e))})),e.Pa}function xn(e){return e.Ta||(e.Ta=function(n,r,s){const i=ot(n);return i.Y_(),new ME(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{jo:()=>Promise.resolve(),Jo:GE.bind(null,e),Zo:YE.bind(null,e),z_:WE.bind(null,e),j_:QE.bind(null,e)}),e.ua.push(async t=>{t?(e.Ta.D_(),await Ao(e)):(await e.Ta.stop(),e.oa.length>0&&(Q(Xn,`Stopping write stream with ${e.oa.length} pending writes`),e.oa=[]))})),e.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Tn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const a=Date.now()+r,l=new Bl(t,n,a,s,i);return l.start(r),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(k.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $l(e,t){if(rn("AsyncQueue",`${t}: ${e}`),Nr(e))return new Y(k.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{static emptySet(t){return new wr(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=ss(),this.sortedSet=new Dt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof wr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new wr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(){this.Ia=new Dt(Z.comparator)}track(t){const n=t.doc.key,r=this.Ia.get(n);r?t.type!==0&&r.type===3?this.Ia=this.Ia.insert(n,t):t.type===3&&r.type!==1?this.Ia=this.Ia.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.Ia=this.Ia.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.Ia=this.Ia.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.Ia=this.Ia.remove(n):t.type===1&&r.type===2?this.Ia=this.Ia.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.Ia=this.Ia.insert(n,{type:2,doc:t.doc}):nt(63341,{Vt:t,Ea:r}):this.Ia=this.Ia.insert(n,t)}da(){const t=[];return this.Ia.inorderTraversal((n,r)=>{t.push(r)}),t}}class Pr{constructor(t,n,r,s,i,a,l,u,f){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(t,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Pr(t,n,wr.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&_o(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(t=>t.ma())}}class ZE{constructor(){this.queries=Rh(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(n,r){const s=ot(n),i=s.queries;s.queries=Rh(),i.forEach((a,l)=>{for(const u of l.Ra)u.onError(r)})})(this,new Y(k.ABORTED,"Firestore shutting down"))}}function Rh(){return new er(e=>zd(e),_o)}async function tT(e,t){const n=ot(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.Va()&&t.ma()&&(r=2):(i=new XE,r=t.ma()?0:1);try{switch(r){case 0:i.Aa=await n.onListen(s,!0);break;case 1:i.Aa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=$l(a,`Initialization of query '${fr(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,i),i.Ra.push(t),t.ga(n.onlineState),i.Aa&&t.pa(i.Aa)&&jl(n)}async function eT(e,t){const n=ot(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Ra.indexOf(t);a>=0&&(i.Ra.splice(a,1),i.Ra.length===0?s=t.ma()?0:1:!i.Va()&&t.ma()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function nT(e,t){const n=ot(e);let r=!1;for(const s of t){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Ra)l.pa(s)&&(r=!0);a.Aa=s}}r&&jl(n)}function rT(e,t,n){const r=ot(e),s=r.queries.get(t);if(s)for(const i of s.Ra)i.onError(n);r.queries.delete(t)}function jl(e){e.fa.forEach(t=>{t.next()})}var Qa,Sh;(Sh=Qa||(Qa={})).ya="default",Sh.Cache="cache";class sT{constructor(t,n,r){this.query=t,this.wa=n,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new Pr(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ba?this.Da(t)&&(this.wa.next(t),n=!0):this.va(t,this.onlineState)&&(this.Ca(t),n=!0),this.Sa=t,n}onError(t){this.wa.error(t)}ga(t){this.onlineState=t;let n=!1;return this.Sa&&!this.ba&&this.va(this.Sa,t)&&(this.Ca(this.Sa),n=!0),n}va(t,n){if(!t.fromCache||!this.ma())return!0;const r=n!=="Offline";return(!this.options.Fa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Da(t){if(t.docChanges.length>0)return!0;const n=this.Sa&&this.Sa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ca(t){t=Pr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ba=!0,this.wa.next(t)}ma(){return this.options.source!==Qa.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(t){this.key=t}}class Cp{constructor(t){this.key=t}}class iT{constructor(t,n){this.query=t,this.qa=n,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=ht(),this.mutatedKeys=ht(),this.Ua=Kd(t),this.Ka=new wr(this.Ua)}get Wa(){return this.qa}Ga(t,n){const r=n?n.za:new Ch,s=n?n.Ka:this.Ka;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((d,p)=>{const y=s.get(d),C=yo(this.query,p)?p:null,P=!!y&&this.mutatedKeys.has(y.key),V=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let N=!1;y&&C?y.data.isEqual(C.data)?P!==V&&(r.track({type:3,doc:C}),N=!0):this.ja(y,C)||(r.track({type:2,doc:C}),N=!0,(u&&this.Ua(C,u)>0||f&&this.Ua(C,f)<0)&&(l=!0)):!y&&C?(r.track({type:0,doc:C}),N=!0):y&&!C&&(r.track({type:1,doc:y}),N=!0,(u||f)&&(l=!0)),N&&(C?(a=a.add(C),i=V?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ka:a,za:r,ys:l,mutatedKeys:i}}ja(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.Ka;this.Ka=t.Ka,this.mutatedKeys=t.mutatedKeys;const a=t.za.da();a.sort((d,p)=>function(C,P){const V=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt(20277,{Vt:N})}};return V(C)-V(P)}(d.type,p.type)||this.Ua(d.doc,p.doc)),this.Ha(r),s=s!=null&&s;const l=n&&!s?this.Ja():[],u=this.$a.size===0&&this.current&&!s?1:0,f=u!==this.Qa;return this.Qa=u,a.length!==0||f?{snapshot:new Pr(this.query,t.Ka,i,a,t.mutatedKeys,u===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:l}:{Ya:l}}ga(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new Ch,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(t){return!this.qa.has(t)&&!!this.Ka.has(t)&&!this.Ka.get(t).hasLocalMutations}Ha(t){t&&(t.addedDocuments.forEach(n=>this.qa=this.qa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.qa=this.qa.delete(n)),this.current=t.current)}Ja(){if(!this.current)return[];const t=this.$a;this.$a=ht(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const n=[];return t.forEach(r=>{this.$a.has(r)||n.push(new Cp(r))}),this.$a.forEach(r=>{t.has(r)||n.push(new bp(r))}),n}Xa(t){this.qa=t.Ns,this.$a=ht();const n=this.Ga(t.documents);return this.applyChanges(n,!0)}eu(){return Pr.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const ql="SyncEngine";class oT{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class aT{constructor(t){this.key=t,this.tu=!1}}class lT{constructor(t,n,r,s,i,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.nu={},this.ru=new er(l=>zd(l),_o),this.iu=new Map,this.su=new Set,this.ou=new Dt(Z.comparator),this._u=new Map,this.au=new Dl,this.uu={},this.cu=new Map,this.lu=Sr.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function cT(e,t,n=!0){const r=Dp(e);let s;const i=r.ru.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.eu()):s=await Rp(r,t,n,!0),s}async function uT(e,t){const n=Dp(e);await Rp(n,t,!0,!1)}async function Rp(e,t,n,r){const s=await RE(e.localStore,Be(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await hT(e,t,i,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&vp(e.remoteStore,s),l}async function hT(e,t,n,r,s){e.Pu=(p,y,C)=>async function(V,N,K,G){let W=N.view.Ga(K);W.ys&&(W=await Eh(V.localStore,N.query,!1).then(({documents:A})=>N.view.Ga(A,W)));const q=G&&G.targetChanges.get(N.targetId),at=G&&G.targetMismatches.get(N.targetId)!=null,st=N.view.applyChanges(W,V.isPrimaryClient,q,at);return xh(V,N.targetId,st.Ya),st.snapshot}(e,p,y,C);const i=await Eh(e.localStore,t,!0),a=new iT(t,i.Ns),l=a.Ga(i.documents),u=Us.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),f=a.applyChanges(l,e.isPrimaryClient,u);xh(e,n,f.Ya);const d=new oT(t,n,a);return e.ru.set(t,d),e.iu.has(n)?e.iu.get(n).push(t):e.iu.set(n,[t]),f.snapshot}async function fT(e,t,n){const r=ot(e),s=r.ru.get(t),i=r.iu.get(s.targetId);if(i.length>1)return r.iu.set(s.targetId,i.filter(a=>!_o(a,t))),void r.ru.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ga(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ml(r.remoteStore,s.targetId),Ya(r,s.targetId)}).catch(kr)):(Ya(r,s.targetId),await Ga(r.localStore,s.targetId,!0))}async function dT(e,t){const n=ot(e),r=n.ru.get(t),s=n.iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ml(n.remoteStore,r.targetId))}async function pT(e,t,n){const r=TT(e);try{const s=await function(a,l){const u=ot(a),f=$t.now(),d=l.reduce((C,P)=>C.add(P.key),ht());let p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",C=>{let P=sn(),V=ht();return u.Cs.getEntries(C,d).next(N=>{P=N,P.forEach((K,G)=>{G.isValidDocument()||(V=V.add(K))})}).next(()=>u.localDocuments.getOverlayedDocuments(C,P)).next(N=>{p=N;const K=[];for(const G of l){const W=R0(G,p.get(G.key).overlayedDocument);W!=null&&K.push(new nr(G.key,W,Md(W.value.mapValue),$e.exists(!0)))}return u.mutationQueue.addMutationBatch(C,f,K,l)}).next(N=>{y=N;const K=N.applyToLocalDocumentSet(p,V);return u.documentOverlayCache.saveOverlays(C,N.batchId,K)})}).then(()=>({batchId:y.batchId,changes:Wd(p)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let f=a.uu[a.currentUser.toKey()];f||(f=new Dt(ut)),f=f.insert(l,u),a.uu[a.currentUser.toKey()]=f}(r,s.batchId,n),await $s(r,s.changes),await Ao(r.remoteStore)}catch(s){const i=$l(s,"Failed to persist write");n.reject(i)}}async function Sp(e,t){const n=ot(e);try{const r=await AE(n.localStore,t);t.targetChanges.forEach((s,i)=>{const a=n._u.get(i);a&&(Et(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.tu=!0:s.modifiedDocuments.size>0?Et(a.tu,14607):s.removedDocuments.size>0&&(Et(a.tu,42227),a.tu=!1))}),await $s(n,r,t)}catch(r){await kr(r)}}function Ph(e,t,n){const r=ot(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ru.forEach((i,a)=>{const l=a.view.ga(t);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=ot(a);u.onlineState=l;let f=!1;u.queries.forEach((d,p)=>{for(const y of p.Ra)y.ga(l)&&(f=!0)}),f&&jl(u)}(r.eventManager,t),s.length&&r.nu.Q_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function gT(e,t,n){const r=ot(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r._u.get(t),i=s&&s.key;if(i){let a=new Dt(Z.comparator);a=a.insert(i,ie.newNoDocument(i,it.min()));const l=ht().add(i),u=new To(it.min(),new Map,new Dt(ut),a,l);await Sp(r,u),r.ou=r.ou.remove(i),r._u.delete(t),Hl(r)}else await Ga(r.localStore,t,!1).then(()=>Ya(r,t,n)).catch(kr)}async function mT(e,t){const n=ot(e),r=t.batch.batchId;try{const s=await IE(n.localStore,t);xp(n,r,null),Pp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $s(n,s)}catch(s){await kr(s)}}async function _T(e,t,n){const r=ot(e);try{const s=await function(a,l){const u=ot(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let d;return u.mutationQueue.lookupMutationBatch(f,l).next(p=>(Et(p!==null,37113),d=p.keys(),u.mutationQueue.removeMutationBatch(f,p))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d)).next(()=>u.localDocuments.getDocuments(f,d))})}(r.localStore,t);xp(r,t,n),Pp(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await $s(r,s)}catch(s){await kr(s)}}function Pp(e,t){(e.cu.get(t)||[]).forEach(n=>{n.resolve()}),e.cu.delete(t)}function xp(e,t,n){const r=ot(e);let s=r.uu[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.uu[r.currentUser.toKey()]=s}}function Ya(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.iu.get(t))e.ru.delete(r),n&&e.nu.Tu(r,n);e.iu.delete(t),e.isPrimaryClient&&e.au.Ur(t).forEach(r=>{e.au.containsKey(r)||Vp(e,r)})}function Vp(e,t){e.su.delete(t.path.canonicalString());const n=e.ou.get(t);n!==null&&(Ml(e.remoteStore,n),e.ou=e.ou.remove(t),e._u.delete(n),Hl(e))}function xh(e,t,n){for(const r of n)r instanceof bp?(e.au.addReference(r.key,t),yT(e,r)):r instanceof Cp?(Q(ql,"Document no longer in limbo: "+r.key),e.au.removeReference(r.key,t),e.au.containsKey(r.key)||Vp(e,r.key)):nt(19791,{Iu:r})}function yT(e,t){const n=t.key,r=n.path.canonicalString();e.ou.get(n)||e.su.has(r)||(Q(ql,"New document in limbo: "+n),e.su.add(r),Hl(e))}function Hl(e){for(;e.su.size>0&&e.ou.size<e.maxConcurrentLimboResolutions;){const t=e.su.values().next().value;e.su.delete(t);const n=new Z(Pt.fromString(t)),r=e.lu.next();e._u.set(r,new aT(n)),e.ou=e.ou.insert(n,r),vp(e.remoteStore,new mn(Be(qd(n.path)),r,"TargetPurposeLimboResolution",po.le))}}async function $s(e,t,n){const r=ot(e),s=[],i=[],a=[];r.ru.isEmpty()||(r.ru.forEach((l,u)=>{a.push(r.Pu(u,t,n).then(f=>{var d;if((f||n)&&r.isPrimaryClient){const p=f?!f.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(f){s.push(f);const p=Nl.Ps(u.targetId,f);i.push(p)}}))}),await Promise.all(a),r.nu.Q_(s),await async function(u,f){const d=ot(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>D.forEach(f,y=>D.forEach(y.ls,C=>d.persistence.referenceDelegate.addReference(p,y.targetId,C)).next(()=>D.forEach(y.hs,C=>d.persistence.referenceDelegate.removeReference(p,y.targetId,C)))))}catch(p){if(!Nr(p))throw p;Q(Ol,"Failed to update sequence numbers: "+p)}for(const p of f){const y=p.targetId;if(!p.fromCache){const C=d.Ss.get(y),P=C.snapshotVersion,V=C.withLastLimboFreeSnapshotVersion(P);d.Ss=d.Ss.insert(y,V)}}}(r.localStore,i))}async function vT(e,t){const n=ot(e);if(!n.currentUser.isEqual(t)){Q(ql,"User change. New user:",t.toKey());const r=await gp(n.localStore,t);n.currentUser=t,function(i,a){i.cu.forEach(l=>{l.forEach(u=>{u.reject(new Y(k.CANCELLED,a))})}),i.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await $s(n,r.Ms)}}function ET(e,t){const n=ot(e),r=n._u.get(t);if(r&&r.tu)return ht().add(r.key);{let s=ht();const i=n.iu.get(t);if(!i)return s;for(const a of i){const l=n.ru.get(a);s=s.unionWith(l.view.Wa)}return s}}function Dp(e){const t=ot(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Sp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ET.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=gT.bind(null,t),t.nu.Q_=nT.bind(null,t.eventManager),t.nu.Tu=rT.bind(null,t.eventManager),t}function TT(e){const t=ot(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=mT.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=_T.bind(null,t),t}class Zi{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=wo(t.databaseInfo.databaseId),this.sharedClientState=this.Au(t),this.persistence=this.Ru(t),await this.persistence.start(),this.localStore=this.Vu(t),this.gcScheduler=this.mu(t,this.localStore),this.indexBackfillerScheduler=this.fu(t,this.localStore)}mu(t,n){return null}fu(t,n){return null}Vu(t){return wE(this.persistence,new vE,t.initialUser,this.serializer)}Ru(t){return new pp(kl.Ei,this.serializer)}Au(t){return new PE}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zi.provider={build:()=>new Zi};class wT extends Zi{constructor(t){super(),this.cacheSizeBytes=t}mu(t,n){Et(this.persistence.referenceDelegate instanceof Ji,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new sE(r,t.asyncQueue,n)}Ru(t){const n=this.cacheSizeBytes!==void 0?ge.withCacheSize(this.cacheSizeBytes):ge.DEFAULT;return new pp(r=>Ji.Ei(r,n),this.serializer)}}class Ja{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ph(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=vT.bind(null,this.syncEngine),await JE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new ZE}()}createDatastore(t){const n=wo(t.databaseInfo.databaseId),r=function(i){return new NE(i)}(t.databaseInfo);return function(i,a,l,u){return new FE(i,a,l,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,s,i,a,l){return new BE(r,s,i,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>Ph(this.syncEngine,n,0),function(){return Ih.C()?new Ih:new xE}())}createSyncEngine(t,n){return function(s,i,a,l,u,f,d){const p=new lT(s,i,a,l,u,f);return d&&(p.hu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(s){const i=ot(s);Q(Xn,"RemoteStore shutting down."),i.aa.add(5),await Bs(i),i.ca.shutdown(),i.la.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ja.provider={build:()=>new Ja};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.pu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.pu(this.observer.error,t):rn("Uncaught Error in snapshot listener:",t.toString()))}yu(){this.muted=!0}pu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn="FirestoreClient";class AT{constructor(t,n,r,s,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=re.UNAUTHENTICATED,this.clientId=Cd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{Q(Vn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Q(Vn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Tn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=$l(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function ha(e,t){e.asyncQueue.verifyOperationInProgress(),Q(Vn,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async s=>{r.isEqual(s)||(await gp(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Vh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await bT(e);Q(Vn,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>bh(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,s)=>bh(t.remoteStore,s)),e._onlineComponents=t}async function bT(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Q(Vn,"Using user provided OfflineComponentProvider");try{await ha(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===k.FAILED_PRECONDITION||s.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ar("Error using user provided cache. Falling back to memory cache: "+n),await ha(e,new Zi)}}else Q(Vn,"Using default OfflineComponentProvider"),await ha(e,new wT(void 0));return e._offlineComponents}async function kp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Q(Vn,"Using user provided OnlineComponentProvider"),await Vh(e,e._uninitializedComponentsProvider._online)):(Q(Vn,"Using default OnlineComponentProvider"),await Vh(e,new Ja))),e._onlineComponents}function CT(e){return kp(e).then(t=>t.syncEngine)}async function RT(e){const t=await kp(e),n=t.eventManager;return n.onListen=cT.bind(null,t.syncEngine),n.onUnlisten=fT.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=uT.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=dT.bind(null,t.syncEngine),n}function ST(e,t,n={}){const r=new Tn;return e.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,f){const d=new IT({next:y=>{d.yu(),a.enqueueAndForget(()=>eT(i,p)),y.fromCache&&u.source==="server"?f.reject(new Y(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(y)},error:y=>f.reject(y)}),p=new sT(l,d,{includeMetadataChanges:!0,Fa:!0});return tT(i,p)}(await RT(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(e,t,n){if(!n)throw new Y(k.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function PT(e,t,n,r){if(t===!0&&r===!0)throw new Y(k.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function kh(e){if(!Z.isDocumentKey(e))throw new Y(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Nh(e){if(Z.isDocumentKey(e))throw new Y(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function bo(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":nt(12329,{type:typeof e})}function Ns(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Y(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bo(e);throw new Y(k.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="firestore.googleapis.com",Oh=!0;class Mh{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Y(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Mp,this.ssl=Oh}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:Oh;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=dp;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<nE)throw new Y(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}PT("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Np((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Y(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Y(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Y(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Co{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Y(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mh(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new kv;switch(r.type){case"firstParty":return new Lv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,cd("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Dh.get(n);r&&(Q("ComponentProvider","Removing Datastore"),Dh.delete(n),r.terminate())}(this),Promise.resolve()}}function xT(e,t,n,r={}){var s;e=Ns(e,Co);const i=vl(t),a=e._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),u=`${t}:${n}`;a.host!==Mp&&a.host!==u&&Ar("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},a),{host:u,ssl:i,emulatorOptions:r});if(!$i(f,l)&&(e._setSettings(f),i&&(cy(`https://${u}`),cd("Firestore",!0)),r.mockUserToken)){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=re.MOCK_USER;else{d=uy(r.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Y(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new re(y)}e._authCredentials=new Nv(new Ad(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new sr(this.firestore,t,this._query)}}class Re{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Re(this.firestore,t,this._key)}}class wn extends sr{constructor(t,n,r){super(t,n,qd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Re(this.firestore,null,new Z(t))}withConverter(t){return new wn(this.firestore,t,this._path)}}function fa(e,t,...n){if(e=Ir(e),Op("collection","path",t),e instanceof Co){const r=Pt.fromString(t,...n);return Nh(r),new wn(e,null,r)}{if(!(e instanceof Re||e instanceof wn))throw new Y(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Pt.fromString(t,...n));return Nh(r),new wn(e.firestore,null,r)}}function VT(e,t,...n){if(e=Ir(e),arguments.length===1&&(t=Cd.newId()),Op("doc","path",t),e instanceof Co){const r=Pt.fromString(t,...n);return kh(r),new Re(e,null,new Z(r))}{if(!(e instanceof Re||e instanceof wn))throw new Y(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Pt.fromString(t,...n));return kh(r),new Re(e.firestore,e instanceof wn?e.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh="AsyncQueue";class Fh{constructor(t=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new _p(this,"async_queue_retry"),this.ju=()=>{const r=ua();r&&Q(Lh,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=t;const n=ua();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Ju(),this.Yu(t)}enterRestrictedMode(t){if(!this.$u){this.$u=!0,this.Gu=t||!1;const n=ua();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ju)}}enqueue(t){if(this.Ju(),this.$u)return new Promise(()=>{});const n=new Tn;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Qu.push(t),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(t){if(!Nr(t))throw t;Q(Lh,"Operation failed with retryable error: "+t)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(t){const n=this.Hu.then(()=>(this.Wu=!0,t().catch(r=>{throw this.Ku=r,this.Wu=!1,rn("INTERNAL UNHANDLED ERROR: ",Uh(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=n,n}enqueueAfterDelay(t,n,r){this.Ju(),this.zu.indexOf(t)>-1&&(n=0);const s=Bl.createAndSchedule(this,t,n,r,i=>this.Xu(i));return this.Uu.push(s),s}Ju(){this.Ku&&nt(47125,{ec:Uh(this.Ku)})}verifyOperationInProgress(){}async tc(){let t;do t=this.Hu,await t;while(t!==this.Hu)}nc(t){for(const n of this.Uu)if(n.timerId===t)return!0;return!1}rc(t){return this.tc().then(()=>{this.Uu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Uu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.tc()})}sc(t){this.zu.push(t)}Xu(t){const n=this.Uu.indexOf(t);this.Uu.splice(n,1)}}function Uh(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Ro extends Co{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=new Fh,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Fh(t),this._firestoreClient=void 0,await t}}}function DT(e,t){const n=typeof e=="object"?e:wv(),r=typeof e=="string"?e:zi,s=_v(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=ay("firestore");i&&xT(s,...i)}return s}function Lp(e){if(e._terminated)throw new Y(k.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||kT(e),e._firestoreClient}function kT(e){var t,n,r;const s=e._freezeSettings(),i=function(l,u,f,d){return new Xv(l,u,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Np(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new AT(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new xr(Jt.fromBase64String(t))}catch(n){throw new Y(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new xr(Jt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Y(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Y(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Y(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ut(this._lat,t._lat)||ut(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT=/^__.*__$/;class OT{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new nr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Fs(t,this.data,n,this.fieldTransforms)}}function Up(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt(40011,{oc:e})}}class Wl{constructor(t,n,r,s,i,a){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this._c(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(t){return new Wl(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.ac({path:r,cc:!1});return s.lc(t),s}hc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.ac({path:r,cc:!1});return s._c(),s}Pc(t){return this.ac({path:void 0,cc:!0})}Tc(t){return to(t,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}_c(){if(this.path)for(let t=0;t<this.path.length;t++)this.lc(this.path.get(t))}lc(t){if(t.length===0)throw this.Tc("Document fields must not be empty");if(Up(this.oc)&&NT.test(t))throw this.Tc('Document fields cannot begin and end with "__"')}}class MT{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||wo(t)}dc(t,n,r,s=!1){return new Wl({oc:t,methodName:n,Ec:r,path:Yt.emptyPath(),cc:!1,Ic:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bp(e){const t=e._freezeSettings(),n=wo(e._databaseId);return new MT(e._databaseId,!!t.ignoreUndefinedProperties,n)}function LT(e,t,n,r,s,i={}){const a=e.dc(i.merge||i.mergeFields?2:0,t,n,s);qp("Data must be an object, but it was:",a,r);const l=$p(r,a);let u,f;if(i.merge)u=new xe(a.fieldMask),f=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const y=UT(t,p,n);if(!a.contains(y))throw new Y(k.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);$T(d,y)||d.push(y)}u=new xe(d),f=a.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,f=a.fieldTransforms;return new OT(new be(l),u,f)}function FT(e,t,n,r=!1){return Ql(n,e.dc(r?4:3,t))}function Ql(e,t){if(jp(e=Ir(e)))return qp("Unsupported field value:",t,e),$p(e,t);if(e instanceof Fp)return function(r,s){if(!Up(s.oc))throw s.Tc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Tc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.cc&&t.oc!==4)throw t.Tc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let u=Ql(l,s.Pc(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(e,t)}return function(r,s){if((r=Ir(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return T0(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=$t.fromDate(r);return{timestampValue:Yi(s.serializer,i)}}if(r instanceof $t){const i=new $t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yi(s.serializer,i)}}if(r instanceof Kl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xr)return{bytesValue:op(s.serializer,r._byteString)};if(r instanceof Re){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Tc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Vl(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Gl)return function(a,l){return{mapValue:{fields:{[Nd]:{stringValue:Od},[Ki]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw l.Tc("VectorValues must only contain numeric values.");return Rl(l.serializer,f)})}}}}}}(r,s);throw s.Tc(`Unsupported field value: ${bo(r)}`)}(e,t)}function $p(e,t){const n={};return Sd(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):tr(e,(r,s)=>{const i=Ql(s,t.uc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function jp(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof $t||e instanceof Kl||e instanceof xr||e instanceof Re||e instanceof Fp||e instanceof Gl)}function qp(e,t,n){if(!jp(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=bo(n);throw r==="an object"?t.Tc(e+" a custom object"):t.Tc(e+" "+r)}}function UT(e,t,n){if((t=Ir(t))instanceof zl)return t._internalPath;if(typeof t=="string")return Hp(e,t);throw to("Field path arguments must be of type string or ",e,!1,void 0,n)}const BT=new RegExp("[~\\*/\\[\\]]");function Hp(e,t,n){if(t.search(BT)>=0)throw to(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new zl(...t.split("."))._internalPath}catch{throw to(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function to(e,t,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new Y(k.INVALID_ARGUMENT,l+e+u)}function $T(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Re(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new jT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Yl("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jT extends zp{data(){return super.data()}}function Yl(e,t){return typeof t=="string"?Hp(e,t):t instanceof zl?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Y(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jl{}class Kp extends Jl{}function HT(e,t,...n){let r=[];t instanceof Jl&&r.push(t),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof Zl).length,l=i.filter(u=>u instanceof Xl).length;if(a>1||a>0&&l>0)throw new Y(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)e=s._apply(e);return e}class Xl extends Kp{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new Xl(t,n,r)}_apply(t){const n=this._parse(t);return Gp(t._query,n),new sr(t.firestore,t.converter,$a(t._query,n))}_parse(t){const n=Bp(t.firestore);return function(i,a,l,u,f,d,p){let y;if(f.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Y(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){$h(p,d);const P=[];for(const V of p)P.push(Bh(u,i,V));y={arrayValue:{values:P}}}else y=Bh(u,i,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||$h(p,d),y=FT(l,a,p,d==="in"||d==="not-in");return Ft.create(f,d,y)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Zl extends Jl{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Zl(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ke.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const u of l)Gp(a,u),a=$a(a,u)}(t._query,n),new sr(t.firestore,t.converter,$a(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class tc extends Kp{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new tc(t,n)}_apply(t){const n=function(s,i,a){if(s.startAt!==null)throw new Y(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Y(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vs(i,a)}(t._query,this._field,this._direction);return new sr(t.firestore,t.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Or(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}}function zT(e,t="asc"){const n=t,r=Yl("orderBy",e);return tc._create(r,n)}function Bh(e,t,n){if(typeof(n=Ir(n))=="string"){if(n==="")throw new Y(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hd(t)&&n.indexOf("/")!==-1)throw new Y(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Pt.fromString(n));if(!Z.isDocumentKey(r))throw new Y(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return eh(e,new Z(r))}if(n instanceof Re)return eh(e,n._key);throw new Y(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bo(n)}.`)}function $h(e,t){if(!Array.isArray(e)||e.length===0)throw new Y(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Gp(e,t){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Y(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Y(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class KT{convertValue(t,n="none"){switch(Pn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ot(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Sn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw nt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return tr(t,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(t){var n,r,s;const i=(s=(r=(n=t.fields)===null||n===void 0?void 0:n[Ki].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Ot(a.doubleValue));return new Gl(i)}convertGeoPoint(t){return new Kl(Ot(t.latitude),Ot(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=mo(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ss(t));default:return null}}convertTimestamp(t){const n=Rn(t);return new $t(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Pt.fromString(t);Et(fp(r),9688,{name:t});const s=new Ps(r.get(1),r.get(3)),i=new Z(r.popFirst(5));return s.isEqual(n)||rn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(e,t,n){let r;return r=e?e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class WT extends zp{constructor(t,n,r,s,i,a){super(t,n,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Pi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Yl("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Pi extends WT{data(t={}){return super.data(t)}}class QT{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new mi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new Pi(this._firestore,this._userDataWriter,r.key,r,new mi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new Pi(s._firestore,s._userDataWriter,l.doc.key,l.doc,new mi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Pi(s._firestore,s._userDataWriter,l.doc.key,l.doc,new mi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,d=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:YT(l.type),doc:u,oldIndex:f,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function YT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt(61501,{type:e})}}class JT extends KT{constructor(t){super(),this.firestore=t}convertBytes(t){return new xr(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Re(this.firestore,null,n)}}function jh(e){e=Ns(e,sr);const t=Ns(e.firestore,Ro),n=Lp(t),r=new JT(t);return qT(e._query),ST(n,e._query).then(s=>new QT(t,r,e,s))}function XT(e){return Wp(Ns(e.firestore,Ro),[new Sl(e._key,$e.none())])}function ZT(e,t){const n=Ns(e.firestore,Ro),r=VT(e),s=GT(e.converter,t);return Wp(n,[LT(Bp(e.firestore),"addDoc",r._key,s,e.converter!==null,{}).toMutation(r._key,$e.exists(!1))]).then(()=>r)}function Wp(e,t){return function(r,s){const i=new Tn;return r.asyncQueue.enqueueAndForget(async()=>pT(await CT(r),s,i)),i.promise}(Lp(e),t)}(function(t,n=!0){(function(s){Dr=s})(Tv),qi(new bs("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Ro(new Ov(r.getProvider("auth-internal")),new Fv(a,r.getProvider("app-check-internal")),function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Y(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ps(f.options.projectId,d)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Tr(qu,Hu,t),Tr(qu,Hu,"esm2017")})();var tw="firebase",ew="11.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tr(tw,ew,"app");const nw={apiKey:"AIzaSyAlB4FZ3Ck10N3FKIocD4RajOh511_zQfE",authDomain:"opel-check.firebaseapp.com",projectId:"opel-check",storageBucket:"opel-check.firebasestorage.app",messagingSenderId:"350504595763",appId:"1:350504595763:web:8e94f12d14344482034e46"},rw=pd(nw),da=DT(rw),es=gn([]),pa=gn(!1),qn=gn(!1);function Qp(){const e=async i=>{try{qn.value=!0,await ZT(fa(da,"maintenance-logs"),{...i,createdAt:new Date().toISOString()}),await t()}catch(a){console.error("Error adding log:",a);const l=JSON.parse(localStorage.getItem("maintenance-logs")||"[]");l.unshift(i),localStorage.setItem("maintenance-logs",JSON.stringify(l)),es.value=l}finally{qn.value=!1}},t=async()=>{try{qn.value=!0;const i=HT(fa(da,"maintenance-logs"),zT("createdAt","desc")),a=await jh(i),l=[];a.forEach(u=>{l.push(u.data())}),es.value=l,localStorage.setItem("maintenance-logs",JSON.stringify(l))}catch(i){console.error("Error loading logs:",i);const a=localStorage.getItem("maintenance-logs");a&&(es.value=JSON.parse(a))}finally{qn.value=!1}},n=async()=>{if(confirm("Mchten Sie wirklich alle Protokolle lschen?"))try{qn.value=!0;const a=(await jh(fa(da,"maintenance-logs"))).docs.map(l=>XT(l.ref));await Promise.all(a),es.value=[],localStorage.removeItem("maintenance-logs")}catch(i){console.error("Error clearing logs:",i)}finally{qn.value=!1}},r=()=>{pa.value=!0},s=()=>{pa.value=!1};return t(),{logs:es,isLogModalOpen:pa,isLoading:qn,addLog:e,clearLogs:n,openLogModal:r,closeLogModal:s}}function sw(e,t){return St(),Vt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[j("path",{"fill-rule":"evenodd",d:"M15.312 11.424a5.5 5.5 0 0 1-9.201 2.466l-.312-.311h2.433a.75.75 0 0 0 0-1.5H3.989a.75.75 0 0 0-.75.75v4.242a.75.75 0 0 0 1.5 0v-2.43l.31.31a7 7 0 0 0 11.712-3.138.75.75 0 0 0-1.449-.39Zm1.23-3.723a.75.75 0 0 0 .219-.53V2.929a.75.75 0 0 0-1.5 0V5.36l-.31-.31A7 7 0 0 0 3.239 8.188a.75.75 0 1 0 1.448.389A5.5 5.5 0 0 1 13.89 6.11l.311.31h-2.432a.75.75 0 0 0 0 1.5h4.243a.75.75 0 0 0 .53-.219Z","clip-rule":"evenodd"})])}function iw(e,t){return St(),Vt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[j("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z","clip-rule":"evenodd"})])}function ow(e,t){return St(),Vt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[j("path",{"fill-rule":"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}function aw(e,t){return St(),Vt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[j("path",{"fill-rule":"evenodd",d:"M15.988 3.012A2.25 2.25 0 0 1 18 5.25v6.5A2.25 2.25 0 0 1 15.75 14H13.5V7A2.5 2.5 0 0 0 11 4.5H8.128a2.252 2.252 0 0 1 1.884-1.488A2.25 2.25 0 0 1 12.25 1h1.5a2.25 2.25 0 0 1 2.238 2.012ZM11.5 3.25a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 .75.75v.25h-3v-.25Z","clip-rule":"evenodd"}),j("path",{"fill-rule":"evenodd",d:"M2 7a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7Zm2 3.25a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75Zm0 3.5a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75Z","clip-rule":"evenodd"})])}function lw(e,t){return St(),Vt("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}function cw(e,t){return St(),Vt("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"})])}function uw(e,t){return St(),Vt("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function hw(e,t){return St(),Vt("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})])}function fw(e,t){return St(),Vt("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const dw={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50"},pw={class:"bg-white rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col shadow-2xl border border-gray-100"},gw={class:"flex justify-between items-center mb-6"},mw={key:0,class:"flex-1 flex items-center justify-center"},_w={key:1,class:"flex-1 overflow-auto"},yw={key:0,class:"text-center text-gray-500 py-12 bg-gray-50 rounded-xl"},vw={key:1,class:"space-y-4"},Ew={class:"flex flex-col sm:flex-row justify-between items-start gap-4"},Tw={class:"flex-1"},ww={class:"font-semibold text-gray-900"},Iw={class:"mt-2 flex flex-wrap gap-2"},Aw={class:"px-3 py-1 text-sm rounded-full bg-gray-100 text-gray-700"},bw={class:"text-right text-sm space-y-1"},Cw={class:"flex items-center gap-2 text-gray-600"},Rw={class:"flex items-center gap-2 text-gray-600"},Sw={class:"mt-6 flex justify-end gap-3"},Pw=["disabled"],xw=["disabled"],Vw=xf({__name:"LogModal",setup(e){const{logs:t,isLogModalOpen:n,isLoading:r,clearLogs:s,closeLogModal:i}=Qp(),a=f=>new Date(f).toLocaleDateString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit"}),l=f=>({daily:"Tglich",weekly:"Wchentlich",monthly:"Monatlich",quarterly:"Vierteljhrlich",biannual:"Halbjhrlich",annual:"Jhrlich"})[f],u=f=>({Motor:"bg-red-100 text-red-800",Reifen:"bg-blue-100 text-blue-800",Bremsen:"bg-yellow-100 text-yellow-800",Karosserie:"bg-purple-100 text-purple-800",Beleuchtung:"bg-green-100 text-green-800",Elektrik:"bg-orange-100 text-orange-800",Dokumente:"bg-slate-100 text-slate-800",Service:"bg-emerald-100 text-emerald-800",Klimaanlage:"bg-cyan-100 text-cyan-800"})[f]||"bg-gray-100 text-gray-800";return(f,d)=>(St(),Xf(fm,{to:"body"},[yt(n)?(St(),Vt("div",dw,[j("div",pw,[j("div",gw,[d[3]||(d[3]=j("div",null,[j("h2",{class:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600"}," Wartungsprotokoll "),j("p",{class:"text-gray-600 text-sm mt-1"},"bersicht aller durchgefhrten Wartungen")],-1)),j("button",{onClick:d[0]||(d[0]=(...p)=>yt(i)&&yt(i)(...p)),class:"text-gray-400 hover:text-gray-600 transition-colors duration-200"},[xt(yt(fw),{class:"w-6 h-6"})])]),yt(r)?(St(),Vt("div",mw,d[4]||(d[4]=[j("div",{class:"animate-spin rounded-full h-12 w-12 border-2 border-blue-200 border-t-blue-600"},null,-1)]))):(St(),Vt("div",_w,[yt(t).length===0?(St(),Vt("div",yw,[xt(yt(cw),{class:"h-16 w-16 mx-auto mb-4 text-gray-400"}),d[5]||(d[5]=j("p",null,"Keine Wartungsprotokolle vorhanden",-1))])):(St(),Vt("div",vw,[(St(!0),Vt(me,null,wa(yt(t),p=>(St(),Vt("div",{key:p.checkedAt,class:"bg-white rounded-xl p-6 border border-gray-100 shadow-sm hover:shadow-md transition-shadow duration-200"},[j("div",Ew,[j("div",Tw,[j("h3",ww,ye(p.taskDescription),1),j("div",Iw,[j("span",{class:Ae(["px-3 py-1 text-sm rounded-full",u(p.category)])},ye(p.category),3),j("span",Aw,ye(l(p.frequency)),1)])]),j("div",bw,[j("div",Cw,[xt(yt(lw),{class:"h-4 w-4"}),Yn(" Geprft am: "+ye(a(p.checkedAt)),1)]),j("div",Rw,[xt(yt(uw),{class:"h-4 w-4"}),Yn(" Nchste Prfung: "+ye(a(p.nextDueDate)),1)])])])]))),128))]))])),j("div",Sw,[j("button",{onClick:d[1]||(d[1]=(...p)=>yt(s)&&yt(s)(...p)),class:"px-4 py-2 text-red-600 hover:text-red-700 disabled:opacity-50 transition-colors duration-200 flex items-center gap-2",disabled:yt(r)||yt(t).length===0},[xt(yt(hw),{class:"h-5 w-5"}),d[6]||(d[6]=Yn(" Protokolle lschen "))],8,Pw),j("button",{onClick:d[2]||(d[2]=(...p)=>yt(i)&&yt(i)(...p)),class:"px-6 py-2 bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 rounded-lg hover:from-gray-200 hover:to-gray-300 transform hover:scale-105 transition-all duration-200 shadow-sm hover:shadow-md disabled:opacity-50 font-medium flex items-center gap-2",disabled:yt(r)}," Schlieen ",8,xw)])])])):Ra("",!0)]))}}),Dw=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},kw=Dw(Vw,[["__scopeId","data-v-e9b22030"]]),Nw={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 pb-20"},Ow={class:"sticky top-0 bg-white shadow-md z-10"},Mw={class:"max-w-7xl mx-auto px-4 py-4"},Lw={key:0,class:"mb-4 p-4 bg-gray-800 text-gray-200 rounded-lg shadow text-sm font-mono overflow-auto"},Fw={class:"flex justify-between items-center mb-2"},Uw={class:"flex flex-col gap-4"},Bw={class:"flex items-center gap-4 p-2 bg-gray-700 rounded"},$w={class:"relative inline-flex items-center cursor-pointer"},jw=["disabled"],qw={class:"flex items-center gap-4 p-2 bg-gray-700 rounded"},Hw=["disabled"],zw={class:"whitespace-pre-wrap"},Kw={class:"flex flex-col gap-2"},Gw={class:"flex justify-between items-center"},Ww={class:"flex items-center gap-4"},Qw={class:"flex gap-2"},Yw=["disabled"],Jw={class:"max-w-7xl mx-auto px-4 py-8"},Xw={class:"space-y-6"},Zw={key:0,class:"bg-white rounded-xl shadow-sm overflow-hidden"},tI=["onClick"],eI={class:"flex items-center gap-3"},nI={class:"text-lg font-semibold"},rI={class:"border-t border-gray-100"},sI={class:"divide-y divide-gray-100"},iI={class:"flex flex-col gap-3"},oI={class:"flex justify-between items-start gap-4"},aI={class:"flex-1"},lI={class:"font-medium text-gray-900"},cI={class:"mt-1 flex flex-wrap gap-2"},uI={class:"flex items-center"},hI={class:"grid grid-cols-2 gap-4 text-sm"},fI=["onClick","disabled"],dI=xf({__name:"App",setup(e){const{maintenanceTasks:t,updateTask:n,resetTasks:r}=Y_(),{addLog:s,isLoading:i,openLogModal:a}=Qp(),l=gn(!1),u=m=>{(m.ctrlKey||m.metaKey)&&m.key==="d"&&(m.preventDefault(),l.value=!l.value)};fl(()=>{window.addEventListener("keydown",u)}),dl(()=>{window.removeEventListener("keydown",u)});const f=wi(()=>({tasksLoaded:t.value.length,groupedTasksCount:Object.values(N.value).reduce((m,_)=>m+_.length,0),groups:Object.fromEntries(Object.entries(N.value).map(([m,_])=>[m,_.length])),rawTasks:t.value,rawGroupedTasks:N.value,collapsedState:W.value,simulatedDateEnabled:p.value,currentSimulatedDate:d.value})),d=gn(new Date().toISOString().split("T")[0]),p=gn(!1),y=()=>p.value&&d.value?new Date(d.value):new Date,C=m=>m.nextCheck?new Date(m.nextCheck)<y():!1,P=m=>m.lastCheck?C(m)?"berfllig":"Aktuell":"Ausstehend",V=wi(()=>[...t.value].sort((m,_)=>{const w=C(m),E=C(_);if(w&&!E)return-1;if(!w&&E)return 1;const T=!m.lastCheck,Tt=!_.lastCheck;return T&&!Tt?-1:!T&&Tt?1:m.nextCheck&&_.nextCheck?new Date(m.nextCheck).getTime()-new Date(_.nextCheck).getTime():0})),N=wi(()=>{const m={daily:[],weekly:[],monthly:[],quarterly:[],biannual:[],annual:[]};return V.value.forEach(_=>{m[_.frequency].push(_)}),m}),K=m=>{const _=m.some(T=>C(T)),w=m.some(T=>!T.lastCheck),E=m.every(T=>T.lastCheck&&!C(T));return _?"overdue":w?"pending":E?"current":"pending"},G=["daily","weekly","monthly","quarterly","biannual","annual"],W=gn({daily:!1,weekly:!1,monthly:!1,quarterly:!1,biannual:!1,annual:!1}),q=()=>{G.forEach(m=>{N.value[m].length>0&&(W.value[m]=K(N.value[m])==="current")})};Ei(N,()=>{q()},{immediate:!0});const at=m=>{W.value[m]=!W.value[m]},st=m=>({daily:"Tglich",weekly:"Wchentlich",monthly:"Monatlich",quarterly:"Vierteljhrlich",biannual:"Halbjhrlich",annual:"Jhrlich"})[m],A=m=>({Motor:"bg-red-100 text-red-800",Reifen:"bg-blue-100 text-blue-800",Bremsen:"bg-yellow-100 text-yellow-800",Karosserie:"bg-purple-100 text-purple-800",Beleuchtung:"bg-green-100 text-green-800",Elektrik:"bg-orange-100 text-orange-800",Dokumente:"bg-slate-100 text-slate-800",Service:"bg-emerald-100 text-emerald-800",Klimaanlage:"bg-cyan-100 text-cyan-800"})[m]||"bg-gray-100 text-gray-800",v=async m=>{const _=y(),w=new Date(_);switch(m.frequency){case"daily":w.setDate(w.getDate()+1);break;case"weekly":w.setDate(w.getDate()+7);break;case"monthly":w.setMonth(w.getMonth()+1);break;case"quarterly":w.setMonth(w.getMonth()+3);break;case"biannual":w.setMonth(w.getMonth()+6);break;case"annual":w.setFullYear(w.getFullYear()+1);break}const E={...m,lastCheck:_.toISOString(),nextCheck:w.toISOString()};await s({taskId:m.id,taskDescription:m.description,category:m.category,frequency:m.frequency,checkedAt:_.toISOString(),nextDueDate:w.toISOString()}),n(E)};return Nf((m,_,w)=>(console.error("Error captured:",m),console.log("Component:",_),console.log("Error Info:",w),!1)),(m,_)=>(St(),Vt("div",Nw,[j("header",Ow,[j("div",Mw,[xt(T_,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"transform -translate-y-4 opacity-0","enter-to-class":"transform translate-y-0 opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"transform translate-y-0 opacity-100","leave-to-class":"transform -translate-y-4 opacity-0"},{default:Ef(()=>[l.value?(St(),Vt("div",Lw,[j("div",Fw,[_[5]||(_[5]=j("span",{class:"text-xs text-gray-400"},"Debug Info (Ctrl/Cmd + D to toggle)",-1)),j("button",{onClick:_[0]||(_[0]=w=>l.value=!1),class:"text-gray-400 hover:text-gray-200 transition-colors"}," ESC ")]),j("div",Uw,[j("div",Bw,[j("label",$w,[Qo(j("input",{type:"checkbox","onUpdate:modelValue":_[1]||(_[1]=w=>p.value=w),class:"sr-only peer"},null,512),[[q_,p.value]]),_[6]||(_[6]=j("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"},null,-1)),_[7]||(_[7]=j("span",{class:"ms-3 text-sm font-medium text-gray-200"},"Datum simulieren",-1))]),Qo(j("input",{type:"date","onUpdate:modelValue":_[2]||(_[2]=w=>d.value=w),disabled:!p.value,class:"px-3 py-1.5 border border-gray-600 bg-gray-700 text-gray-200 rounded-lg text-sm disabled:opacity-50"},null,8,jw),[[j_,d.value]])]),j("div",qw,[j("button",{onClick:_[3]||(_[3]=(...w)=>yt(r)&&yt(r)(...w)),class:"px-4 py-2 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg hover:from-yellow-600 hover:to-orange-600 transform hover:scale-105 transition-all duration-200 shadow-sm hover:shadow disabled:opacity-50 text-sm flex items-center gap-2",disabled:yt(i)},[xt(yt(sw),{class:"h-4 w-4"}),_[8]||(_[8]=Yn(" Zurcksetzen "))],8,Hw)]),j("pre",zw,ye(JSON.stringify(f.value,null,2)),1)])])):Ra("",!0)]),_:1}),j("div",Kw,[_[11]||(_[11]=j("h1",{class:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600"}," Opel Wartungscheckliste ",-1)),j("div",Gw,[j("div",Ww,[_[10]||(_[10]=j("p",{class:"text-sm text-gray-600"},"Fahrzeugwartung im berblick",-1)),j("div",Qw,[j("button",{onClick:_[4]||(_[4]=(...w)=>yt(a)&&yt(a)(...w)),class:"px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transform hover:scale-105 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 text-sm flex items-center gap-2",disabled:yt(i)},[xt(yt(aw),{class:"h-4 w-4"}),_[9]||(_[9]=Yn(" Protokolle "))],8,Yw)])])])])])]),j("main",Jw,[j("div",Xw,[(St(),Vt(me,null,wa(G,w=>(St(),Vt(me,{key:w},[N.value[w].length>0?(St(),Vt("div",Zw,[j("div",{onClick:E=>at(w),class:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50 transition-colors duration-200"},[j("div",eI,[j("div",{class:Ae(["h-3 w-3 rounded-full",{"bg-red-500":K(N.value[w])==="overdue","bg-green-500":K(N.value[w])==="current","bg-yellow-400":K(N.value[w])==="pending"}])},null,2),j("h2",nI,ye(st(w)),1)]),xt(yt(ow),{class:Ae(["h-5 w-5 text-gray-400 transition-transform duration-200",{"rotate-180":!W.value[w]}])},null,8,["class"])],8,tI),Qo(j("div",rI,[j("div",sI,[(St(!0),Vt(me,null,wa(N.value[w],E=>(St(),Vt("div",{key:E.id,class:"p-4 hover:bg-gray-50 transition-colors duration-200"},[j("div",iI,[j("div",oI,[j("div",aI,[j("h3",lI,ye(E.description),1),j("div",cI,[j("span",{class:Ae(["px-2 py-1 text-xs rounded-full",A(E.category)])},ye(E.category),3)])]),j("div",uI,[j("div",{class:Ae(["h-3 w-3 rounded-full mr-2",{"bg-red-500":C(E),"bg-green-500":E.lastCheck&&!C(E),"bg-yellow-400":!E.lastCheck}])},null,2),j("span",{class:Ae(["text-sm font-medium",{"text-red-600":C(E),"text-green-600":E.lastCheck&&!C(E),"text-yellow-600":!E.lastCheck}])},ye(P(E)),3)])]),j("div",hI,[j("div",null,[_[12]||(_[12]=j("div",{class:"text-gray-500 mb-1"},"Letzte Prfung",-1)),j("div",{class:Ae({"text-gray-400":!E.lastCheck,"text-gray-900":E.lastCheck})},ye(E.lastCheck?new Date(E.lastCheck).toLocaleDateString("de-DE"):"Nie"),3)]),j("div",null,[_[13]||(_[13]=j("div",{class:"text-gray-500 mb-1"},"Nchste Prfung",-1)),j("div",{class:Ae({"text-gray-400":!E.nextCheck,"text-gray-900":E.nextCheck})},ye(E.nextCheck?new Date(E.nextCheck).toLocaleDateString("de-DE"):"Nicht geplant"),3)])]),j("button",{onClick:T=>v(E),class:Ae(["w-full px-4 py-2 text-white rounded-lg transform hover:scale-105 transition-all duration-200 shadow-sm hover:shadow-md disabled:opacity-50 text-sm font-medium flex items-center justify-center gap-2",{"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700":C(E),"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700":E.lastCheck&&!C(E),"bg-gradient-to-r from-yellow-400 to-yellow-500 hover:from-yellow-500 hover:to-yellow-600":!E.lastCheck}]),disabled:yt(i)},[xt(yt(iw),{class:"h-4 w-4"}),_[14]||(_[14]=Yn(" Als erledigt markieren "))],10,fI)])]))),128))])],512),[[R_,!W.value[w]]])])):Ra("",!0)],64))),64))])]),xt(kw)]))}});G_(dI).mount("#app");
